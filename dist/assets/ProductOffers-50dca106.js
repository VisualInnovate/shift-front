import{_ as A,p as E,u as q,r as c,a as L,C as D,c as o,d as i,f as l,t as n,m as d,e as H,w as M,F as R,k as T,l as S,h as C,I as F,x as V,g as U,j as _,A as W,B as G}from"./index-eef7b1a0.js";import{S as J,A as K,a as Q}from"./swiper-44da830b.js";const X={class:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"},Y={class:"flex justify-between"},Z={class:"font-bold font-sans text-gray-800 text-2xl md:text-3xl lg:text-4xl mb-6"},ee=["href","onClick"],te={class:"relative aspect-square overflow-hidden bg-gray-50"},se={key:0,class:"absolute top-3 left-3 z-10 bg-black text-white text-xs font-bold px-3 py-1.5 rounded-full uppercase tracking-wider"},ae=["src","alt"],le=["onClick"],oe={class:"p-5 flex flex-col"},re={class:"font-semibold text-gray-900 text-lg line-clamp-2 leading-tight mb-2"},ie={key:0,class:"text-gray-600 text-sm line-clamp-2 mb-3 leading-snug"},ne={class:"flex items-center gap-1"},ce={class:"text-yellow-500 font-bold text-sm"},de={class:"text-gray-500 text-xs"},ue={class:"mt-auto"},_e={class:"flex justify-between"},pe={class:"flex items-baseline gap-2"},he={class:"lg:text-2xl m-auto font-bold text-gray-900"},ge={key:0,class:"font-bold my-auto text-base line-through text-[#0b3baa] px-2 py-0.5 rounded"},fe=["onClick","disabled"],me={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},ve={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},we={key:0,class:"flex items-center text-[#0b3baa] text-xs font-medium"},xe={__name:"productsSwiper",props:{products:{type:Object,required:!0}},setup(y){const f=E(),u=q(),m=c(localStorage.getItem("defaultStoreId")),k=c(f.params.id),{t:p}=L(),h=D(),v=(a,s)=>{a.target.closest("button")||window.open(`/product-details/${s.id}`,"_blank","noopener,noreferrer")},w=async a=>{if(!(a.is_stock===1||a.in_cart)){if(!h.authenticatedweb){u.push({name:"authlog"});return}try{await _.post("/api/cart/add",{product_id:a.id,variant_id:a.variant_id||null,quantity:1}),a.in_cart=!0}catch{alert(p("cart.error")||"Failed to add to cart.")}}},B=()=>{k.value?u.push({name:"products-exclusive",params:{id:m.value}}):u.push({name:"products-exclusive",params:{id:m.value}})},x=async a=>{if(!h.authenticatedweb){u.push({name:"authlog"});return}const s=a.is_wished;try{s?await _.delete(`/api/wishlists/${a.id}`,{data:{product_id:a.id}}):await _.post("/api/wishlists",{product_id:a.id}),a.is_wished=!s}catch{a.is_wished=s,alert(p("wishlist.error")||"Failed to update wishlist.")}},g=(a,s)=>a.length>s?a.slice(0,s)+"...":a;return(a,s)=>(o(),i("div",X,[l("div",Y,[l("h2",Z,n(y.products.title),1),y.products.title==a.$t("category.exclusive")?(o(),i("h3",{key:0,onClick:B,href:"",class:"cursor-pointer text-[#0b3baa] font-bold font-sans text-2xl"},n(a.$t("category.see_all")),1)):d("",!0)]),H(C(Q),{modules:[C(K)],"slides-per-view":4,"space-between":20,autoplay:{delay:3e3,disableOnInteraction:!1},speed:4e3,"grab-cursor":!0,"touch-ratio":1.5,class:"product-swiper",breakpoints:{320:{slidesPerView:2,spaceBetween:5,centeredSlides:!0},480:{slidesPerView:2,spaceBetween:5},640:{slidesPerView:2,spaceBetween:16},768:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:24},1280:{slidesPerView:4,spaceBetween:24}}},{default:M(()=>[(o(!0),i(R,null,T(y.products.products,(t,$)=>(o(),S(C(J),{key:$,class:"py-4"},{default:M(()=>[l("a",{href:`/product-details/${t.id}`,rel:"noopener noreferrer",class:"block h-full bg-white rounded-2xl shadow-md hover:shadow-2xl transition-all duration-300 cursor-pointer overflow-hidden group",onClick:F(b=>v(b,t),["prevent","stop"])},[l("div",te,[t.is_best_seller?(o(),i("div",se," Best Seller ")):d("",!0),l("img",{src:t.img||"/placeholder-image.jpg",alt:t.name,class:"w-full h-full object-contain transition-transform duration-700 group-hover:scale-110"},null,8,ae),s[1]||(s[1]=l("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),C(h).authenticatedweb?(o(),i("button",{key:1,onClick:F(b=>x(t),["stop","prevent"]),class:V(["absolute top-3 right-3 z-20 p-2.5 bg-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300",{"text-red-500":t.is_wished}])},s[0]||(s[0]=[l("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[l("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),10,le)):d("",!0)]),l("div",oe,[l("h3",re,n(g(t.name,50)),1),t.sub_name?(o(),i("p",ie,n(t.sub_name),1)):d("",!0),l("div",ne,[l("span",ce,n(t.total_rating||"0"),1),s[2]||(s[2]=l("svg",{class:"w-4 h-4 text-yellow-500 fill-current",viewBox:"0 0 24 24"},[l("path",{d:"M12 17.27l6.18 3.73-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73-1.64 7.03z"})],-1)),l("span",de,"("+n(t.total_rating||0)+")",1)]),l("div",ue,[l("div",_e,[l("div",pe,[l("span",he,n(a.$t("currencyLabel"))+" "+n(parseFloat(t.price-t.total_discounts_value).toFixed(2)),1),t.total_discounts_value!=0?(o(),i("span",ge,n(t.price),1)):d("",!0)]),l("button",{onClick:F(b=>w(t),["stop","prevent"]),disabled:t.is_stock===1,class:V(["p-3 rounded-full my-auto transition-all duration-300 shadow-md",t.in_cart?"bg-[#0b3baa] text-white":t.is_stock===1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#A6853B] text-white hover:bg-[#8f702c]"])},[t.in_cart?(o(),i("svg",me,s[3]||(s[3]=[l("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):(o(),i("svg",ve,s[4]||(s[4]=[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.708.707 1.708H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])))],10,fe)]),t.is_free_shipping==1?(o(),i("div",we,[s[5]||(s[5]=l("a",{class:"pi pi-truck"},null,-1)),U(" "+n(a.$t("products.Free_Delivery")),1)])):d("",!0)])])],8,ee)]),_:2},1024))),128))]),_:1},8,["modules"])]))}},I=A(xe,[["__scopeId","data-v-e7c375ba"]]);const be={class:"bg-[#FAF7F0]"},ye={class:""},ke={class:"mx-auto max-w-7xl"},Be={__name:"ProductOffers",setup(y){const{t:f}=L(),u=E(),m=c(localStorage.getItem("appLang")||"ar"),k=c(localStorage.getItem("defaultStoreId")),p=c(u.params.id||null),h=c({title:"",products:[]}),v=c({title:"",products:[]}),w=c({title:"",products:[]}),B=c(!1),x=c(null),g=e=>parseFloat(e||0).toFixed(2),a=e=>{var r,N;return((N=(r=e.media)==null?void 0:r.find(O=>O.name==="product_main_image"))==null?void 0:N.url)||e.key_default_image||"https://via.placeholder.com/300x300.png?text=No+Image"},s=e=>({id:e.id,variant_id:e.variant_id||null,name:m.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,sub_name:m.value==="ar"?e.sub_name_ar||e.sub_name_en||"":e.sub_name_en||e.sub_name_ar||"",price:g(e.base_price),original_price:g(e.base_price),final_price:g(Number(e.base_price)-Number(e.total_discounts_value||0)),total_discounts_value:g(e.total_discounts_value),is_free_shipping:e.is_free_shipping,total_rating:e.total_rating,has_discount:Number(e.total_discounts_value||0)>0,img:a(e),is_wished:e.is_wished||!1,in_cart:e.in_cart||!1,is_stock:e.is_stock===1,raw:e}),t=e=>{const r=`api/home/${e}/${k.value}`;return p.value?`${r}/${p.value}`:r},$=async()=>{try{const r=(await _.get(t("exclusive-offers"))).data.data.data||[];h.value={title:f("category.exclusive")||"Exclusive Offers",products:r.map(s)}}catch(e){console.error("Error fetching exclusive offers:",e),x.value="Failed to load exclusive offers."}},b=async()=>{try{const r=(await _.get(t("best-sellers"))).data.data.data||[];v.value={title:f("category.bestsellers"),products:r.map(s)}}catch(e){console.error("Error fetching best sellers:",e),x.value="Failed to load best sellers."}},z=async()=>{try{const r=(await _.get(t("new-arrivals"))).data.data.data||[];w.value={title:f("category.newlyarrived")||"New Arrivals",products:r.map(s)}}catch(e){console.error("Error fetching new arrivals:",e),x.value="Failed to load new arrivals."}},j=async()=>{try{await _.get(`api/home/get-categories/${k.value}`),await _.get("api/home/get-media-link")}catch(e){console.error("Error loading additional data:",e)}},P=async()=>{B.value=!0,await Promise.all([z(),b(),$(),j()]),B.value=!1};return W(()=>{p.value=u.params.id||null,P()}),G(()=>u.params.id,e=>{p.value=e||null,P()}),(e,r)=>(o(),i("main",be,[l("div",ye,[l("section",ke,[h.value.products.length>=1?(o(),S(I,{key:0,products:h.value},null,8,["products"])):d("",!0),v.value.products.length>=1?(o(),S(I,{key:1,products:v.value},null,8,["products"])):d("",!0),w.value.products.length>=1?(o(),S(I,{key:2,products:w.value},null,8,["products"])):d("",!0)])])]))}},$e=A(Be,[["__scopeId","data-v-67dc8f5b"]]);export{$e as P,I as p};
