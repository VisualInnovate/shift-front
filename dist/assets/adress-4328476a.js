import{_ as A,l as B,u as L,a as S,z as D,r as h,S as T,o as H,e as d,h as i,g as e,j as r,t as l,i as y,n as g,v as w,F as N,m as F,w as $,b as k,s as I,A as x,T as q,k as R}from"./index-2602fe15.js";const U=["dir"],W={class:"max-w-6xl mx-auto flex flex-col md:flex-row gap-6"},G={class:"w-full md:w-64 bg-white rounded-xl shadow-md p-6 h-fit"},J={class:"space-y-2"},K=["aria-label"],O=["aria-label"],P=["aria-label"],Q=["aria-label"],X={class:"flex-1 bg-white rounded-xl shadow-md p-8"},Y={class:"text-2xl font-bold text-center mb-8 text-gray-700"},Z={key:0,class:"flex justify-center items-center py-4"},ee={class:"ml-2"},se={key:1,class:"text-center text-red-500"},te=["aria-label"],re={key:2,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ae={class:"flex flex-col gap-2 flex-shrink-0 mt-1"},le=["onClick","aria-label"],oe=["onClick","aria-label"],de={class:"text-gray-600 mb-1"},ie={key:0,class:"text-gray-600 mb-1"},ne={class:"text-gray-600 mb-1"},ue={class:"text-gray-600 mb-1"},ce={key:0,class:"col-span-1 md:col-span-2 text-center text-gray-500"},pe={class:"flex justify-center mt-8"},ge=["aria-label"],ve={class:"flex items-center gap-4"},fe={class:"text-gray-700"},me={class:"font-semibold"},he={class:"flex justify-end gap-2"},_e=["loading"],xe={__name:"adress",setup(be){const n=B(),{t:s}=L(),v=S(),E=D(),f=h([]),_=h(!0),u=h(null),m=h(!1),c=T({id:null,name:""}),b=h(!1),z=(o,a)=>{c.id=o,c.name=a,m.value=!0},V=async()=>{var o,a;m.value=!1,b.value=!0;try{const t=c.id,p=await k.delete(`/api/address/${t}`);if(p.data.is_success)f.value=f.value.filter(j=>j.id!==t),v.add({severity:"success",summary:s("success"),detail:s("addresses.deleteSuccess"),life:3e3});else throw new Error(p.data.message||s("addresses.deleteApiError"))}catch(t){const p=((a=(o=t.response)==null?void 0:o.data)==null?void 0:a.message)||s("addresses.deleteError");v.add({severity:"error",summary:s("error"),detail:p,life:3e3}),console.error("Error deleting address:",t)}finally{b.value=!1,c.id=null,c.name=""}},C=async()=>{try{_.value=!0,u.value=null;const o=await k.get("/api/home/address");if(o.data.is_success)f.value=o.data.data;else throw new Error(s("addresses.apiError"))}catch(o){u.value=s("addresses.loadError"),v.add({severity:"error",summary:s("error"),detail:u.value,life:3e3}),console.error("Error fetching addresses:",o)}finally{_.value=!1}},M=async()=>{try{await k.post("/api/logout"),E.handleLogout(),v.add({severity:"success",summary:s("success"),detail:s("profile.logoutSuccess"),life:3e3}),n.push({name:"login"})}catch(o){v.add({severity:"error",summary:s("error"),detail:s("profile.logoutError"),life:3e3}),console.error("Error logging out:",o)}};return H(C),(o,a)=>(d(),i("div",{class:"min-h-screen p-8 font-tajawal",dir:o.$i18n.locale==="ar"?"rtl":"ltr"},[e("div",W,[e("aside",G,[e("ul",J,[e("li",{onClick:a[0]||(a[0]=t=>r(n).push({name:"profile"})),class:"p-3 rounded-lg flex items-center gap-4 text-gray-500 hover:bg-gray-50 cursor-pointer",role:"button","aria-label":r(s)("profile.account")},[e("span",null,l(r(s)("profile.account")),1)],8,K),e("li",{onClick:a[1]||(a[1]=t=>r(n).push({name:"orders"})),class:"p-3 rounded-lg flex items-center gap-4 text-gray-500 hover:bg-gray-50 cursor-pointer",role:"button","aria-label":r(s)("profile.orders")},[e("span",null,l(r(s)("profile.orders")),1)],8,O),e("li",{onClick:a[2]||(a[2]=t=>r(n).push({name:"addres"})),class:"p-3 rounded-lg flex items-center gap-4 bg-yellow-100 text-yellow-700 font-medium cursor-pointer",role:"button","aria-current":"page","aria-label":r(s)("profile.addresses")},[e("span",null,l(r(s)("profile.addresses")),1)],8,P),e("li",{onClick:M,class:"p-3 rounded-lg flex items-center gap-4 text-red-500 hover:bg-gray-50 cursor-pointer",role:"button","aria-label":r(s)("profile.logout")},[e("span",null,l(r(s)("profile.logout")),1)],8,Q)])]),e("main",X,[e("h1",Y,l(r(s)("addresses.title")),1),_.value?(d(),i("div",Z,[y(r(I),{style:{width:"40px",height:"40px"},strokeWidth:"4",class:"text-blue-600"}),e("p",ee,l(r(s)("loading")),1)])):g("",!0),u.value?(d(),i("div",se,[w(l(u.value)+" ",1),e("button",{onClick:a[3]||(a[3]=t=>C()),class:"ml-4 text-blue-500 hover:underline","aria-label":r(s)("addresses.retry")},l(r(s)("addresses.retry")),9,te)])):g("",!0),!_.value&&!u.value?(d(),i("div",re,[(d(!0),i(N,null,F(f.value,t=>(d(),i("div",{key:t.id,class:x(["bg-white border rounded-xl p-6 flex items-start gap-4",t.is_default?"border-2 border-blue-500":"border-gray-200"])},[e("div",ae,[e("div",{onClick:p=>r(n).push({name:"add-addres",query:{id:t.id}}),role:"button","aria-label":r(s)("addresses.edit",{name:t.address_line_1}),class:"cursor-pointer"},a[8]||(a[8]=[e("svg",{class:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[e("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),e("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"})],-1)]),8,le),e("div",{onClick:p=>z(t.id,t.address_line_1),role:"button","aria-label":r(s)("addresses.delete",{name:t.address_line_1}),class:"cursor-pointer"},a[9]||(a[9]=[e("svg",{class:"w-5 h-5 text-red-500 hover:text-red-700",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 100 2v6a1 1 0 100-2V8z","clip-rule":"evenodd"})],-1)]),8,oe)]),e("div",{class:x(["flex-1",{"text-right":o.$i18n.locale==="ar","text-left":o.$i18n.locale!=="ar"}])},[e("h3",{class:x(["text-lg font-bold mb-1",t.is_default?"text-yellow-600":"text-gray-700"])},l(t.is_default?r(s)("addresses.primary"):r(s)("addresses.shipping")),3),e("p",de,l(t.address_line_1),1),t.address_line_2?(d(),i("p",ie,l(t.address_line_2),1)):g("",!0),e("p",ne,l(t.city),1),e("p",ue,l(t.country),1),t.zip_code?(d(),i("p",{key:1,class:x(["text-gray-500 font-inter",{"direction-ltr":o.$i18n.locale==="ar"}])},l(t.zip_code),3)):g("",!0)],2)],2))),128)),f.value.length===0?(d(),i("div",ce,l(r(s)("addresses.noAddresses")),1)):g("",!0)])):g("",!0),e("div",pe,[e("button",{onClick:a[4]||(a[4]=t=>r(n).push({name:"add-addres"})),class:"px-8 py-3 bg-transparent border-2 border-blue-500 text-blue-500 font-medium rounded-xl hover:bg-blue-50 transition-colors duration-200","aria-label":r(s)("addresses.add")},l(r(s)("addresses.add")),9,ge)])])]),y(r(q),{visible:m.value,"onUpdate:visible":a[7]||(a[7]=t=>m.value=t),header:r(s)("addresses.deleteTitle"),modal:!0,style:{width:"30rem"},class:"p-4"},{footer:$(()=>[e("div",he,[e("button",{onClick:a[5]||(a[5]=t=>m.value=!1),class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50"},l(r(s)("addresses.cancel")),1),e("button",{onClick:a[6]||(a[6]=t=>V()),loading:b.value,class:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition duration-200"},l(r(s)("addresses.deleteConfirm")),9,_e)])]),default:$(()=>[e("div",ve,[a[11]||(a[11]=e("svg",{class:"w-8 h-8 text-red-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.332 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("span",fe,[w(l(r(s)("addresses.deleteConfirmation"))+" ",1),e("strong",me,l(c.name),1),a[10]||(a[10]=w("? "))])])]),_:1},8,["visible","header"]),y(r(R))],8,U))}},we=A(xe,[["__scopeId","data-v-be27e266"]]);export{we as default};
