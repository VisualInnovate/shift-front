import{_ as le,a as ie,b as ne,u as re,A as de,r as c,d as G,z as E,y as ue,o as ce,e as l,f as i,g as t,t as n,i as p,F as N,m as R,n as k,B as v,C as U,D as B,l as f,h as pe,p as y,j as _e,I as ge,E as ve,G as Q,k as me,H as he}from"./index-6aa0199c.js";import{l as fe}from"./lodash-0f4cd45a.js";import{d as be}from"./banner-addtion-e4104052.js";const xe={class:"mx-auto mt-16 max-w-[1440px] px-4 sm:px-6 lg:px-8 pb-16"},ye={key:0,class:"flex flex-col items-center justify-center py-20"},we={class:"mt-4 text-gray-600"},ke={key:1,class:"text-center py-20"},Ce={class:"text-lg font-semibold text-red-600 mb-4"},Le={key:2,class:"max-w-4xl mx-auto mb-6"},Me={class:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100"},$e={class:"flex flex-wrap gap-4"},je=["value","onChange"],Be={class:"h-full border-2 border-gray-100 rounded-xl p-4 transition-all duration-300 peer-checked:border-indigo-600 peer-checked:bg-indigo-50/50 flex items-center gap-4"},Pe={class:"w-12 h-12 rounded-lg bg-gray-50 p-1 overflow-hidden flex-shrink-0 border border-gray-100 transition-transform group-hover:scale-105"},Fe=["src","alt"],ze={class:"flex flex-col"},Ve={class:"font-bold text-gray-900 leading-tight"},Ae={class:"text-[10px] text-gray-400 uppercase font-medium mt-1"},Se={key:3,class:"lg:flex gap-8"},Ee={class:"lg:w-1/4 mb-8 lg:mb-0"},Ne={class:"bg-white p-6 rounded-xl shadow-lg sticky top-24"},Re={class:"font-bold text-xl mb-6"},Ue={class:"space-y-6"},Ie={class:"border-b pb-5"},De={class:"font-semibold"},He={class:"mt-4 space-y-3"},Te=["placeholder"],qe=["id","value"],We=["for"],Ge={class:"border-b pb-5"},Qe={class:"font-semibold"},Je={class:"mt-4"},Ke={class:"text-center text-sm font-medium mt-2"},Oe={class:"font-semibold"},Xe={class:"mt-4 flex gap-3"},Ye=["placeholder"],Ze=["placeholder"],et={class:"lg:w-3/4"},tt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},st=["onClick"],at={class:"bg-white rounded-2xl shadow-md hover:shadow-2xl transition-all duration-300 overflow-hidden h-full flex flex-col"},ot={class:"relative aspect-square overflow-hidden bg-gray-50"},lt={key:0,class:"absolute top-3 left-3 z-10 bg-black text-white text-xs font-bold px-3 py-1.5 rounded-full uppercase tracking-wider"},it=["src","alt"],nt=["onClick","aria-label"],rt={class:"p-5 flex flex-col flex-grow"},dt={class:"font-semibold text-gray-900 text-lg line-clamp-2 leading-tight mb-2"},ut={key:0,class:"text-gray-600 text-sm line-clamp-2 mb-3 leading-snug"},ct={class:"flex items-center gap-1 mb-3"},pt={class:"text-yellow-500 font-bold text-sm"},_t={class:"text-gray-500 text-xs"},gt={class:"mt-auto flex items-center justify-between"},vt={class:"flex items-baseline gap-2"},mt={class:"text-2xl font-bold text-gray-900"},ht={key:0,class:"text-base line-through text-blue-600 font-medium opacity-80"},ft=["onClick","disabled"],bt={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},xt={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},yt={key:1,class:"flex items-center mt-3 text-[#0b3baa] text-xs font-medium"},wt={class:"mt-12 flex justify-center"},kt={key:4,class:"text-center py-20 text-gray-500"},Ct={class:"text-xl"},Lt={__name:"brand-products",setup(Mt){const P=ie(),I=ne(),{t:d,locale:b}=re(),F=de(),J=localStorage.getItem("appLang")||"en";b.value=J;const C=c(!0),m=c(null),D=c([]),w=c(1),L=c(12),H=c(0),M=c([]),_=c(null),u=c({category_ids:[],rate:0,min_price:null,max_price:null}),h=c({category:!0,rating:!1,price:!1}),z=c([]),x=c(""),V=c(!0),A=c(1),K=G(()=>{let a=[];return z.value.forEach(e=>{var s;a.push({id:e.id,name:e.name}),(s=e.subCategories)!=null&&s.data&&e.subCategories.data.forEach(r=>a.push({id:r.id,name:r.name}))}),x.value?a.filter(e=>e.name.toLowerCase().includes(x.value.toLowerCase())):a}),O=G(()=>D.value),T=a=>Number(a).toFixed(2),X=(a,e)=>a?a.length>e?a.substring(0,e)+"...":a:"",q=async()=>{C.value=!0,m.value=null;try{const a=await y.get(`/api/home/brand-availability/${P.params.id}`);a.data.is_success?M.value=a.data.data.map(e=>({id:e.id,type:e.type,name:b.value==="ar"?e.name_ar||e.name_en:e.name_en||e.name_ar,image:e.image})):m.value=d("products.errorLoading")}catch(a){m.value=d("products.errorLoading"),console.error(a)}finally{C.value=!1}},Y=async a=>{_.value=a,await $(),await j()},$=async(a=1,e=!1)=>{if(_.value)try{const r=(await y.get(`/api/home/categories-by-brand/${P.params.id}`,{params:{page:a,search:x.value||void 0}})).data.data,o=r.data.map(g=>({id:g.id,name:b.value==="ar"?g.name_ar||g.name_en:g.name_en||g.name_ar,subCategories:g.subCategories}));z.value=e?[...z.value,...o]:o,V.value=!!r.next_page_url,A.value=a}catch(s){console.error(s)}},Z=()=>{V.value&&$(A.value+1,!0)};E(x,fe.debounce(()=>{A.value=1,$()},300)),E(u,()=>{w.value=1,j()},{deep:!0}),E(b,()=>{$(),j(),M.value=M.value.map(a=>({...a,name:b.value==="ar"?a.name_ar||a.name_en:a.name_en||a.name_ar}))});const j=async(a=1)=>{if(_.value){m.value=null;try{const e={page:a,limit:L.value,category_ids:u.value.category_ids.length?u.value.category_ids.join(","):void 0,rate:u.value.rate>0?u.value.rate:void 0,min_price:u.value.min_price,max_price:u.value.max_price},r=(await y.get(`/api/home/products-by-brand-v2/${P.params.id}/${_.value.id}/${_.value.type}`,{params:e})).data.data.products;D.value=r.data.map(o=>{var g,W;return{id:o.id,name:b.value==="ar"?o.name_ar||o.name_en:o.name_en||o.name_ar,sub_name:b.value==="ar"?o.sub_name_ar||o.sub_name_en:o.sub_name_en||o.sub_name_ar,base_price:parseFloat(o.base_price),final_price:o.total_discounts_value>0?parseFloat(o.base_price)-parseFloat(o.total_discounts_value):parseFloat(o.base_price),total_discounts_value:parseFloat(o.total_discounts_value||0),img:((W=(g=o.media)==null?void 0:g.find(oe=>oe.name==="product_main_image"))==null?void 0:W.url)||o.key_default_image||be,total_rating:o.total_rating||0,total_reviews:o.total_reviews||0,is_wished:o.is_wished||!1,in_cart:o.in_cart||!1,is_stock:o.is_stock,is_free_shipping:o.is_free_shipping||!1,is_best_seller:o.is_best_seller||!1}}),w.value=r.current_page,H.value=r.total}catch(e){m.value=d("products.errorLoading"),console.error(e)}}},ee=a=>{w.value=a.page+1,j(w.value)},te=async a=>{if(!F.authenticatedweb)return I.push({name:"authlog"});if(a.is_stock!==0)try{await y.post("/api/cart/add",{product_id:a.id,quantity:1}),a.in_cart=!0}catch{alert(d("cart.error"))}},se=async a=>{if(!F.authenticatedweb)return I.push({name:"AuthLogin"});const e=a.is_wished;try{e?await y.delete(`/api/wishlists/${a.id}`):await y.post("/api/wishlists",{product_id:a.id}),a.is_wished=!e}catch{a.is_wished=e}},ae=a=>{const e=`/product-details/${a.id}`;window.open(e,"_blank","noopener,noreferrer")},S=a=>{h.value[a]=!h.value[a]};return ue(()=>{q()}),ce(()=>{window.addEventListener("resize",()=>{L.value=window.innerWidth>=1024?12:8})}),(a,e)=>(l(),i("div",xe,[C.value?(l(),i("div",ye,[e[10]||(e[10]=t("img",{src:_e,alt:"Loading",class:"w-32 h-32 object-contain animate-bounce"},null,-1)),t("p",we,n(p(d)("common.loading")),1)])):m.value?(l(),i("div",ke,[t("p",Ce,n(m.value),1),t("button",{onClick:q,class:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition"},n(p(d)("products.retry")),1)])):(l(),i("div",Le,[t("section",Me,[t("div",$e,[(l(!0),i(N,null,R(M.value,s=>(l(),i("label",{key:s.id,class:"relative flex-1 min-w-[160px] group cursor-pointer"},[v(t("input",{type:"radio",name:"availability",value:s,"onUpdate:modelValue":e[0]||(e[0]=r=>_.value=r),class:"peer sr-only",onChange:r=>Y(s)},null,40,je),[[ge,_.value]]),t("div",Be,[t("div",Pe,[t("img",{src:s.image,alt:s.name,class:"w-full h-full object-contain"},null,8,Fe)]),t("div",ze,[t("span",Ve,n(s.name),1),t("span",Ae,n(s.type),1)]),e[11]||(e[11]=t("div",{class:"absolute top-2 right-2 opacity-0 peer-checked:opacity-100 transition-opacity"},[t("div",{class:"bg-indigo-600 rounded-full p-0.5"},[t("svg",{class:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})])])],-1))])]))),128))])])])),_.value?(l(),i("div",Se,[t("aside",Ee,[t("div",Ne,[t("h3",Re,n(p(d)("products.filters")),1),t("div",Ue,[t("div",Ie,[t("div",{onClick:e[1]||(e[1]=s=>S("category")),class:"flex justify-between items-center cursor-pointer"},[t("span",De,n(p(d)("products.category")),1),(l(),i("svg",{class:k([{"rotate-180":h.value.category},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),v(t("div",He,[v(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>x.value=s),type:"text",placeholder:p(d)("products.searchCategory"),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,8,Te),[[B,x.value]]),(l(!0),i(N,null,R(K.value,s=>(l(),i("div",{key:s.id,class:"flex items-center"},[v(t("input",{type:"checkbox",id:`cat-${s.id}`,value:s.id,"onUpdate:modelValue":e[3]||(e[3]=r=>u.value.category_ids=r),class:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"},null,8,qe),[[ve,u.value.category_ids]]),t("label",{for:`cat-${s.id}`,class:"mx-3 text-sm text-gray-700"},n(s.name),9,We)]))),128)),V.value?(l(),i("button",{key:0,onClick:Z,class:"text-indigo-600 text-sm hover:underline"},n(p(d)("products.loadMore")),1)):f("",!0)],512),[[U,h.value.category]])]),t("div",Ge,[t("div",{onClick:e[4]||(e[4]=s=>S("rating")),class:"flex justify-between items-center cursor-pointer"},[t("span",Qe,n(p(d)("products.rating")),1),(l(),i("svg",{class:k([{"rotate-180":h.value.rating},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),v(t("div",Je,[v(t("input",{type:"range","onUpdate:modelValue":e[5]||(e[5]=s=>u.value.rate=s),min:"0",max:"5",step:"1",class:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"},null,512),[[B,u.value.rate,void 0,{number:!0}]]),e[14]||(e[14]=t("div",{class:"flex justify-between text-xs text-gray-500 mt-2"},[t("span",null,"0"),t("span",null,"1"),t("span",null,"2"),t("span",null,"3"),t("span",null,"4"),t("span",null,"5")],-1)),t("p",Ke,n(u.value.rate)+"+ "+n(p(d)("products.stars")),1)],512),[[U,h.value.rating]])]),t("div",null,[t("div",{onClick:e[6]||(e[6]=s=>S("price")),class:"flex justify-between items-center cursor-pointer"},[t("span",Oe,n(p(d)("products.price")),1),(l(),i("svg",{class:k([{"rotate-180":h.value.price},"w-5 h-5 transition-transform"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e[15]||(e[15]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),v(t("div",Xe,[v(t("input",{type:"number","onUpdate:modelValue":e[7]||(e[7]=s=>u.value.min_price=s),placeholder:p(d)("min_price"),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"},null,8,Ye),[[B,u.value.min_price,void 0,{number:!0}]]),e[16]||(e[16]=t("span",{class:"self-center"},"-",-1)),v(t("input",{type:"number","onUpdate:modelValue":e[8]||(e[8]=s=>u.value.max_price=s),placeholder:p(d)("max_price"),class:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500"},null,8,Ze),[[B,u.value.max_price,void 0,{number:!0}]])],512),[[U,h.value.price]])])])])]),t("div",et,[t("div",tt,[(l(!0),i(N,null,R(O.value,s=>(l(),i("div",{key:s.id,class:"group cursor-pointer",onClick:r=>ae(s)},[t("div",at,[t("div",ot,[s.is_best_seller?(l(),i("div",lt," Best Seller ")):f("",!0),t("img",{src:s.img,alt:s.name,class:"w-full h-full object-contain transition-transform duration-700 group-hover:scale-110",loading:"lazy"},null,8,it),e[18]||(e[18]=t("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),p(F).authenticatedweb?(l(),i("button",{key:1,onClick:Q(r=>se(s),["stop"]),class:k(["absolute top-3 right-3 z-20 p-2.5 bg-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300",{"text-red-500":s.is_wished}]),"aria-label":s.is_wished?"Remove from wishlist":"Add to wishlist"},e[17]||(e[17]=[t("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),10,nt)):f("",!0)]),t("div",rt,[t("h3",dt,n(X(s.name,50)),1),s.sub_name?(l(),i("p",ut,n(s.sub_name),1)):f("",!0),t("div",ct,[t("span",pt,n(s.total_rating||"0.0"),1),e[19]||(e[19]=t("svg",{class:"w-4 h-4 text-yellow-500 fill-current",viewBox:"0 0 24 24"},[t("path",{d:"M12 17.27l6.18 3.73-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73-1.64 7.03z"})],-1)),t("span",_t,"("+n(s.total_reviews||0)+")",1)]),t("div",gt,[t("div",vt,[t("span",mt,n(a.$t("currencyLabel"))+" "+n(T(s.final_price)),1),s.total_discounts_value>0?(l(),i("span",ht,n(a.$t("currencyLabel"))+" "+n(T(s.base_price)),1)):f("",!0)]),t("button",{onClick:Q(r=>te(s),["stop"]),disabled:s.is_stock===0,class:k(["p-3 rounded-full transition-all duration-300 shadow-md",[s.in_cart?"bg-[#0b3baa] text-white":s.is_stock===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#A6853B] text-white hover:bg-[#8f702c]"]])},[s.in_cart?(l(),i("svg",bt,e[20]||(e[20]=[t("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):(l(),i("svg",xt,e[21]||(e[21]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.708.707 1.708H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])))],10,ft)]),s.is_free_shipping?(l(),i("div",yt,[e[22]||(e[22]=t("i",{class:"pi pi-truck mr-1"},null,-1)),me(" "+n(a.$t("products.Free_Delivery")),1)])):f("",!0)])])],8,st))),128))]),t("div",wt,[pe(p(he),{rows:L.value,totalRecords:H.value,first:(w.value-1)*L.value,onPage:e[9]||(e[9]=s=>ee(s)),template:"PrevPageLink PageLinks NextPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])])])):f("",!0),!_.value&&!C.value&&!m.value?(l(),i("div",kt,[t("p",Ct,n(p(d)("products.pleaseSelectAvailability")),1)])):f("",!0)]))}},Pt=le(Lt,[["__scopeId","data-v-7114b37e"]]);export{Pt as default};
