import{_ as E,u as N,G as O,j,r as n,l as f,o as z,a0 as A,y as G,a as H,c as J,f as t,t as u,e as l,p as c,h as i,x as m,C as K,i as _,U as x,T as F,V as C,Q as P}from"./index-9c7fed1c.js";const W=["dir"],X={class:"text-3xl font-bold text-center mb-8 text-gray-800"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Z={class:"space-y-2"},ee={for:"belongs_to",class:"block text-sm font-medium text-gray-700"},ae={class:"space-y-2"},se={for:"model_id",class:"block text-sm font-medium text-gray-700"},te={class:"space-y-2"},le={for:"row_type",class:"block text-sm font-medium text-gray-700"},oe={class:"space-y-2"},re={for:"name_en",class:"block text-sm font-medium text-gray-700"},ne={class:"space-y-2"},ie={for:"name_ar",class:"block text-sm font-medium text-gray-700"},de={class:"pt-4 flex justify-center space-x-4"},ue={__name:"create",setup(ce){const U=N(),d=O(),{t:s}=j(),a=n({belongs_to:null,model_id:null,name_en:"",name_ar:"",row_type:null}),B=n([{label:"Store",value:"store"},{label:"Category",value:"category"},{label:"Market",value:"market"}]),D=n([{label:"Single Row",value:1},{label:"Double Rows",value:2}]),w=n([]),V=n([]),T=n([]),M=n([]),k=f(()=>localStorage.getItem("appLang")||"en"),I=f(()=>k.value==="en"?"name_en":"name_ar"),Q=f(()=>k.value==="ar"),p=n(!1),b=n(""),y=n(""),g=n(""),h=async()=>{try{const r=await _.get("/api/store",{params:{search:b.value||void 0}});w.value=r.data.data.data}catch{d.add({severity:"error",summary:s("error"),detail:s("error.storeLoad"),life:3e3})}},L=async()=>{try{const r=await _.get("/api/category",{params:{search:y.value||void 0}});V.value=r.data.data.data}catch{d.add({severity:"error",summary:s("error"),detail:s("error.categoryLoad"),life:3e3})}},S=async()=>{try{const r=await _.get("/api/market",{params:{search:g.value||void 0}});T.value=r.data.data.data}catch{d.add({severity:"error",summary:s("error"),detail:s("error.marketLoad"),life:3e3})}},R=r=>{const e=r.value;a.value.belongs_to==="store"?(b.value=e,h()):a.value.belongs_to==="category"?(y.value=e,L()):a.value.belongs_to==="market"&&(g.value=e,S())},$=()=>{a.value.model_id=null,a.value.type=null,M.value=[],b.value="",y.value="",g.value=""};z(()=>{h(),L(),S()});const q=async()=>{var e,v;if(["belongs_to","model_id","name_en","name_ar","row_type"].some(o=>!a.value[o])){d.add({severity:"error",summary:s("error"),detail:s("validation.requiredFields"),life:3e3});return}p.value=!0;try{await _.post("/api/custom-tabs",a.value),d.add({severity:"success",summary:s("success"),detail:s("customTabs.createSuccess"),life:3e3})}catch(o){d.add({severity:"error",summary:s("error"),detail:((v=(e=o.response)==null?void 0:e.data)==null?void 0:v.message)||s("error.createError"),life:3e3})}finally{p.value=!1}};return(r,e)=>{const v=A("can");return G((H(),J("div",{class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg",dir:Q.value?"rtl":"ltr"},[t("h1",X,u(l(s)("customTabs.createTitle")),1),t("form",{onSubmit:K(q,["prevent"]),class:"space-y-6"},[t("div",Y,[t("div",Z,[t("label",ee,[c(u(l(s)("customTabs.belongsTo"))+" ",1),e[6]||(e[6]=t("span",{class:"text-red-500"},"*",-1))]),i(l(x),{id:"belongs_to",modelValue:a.value.belongs_to,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.belongs_to=o),options:B.value,optionLabel:"label",optionValue:"value",class:m(["w-full",{"p-invalid":!a.value.belongs_to}]),onChange:$},null,8,["modelValue","options","class"])]),t("div",ae,[t("label",se,[c(u(l(s)("customTabs.modelId"))+" ",1),e[7]||(e[7]=t("span",{class:"text-red-500"},"*",-1))]),i(l(x),{id:"model_id",modelValue:a.value.model_id,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.model_id=o),options:a.value.belongs_to==="store"?w.value:a.value.belongs_to==="category"?V.value:T.value,optionLabel:I.value,optionValue:"id",class:m(["w-full",{"p-invalid":!a.value.model_id}]),disabled:!a.value.belongs_to,filter:"",onFilter:R},null,8,["modelValue","options","optionLabel","class","disabled"])]),t("div",te,[t("label",le,[c(u(l(s)("customTabs.rowType"))+" ",1),e[8]||(e[8]=t("span",{class:"text-red-500"},"*",-1))]),i(l(x),{id:"row_type",modelValue:a.value.row_type,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.row_type=o),options:D.value,optionLabel:"label",optionValue:"value",class:m(["w-full",{"p-invalid":!a.value.row_type}])},null,8,["modelValue","options","class"])]),t("div",oe,[t("label",re,[c(u(l(s)("customTabs.nameEn"))+" ",1),e[9]||(e[9]=t("span",{class:"text-red-500"},"*",-1))]),i(l(F),{id:"name_en",modelValue:a.value.name_en,"onUpdate:modelValue":e[3]||(e[3]=o=>a.value.name_en=o),class:m(["w-full",{"p-invalid":!a.value.name_en}])},null,8,["modelValue","class"])]),t("div",ne,[t("label",ie,[c(u(l(s)("customTabs.nameAr"))+" ",1),e[10]||(e[10]=t("span",{class:"text-red-500"},"*",-1))]),i(l(F),{id:"name_ar",modelValue:a.value.name_ar,"onUpdate:modelValue":e[4]||(e[4]=o=>a.value.name_ar=o),dir:"rtl",class:m(["w-full",{"p-invalid":!a.value.name_ar}])},null,8,["modelValue","class"])])]),t("div",de,[i(l(C),{type:"button",label:l(s)("customTabs.cancelButton"),icon:"pi pi-times",onClick:e[5]||(e[5]=o=>l(U).go(-1)),class:"p-button-outlined p-button-secondary text-sm mx-1",disabled:p.value},null,8,["label","disabled"]),i(l(C),{type:"submit",label:l(s)("customTabs.createButton"),icon:"pi pi-check",loading:p.value,class:"p-button-success text-sm"},null,8,["label","loading"])])],32),i(l(P))],8,W)),[[v,"create custom tabs"]])}}},pe=E(ue,[["__scopeId","data-v-04e25ce1"]]);export{pe as default};
