import{_ as O,l as S,a as L,u as q,r as m,c as M,o as N,a1 as R,e as d,h as u,B as z,g as t,t as n,j as s,v as p,i as g,G as c,A as D,w as G,F as W,b as C,U as j,V as H,W as B,k as J}from"./index-0f4f1a00.js";const K={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},Q={class:"text-3xl font-bold text-center mb-8 text-gray-800"},X={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y={class:"space-y-2"},Z={for:"name_en",class:"block text-sm font-medium text-gray-700"},ee={class:"space-y-2"},te={for:"name_ar",class:"block text-sm font-medium text-gray-700"},ae={class:"space-y-2"},se={for:"store_id",class:"block text-sm font-medium text-gray-700"},le={class:"space-y-2"},oe={for:"min_amount_order",class:"block text-sm font-medium text-gray-700"},re={class:"space-y-2"},ne={class:"block text-sm font-medium text-gray-700"},ie={class:"flex justify-center"},de={key:0,class:"p-4 w-full h-full"},ue={class:"relative group w-full h-full"},ce=["src","alt"],me={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},pe={key:1,class:"p-4 flex flex-col items-center justify-center"},ge={class:"text-sm text-center text-gray-600"},be={class:"text-blue-500 font-medium"},ve={class:"space-y-2"},fe={class:"block text-sm font-medium text-gray-700"},_e={class:"flex justify-center"},xe={key:0,class:"p-4 w-full h-full"},ye={class:"relative group w-full h-full"},ke=["src","alt"],he={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},we={key:1,class:"p-4 flex flex-col items-center justify-center"},De={class:"text-sm text-center text-gray-600"},je={class:"text-blue-500 font-medium"},Ve={class:"space-y-2 md:col-span-2"},$e={class:"block text-sm font-medium text-gray-700"},Te={class:"flex justify-center"},Ue={key:0,class:"p-4 w-full h-full"},Ae={class:"relative group w-full h-full"},Ce=["src","alt"],Be={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Pe={key:1,class:"p-4 flex flex-col items-center justify-center"},Ie={class:"text-sm text-center text-gray-600"},Ee={class:"text-blue-500 font-medium"},Fe={class:"pt-4 flex justify-center space-x-4"},Oe={key:0},Se={key:1,class:"pi pi-spinner pi-spin"},Le={__name:"create",setup(qe){const V=S(),$=L(),{t:l}=q(),b=m(!1),P=M(()=>localStorage.getItem("appLang")=="ar"?"name_ar":"name_en"),o=m({name_en:"",name_ar:"",store_id:null,min_amount_order:"",image:null,banner_one_image:null,banner_two_image:null}),y=m(null),k=m(null),h=m(null),T=m([]),f=m(!1),_=m(!1),x=m(!1),I=async()=>{try{const r=await C.get("/api/store");T.value=r.data.data.data}catch(r){console.error("Error fetching stores:",r)}},E=(r,e)=>{const i=new FileReader;i.onload=a=>{switch(e){case"image":o.value.image=r,y.value=a.target.result,f.value=!1;break;case"banner_one":o.value.banner_one_image=r,k.value=a.target.result,_.value=!1;break;case"banner_two":o.value.banner_two_image=r,h.value=a.target.result,x.value=!1;break}},i.readAsDataURL(r)},v=(r,e)=>{var a,U,A;const i=((a=r.target.files)==null?void 0:a[0])||((A=(U=r.dataTransfer)==null?void 0:U.files)==null?void 0:A[0]);i&&i.type.match("image.*")&&E(i,e)},w=r=>{switch(r){case"image":o.value.image=null,y.value=null;break;case"banner_one":o.value.banner_one_image=null,k.value=null;break;case"banner_two":o.value.banner_two_image=null,h.value=null;break}},F=async()=>{var e,i;b.value=!0;const r=new FormData;r.append("name_en",o.value.name_en),r.append("name_ar",o.value.name_ar),r.append("store_id",o.value.store_id||""),r.append("min_amount_order",o.value.min_amount_order||""),o.value.image&&r.append("image",o.value.image),o.value.banner_one_image&&r.append("banner_one_image",o.value.banner_one_image),o.value.banner_two_image&&r.append("banner_two_image",o.value.banner_two_image);try{const a=await C.post("/api/market",r);V.push({name:"markets"}),$.add({severity:"success",summary:l("success"),detail:l("market.createSuccess"),life:3e3})}catch(a){console.error("Error:",a),$.add({severity:"error",summary:l("error"),detail:((i=(e=a.response)==null?void 0:e.data)==null?void 0:i.message)||l("market.createError"),life:3e3})}finally{b.value=!1}};return N(()=>{I()}),(r,e)=>{const i=R("can");return d(),u(W,null,[z((d(),u("div",K,[t("h1",Q,n(s(l)("market.createTitle")),1),t("form",{onSubmit:c(F,["prevent"]),class:"space-y-6"},[t("div",X,[t("div",Y,[t("label",Z,[p(n(s(l)("market.nameEn"))+" ",1),e[20]||(e[20]=t("span",{class:"text-red-500"},"*",-1))]),g(s(j),{id:"name_en",modelValue:o.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.name_en=a),placeholder:s(l)("market.nameEnPlaceholder"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",ee,[t("label",te,[p(n(s(l)("market.nameAr"))+" ",1),e[21]||(e[21]=t("span",{class:"text-red-500"},"*",-1))]),g(s(j),{id:"name_ar",modelValue:o.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.name_ar=a),placeholder:s(l)("market.nameArPlaceholder"),dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",ae,[t("label",se,[p(n(s(l)("market.store"))+" ",1),e[22]||(e[22]=t("span",{class:"text-red-500"},"*",-1))]),g(s(H),{filter:"",modelValue:o.value.store_id,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.store_id=a),options:T.value,optionLabel:P.value,optionValue:"id",placeholder:s(l)("market.selectStore"),class:"w-full",required:""},null,8,["modelValue","options","optionLabel","placeholder"])]),t("div",le,[t("label",oe,[p(n(s(l)("market.minAmountOrder"))+" ",1),e[23]||(e[23]=t("span",{class:"text-red-500"},"*",-1))]),g(s(j),{id:"min_amount_order",modelValue:o.value.min_amount_order,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.min_amount_order=a),placeholder:s(l)("market.enterMinAmountOrder"),type:"number",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","placeholder"])]),t("div",re,[t("label",ne,n(s(l)("market.image")),1),t("div",ie,[t("label",{onDragover:e[6]||(e[6]=c(a=>f.value=!0,["prevent"])),onDragleave:e[7]||(e[7]=a=>f.value=!1),onDrop:e[8]||(e[8]=c(a=>v(a,"image"),["prevent"])),class:D([{"border-blue-500 bg-blue-50":f.value,"border-gray-300":!f.value},"cursor-pointer w-full h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[t("input",{type:"file",onChange:e[4]||(e[4]=a=>v(a,"image")),accept:"image/*",class:"hidden"},null,32),y.value?(d(),u("div",de,[t("div",ue,[t("img",{src:y.value,alt:s(l)("market.imagePreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,ce),t("div",me,[t("button",{type:"button",onClick:e[5]||(e[5]=c(a=>w("image"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[24]||(e[24]=[t("i",{class:"pi pi-trash text-sm"},null,-1)]))])])])):(d(),u("div",pe,[e[25]||(e[25]=t("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[t("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),t("p",ge,[t("span",be,n(s(l)("market.clickToUpload")),1),p(" "+n(s(l)("market.orDragAndDrop")),1)])]))],34)])]),t("div",ve,[t("label",fe,n(s(l)("market.bannerOne")),1),t("div",_e,[t("label",{onDragover:e[11]||(e[11]=c(a=>_.value=!0,["prevent"])),onDragleave:e[12]||(e[12]=a=>_.value=!1),onDrop:e[13]||(e[13]=c(a=>v(a,"banner_one"),["prevent"])),class:D([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"cursor-pointer w-full h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[t("input",{type:"file",onChange:e[9]||(e[9]=a=>v(a,"banner_one")),accept:"image/*",class:"hidden"},null,32),k.value?(d(),u("div",xe,[t("div",ye,[t("img",{src:k.value,alt:s(l)("market.bannerOnePreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,ke),t("div",he,[t("button",{type:"button",onClick:e[10]||(e[10]=c(a=>w("banner_one"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[26]||(e[26]=[t("i",{class:"pi pi-trash text-sm"},null,-1)]))])])])):(d(),u("div",we,[e[27]||(e[27]=t("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[t("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),t("p",De,[t("span",je,n(s(l)("market.clickToUpload")),1),p(" "+n(s(l)("market.orDragAndDrop")),1)])]))],34)])]),t("div",Ve,[t("label",$e,n(s(l)("market.bannerTwo")),1),t("div",Te,[t("label",{onDragover:e[16]||(e[16]=c(a=>x.value=!0,["prevent"])),onDragleave:e[17]||(e[17]=a=>x.value=!1),onDrop:e[18]||(e[18]=c(a=>v(a,"banner_two"),["prevent"])),class:D([{"border-blue-500 bg-blue-50":x.value,"border-gray-300":!x.value},"cursor-pointer w-full max-w-2xl h-48 rounded-xl border-2 border-dashed transition-colors duration-300 flex items-center justify-center"])},[t("input",{type:"file",onChange:e[14]||(e[14]=a=>v(a,"banner_two")),accept:"image/*",class:"hidden"},null,32),h.value?(d(),u("div",Ue,[t("div",Ae,[t("img",{src:h.value,alt:s(l)("market.bannerTwoPreview"),class:"w-full h-full object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Ce),t("div",Be,[t("button",{type:"button",onClick:e[15]||(e[15]=c(a=>w("banner_two"),["stop"])),class:"opacity-0 group-hover:opacity-100 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[28]||(e[28]=[t("i",{class:"pi pi-trash text-sm"},null,-1)]))])])])):(d(),u("div",Pe,[e[29]||(e[29]=t("div",{class:"bg-blue-100 p-3 rounded-full mb-2"},[t("i",{class:"pi pi-image text-blue-500 text-xl"})],-1)),t("p",Ie,[t("span",Ee,n(s(l)("market.clickToUpload")),1),p(" "+n(s(l)("market.orDragAndDrop")),1)])]))],34)])])]),t("div",Fe,[g(s(B),{type:"button",label:s(l)("cancel"),icon:"pi pi-times",onClick:e[19]||(e[19]=a=>s(V).go(-1)),class:"px-6 py-3 mx-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:b.value},null,8,["label","disabled"]),g(s(B),{type:"submit",label:s(l)("market.createButton"),icon:"pi pi-plus",loading:b.value,class:"px-8 mx-2 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:b.value},{default:G(()=>[b.value?(d(),u("i",Se)):(d(),u("span",Oe,n(s(l)("market.createButton")),1))]),_:1},8,["label","loading","disabled"])])],32)])),[[i,"create markets"]]),g(s(J))],64)}}},Ne=O(Le,[["__scopeId","data-v-90c81348"]]);export{Ne as default};
