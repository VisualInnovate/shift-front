import{l as se,a as oe,u as le,r as p,c as I,o as re,d as x,a1 as ne,B as ie,e as g,h as y,g as t,t as n,j as l,v as m,i,n as B,F as de,m as ue,G as T,A as ce,w as pe,b as w}from"./index-fb35586b.js";const me=["dir"],_e={class:"mb-8 text-3xl font-bold text-center text-gray-800"},be={class:"grid grid-cols-1 gap-6 md:grid-cols-2"},ve={class:"space-y-2"},ge={for:"store_id",class:"block text-sm font-medium text-gray-700"},ye={class:"space-y-2"},fe={for:"category_id",class:"block text-sm font-medium text-gray-700"},xe={class:"space-y-2"},Ve={for:"brand_id",class:"block text-sm font-medium text-gray-700"},he={class:"space-y-2"},ke={for:"name_en",class:"block text-sm font-medium text-gray-700"},we={class:"space-y-2"},Ue={for:"name_ar",class:"block text-sm font-medium text-gray-700"},De={class:"space-y-2"},Le={for:"sub_name_en",class:"block text-sm font-medium text-gray-700"},Ce={class:"space-y-2"},Fe={for:"sub_name_ar",class:"block text-sm font-medium text-gray-700"},Ie={class:"space-y-2 md:col-span-2"},Te={for:"description_en",class:"block text-sm font-medium text-gray-700"},Be={class:"space-y-2 md:col-span-2"},Ae={for:"description_ar",class:"block text-sm font-medium text-gray-700"},Ne={key:0,class:"space-y-2"},Se={for:"base_price",class:"block text-sm font-medium text-gray-700"},je={key:1,class:"space-y-2"},Ee={for:"cost_price",class:"block text-sm font-medium text-gray-700"},Re={class:"space-y-2"},qe={for:"tax",class:"block text-sm font-medium text-gray-700"},Pe={class:"space-y-2"},Me={for:"isDisplayed",class:"ml-2 text-sm font-medium text-gray-700"},ze={class:"space-y-2 md:col-span-2"},Ge={for:"hasVariants",class:"ml-2 text-sm font-medium text-gray-700"},Oe={key:2,class:"space-y-4 md:col-span-2"},$e={class:"block text-sm font-medium text-gray-700"},Je={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},He={class:"space-y-2"},Ke=["for"],Qe={class:"space-y-2"},We=["for"],Xe={class:"space-y-2"},Ye=["for"],Ze={class:"space-y-2"},et=["for"],tt={class:"space-y-2 md:col-span-2"},at={class:"block text-sm font-medium text-gray-700"},st={class:"flex justify-center"},ot={key:0,class:"p-4"},lt={class:"relative group"},rt=["src"],nt={class:"absolute inset-0 flex items-center justify-center transition-all duration-300 bg-black bg-opacity-0 rounded-lg group-hover:bg-opacity-30"},it={class:"space-x-3 transition-all duration-300 transform translate-y-4 opacity-0 group-hover:opacity-100 group-hover:translate-y-0"},dt=["title"],ut=["title"],ct={class:"mt-2 text-sm text-center text-gray-500"},pt={key:1,class:"flex flex-col items-center justify-center p-8"},mt={class:"mb-1 text-sm text-center text-gray-600"},_t={class:"font-medium text-blue-500"},bt={class:"text-xs text-gray-400"},vt={class:"flex justify-center pt-4 space-x-4"},gt={key:0},yt={key:1,class:"pi pi-spinner pi-spin"},Vt={__name:"create",setup(ft){const A=se(),u=oe(),{t:a}=le();p();const V=p(!1),U=p(null),D=p(null),h=p(!1),N=p([]),S=p([]),j=p([]),E=p([]),_=p(!1);p(!0);const L=I(()=>localStorage.getItem("appLang")||"en"),k=I(()=>L.value==="en"?"name_en":"name_ar"),P=I(()=>L.value==="ar"),s=p({store_id:null,category_id:null,brand_id:null,name_en:"",name_ar:"",sub_name_en:"",sub_name_ar:"",description_en:"",description_ar:"",base_price:null,cost_price:null,tax:null,is_displayed:!0,variants:[]}),M=I(()=>E.value.map(r=>({label:L.value==="en"?r.name_en:r.name_ar,items:r.values.map(e=>({id:e.id,[k.value]:L.value==="en"?e.value_en:e.value_ar}))}))),z=async()=>{try{const r=await w.get("/api/store");N.value=r.data.data.data}catch{u.add({severity:"error",summary:a("error"),detail:a("error.storeLoad"),life:3e3})}},G=async()=>{try{const r=await w.get("/api/category");S.value=r.data.data.data}catch{u.add({severity:"error",summary:a("error"),detail:a("error.categoryLoad"),life:3e3})}},O=async()=>{try{const r=await w.get("/api/brand");j.value=r.data.data.data}catch{u.add({severity:"error",summary:a("error"),detail:a("error.brandLoad"),life:3e3})}},$=async()=>{try{const r=await w.get("/api/product/create/data");E.value=r.data.data}catch{u.add({severity:"error",summary:a("error"),detail:a("error.attributeLoad"),life:3e3})}};re(()=>{z(),G(),O(),$()});const J=r=>{r.preventDefault(),h.value=!0},H=()=>{h.value=!1},K=r=>{if(r.size>2*1024*1024){u.add({severity:"error",summary:a("error"),detail:a("validation.imageSize"),life:3e3});return}if(!r.type.match("image.*")){u.add({severity:"error",summary:a("error"),detail:a("validation.imageInvalid"),life:3e3});return}U.value=r;const e=new FileReader;e.onload=b=>{D.value=b.target.result},e.readAsDataURL(r),h.value=!1},R=r=>{var b,c,d;const e=((b=r.target.files)==null?void 0:b[0])||((d=(c=r.dataTransfer)==null?void 0:c.files)==null?void 0:d[0]);e&&K(e)},Q=()=>{U.value=null,D.value=null},W=()=>{_.value=!_.value,_.value&&!s.value.variants.length?s.value.variants.push({sku_ar:"",sku_en:"",price:"",attribute_value_ids:[]}):_.value||(s.value.variants=[])},X=()=>{s.value.variants.push({sku_ar:"",sku_en:"",price:"",attribute_value_ids:[]})},Y=r=>{s.value.variants.length>1?s.value.variants.splice(r,1):u.add({severity:"warn",summary:a("error"),detail:a("validation.atLeastOneVariant"),life:3e3})},Z=async()=>{var b,c;if(["store_id","category_id","brand_id","name_en","name_ar"].some(d=>!s.value[d])){u.add({severity:"error",summary:a("error"),detail:a("validation.requiredFields"),life:3e3});return}if(_.value){if(s.value.variants.some(d=>!d.sku_en||!d.sku_ar||!d.price||!d.attribute_value_ids.length)){u.add({severity:"error",summary:a("error"),detail:a("validation.variantRequiredFields"),life:3e3});return}}else if(!s.value.base_price||!s.value.cost_price){u.add({severity:"error",summary:a("error"),detail:a("validation.baseAndCostPriceRequired"),life:3e3});return}V.value=!0;const e=new FormData;e.append("store_id",s.value.store_id),e.append("category_id",s.value.category_id),e.append("brand_id",s.value.brand_id),e.append("name_en",s.value.name_en),e.append("name_ar",s.value.name_ar),e.append("sub_name_en",s.value.sub_name_en||""),e.append("sub_name_ar",s.value.sub_name_ar||""),e.append("description_en",s.value.description_en||""),e.append("description_ar",s.value.description_ar||""),e.append("tax",s.value.tax||0),e.append("is_displayed",s.value.is_displayed?1:0),_.value?e.append("variants",JSON.stringify(s.value.variants)):(e.append("base_price",s.value.base_price),e.append("cost_price",s.value.cost_price)),U.value&&e.append("image",U.value);try{await w.post("/api/product",e),A.push({name:"product"}),u.add({severity:"success",summary:a("success"),detail:a("product.createSuccess"),life:3e3})}catch(d){u.add({severity:"error",summary:a("error"),detail:((c=(b=d.response)==null?void 0:b.data)==null?void 0:c.message)||a("error.createError"),life:3e3})}finally{V.value=!1}};return(r,e)=>{const b=x("Dropdown"),c=x("InputText"),d=x("Textarea"),C=x("InputNumber"),q=x("Checkbox"),ee=x("MultiSelect"),F=x("Button"),te=x("Toast"),ae=ne("can");return ie((g(),y("div",{class:"max-w-5xl p-6 mx-auto bg-white shadow-lg rounded-xl",dir:P.value?"rtl":"ltr"},[t("h1",_e,n(l(a)("product.createTitle")),1),t("form",{onSubmit:T(Z,["prevent"]),class:"space-y-6"},[t("div",be,[t("div",ve,[t("label",ge,[m(n(l(a)("product.store"))+" ",1),e[15]||(e[15]=t("span",{class:"text-red-500"},"*",-1))]),i(b,{id:"store_id",modelValue:s.value.store_id,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.store_id=o),options:N.value,optionLabel:k.value,optionValue:"id",class:"w-full"},null,8,["modelValue","options","optionLabel"])]),t("div",ye,[t("label",fe,[m(n(l(a)("product.category"))+" ",1),e[16]||(e[16]=t("span",{class:"text-red-500"},"*",-1))]),i(b,{id:"category_id",modelValue:s.value.category_id,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.category_id=o),options:S.value,optionLabel:k.value,optionValue:"id",class:"w-full"},null,8,["modelValue","options","optionLabel"])]),t("div",xe,[t("label",Ve,[m(n(l(a)("product.brand"))+" ",1),e[17]||(e[17]=t("span",{class:"text-red-500"},"*",-1))]),i(b,{id:"brand_id",modelValue:s.value.brand_id,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.brand_id=o),options:j.value,optionLabel:k.value,optionValue:"id",class:"w-full"},null,8,["modelValue","options","optionLabel"])]),t("div",he,[t("label",ke,[m(n(l(a)("product.nameEn"))+" ",1),e[18]||(e[18]=t("span",{class:"text-red-500"},"*",-1))]),i(c,{id:"name_en",modelValue:s.value.name_en,"onUpdate:modelValue":e[3]||(e[3]=o=>s.value.name_en=o),class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"])]),t("div",we,[t("label",Ue,[m(n(l(a)("product.nameAr"))+" ",1),e[19]||(e[19]=t("span",{class:"text-red-500"},"*",-1))]),i(c,{id:"name_ar",modelValue:s.value.name_ar,"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.name_ar=o),dir:"rtl",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"])]),t("div",De,[t("label",Le,n(l(a)("product.subNameEn")),1),i(c,{id:"sub_name_en",modelValue:s.value.sub_name_en,"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.sub_name_en=o),class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"])]),t("div",Ce,[t("label",Fe,n(l(a)("product.subNameAr")),1),i(c,{id:"sub_name_ar",modelValue:s.value.sub_name_ar,"onUpdate:modelValue":e[6]||(e[6]=o=>s.value.sub_name_ar=o),dir:"rtl",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"])]),t("div",Ie,[t("label",Te,n(l(a)("product.descriptionEn")),1),i(d,{id:"description_en",modelValue:s.value.description_en,"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.description_en=o),rows:"4",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"])]),t("div",Be,[t("label",Ae,n(l(a)("product.descriptionAr")),1),i(d,{id:"description_ar",modelValue:s.value.description_ar,"onUpdate:modelValue":e[8]||(e[8]=o=>s.value.description_ar=o),rows:"4",dir:"rtl",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"])]),_.value?B("",!0):(g(),y("div",Ne,[t("label",Se,[m(n(l(a)("product.basePrice"))+" ",1),e[20]||(e[20]=t("span",{class:"text-red-500"},"*",-1))]),i(C,{id:"base_price",modelValue:s.value.base_price,"onUpdate:modelValue":e[9]||(e[9]=o=>s.value.base_price=o),mode:"decimal",minFractionDigits:2,class:"w-full"},null,8,["modelValue"])])),_.value?B("",!0):(g(),y("div",je,[t("label",Ee,[m(n(l(a)("product.costPrice"))+" ",1),e[21]||(e[21]=t("span",{class:"text-red-500"},"*",-1))]),i(C,{id:"cost_price",modelValue:s.value.cost_price,"onUpdate:modelValue":e[10]||(e[10]=o=>s.value.cost_price=o),mode:"decimal",minFractionDigits:2,class:"w-full"},null,8,["modelValue"])])),t("div",Re,[t("label",qe,n(l(a)("product.tax")),1),i(C,{id:"tax",modelValue:s.value.tax,"onUpdate:modelValue":e[11]||(e[11]=o=>s.value.tax=o),mode:"decimal",minFractionDigits:2,class:"w-full"},null,8,["modelValue"])]),t("div",Pe,[i(q,{modelValue:s.value.is_displayed,"onUpdate:modelValue":e[12]||(e[12]=o=>s.value.is_displayed=o),inputId:"isDisplayed",binary:!0},null,8,["modelValue"]),t("label",Me,n(l(a)("product.isDisplayed")),1)]),t("div",ze,[i(q,{modelValue:_.value,"onUpdate:modelValue":e[13]||(e[13]=o=>_.value=o),inputId:"hasVariants",binary:!0,onClick:W},null,8,["modelValue"]),t("label",Ge,n(l(a)("product.hasVariants")),1)]),_.value?(g(),y("div",Oe,[t("label",$e,n(l(a)("product.variants")),1),(g(!0),y(de,null,ue(s.value.variants,(o,v)=>(g(),y("div",{key:v,class:"p-4 space-y-4 border rounded-lg"},[t("div",Je,[t("div",He,[t("label",{for:"sku_en_"+v,class:"block text-sm font-medium text-gray-700"},[m(n(l(a)("product.skuEn"))+" ",1),e[22]||(e[22]=t("span",{class:"text-red-500"},"*",-1))],8,Ke),i(c,{id:"sku_en_"+v,modelValue:o.sku_en,"onUpdate:modelValue":f=>o.sku_en=f,class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["id","modelValue","onUpdate:modelValue"])]),t("div",Qe,[t("label",{for:"sku_ar_"+v,class:"block text-sm font-medium text-gray-700"},[m(n(l(a)("product.skuAr"))+" ",1),e[23]||(e[23]=t("span",{class:"text-red-500"},"*",-1))],8,We),i(c,{id:"sku_ar_"+v,modelValue:o.sku_ar,"onUpdate:modelValue":f=>o.sku_ar=f,dir:"rtl",class:"w-full px-4 py-2 transition border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["id","modelValue","onUpdate:modelValue"])]),t("div",Xe,[t("label",{for:"price_"+v,class:"block text-sm font-medium text-gray-700"},[m(n(l(a)("product.price"))+" ",1),e[24]||(e[24]=t("span",{class:"text-red-500"},"*",-1))],8,Ye),i(C,{id:"price_"+v,modelValue:o.price,"onUpdate:modelValue":f=>o.price=f,mode:"decimal",minFractionDigits:2,class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue"])]),t("div",Ze,[t("label",{for:"attributes_"+v,class:"block text-sm font-medium text-gray-700"},[m(n(l(a)("product.attributes"))+" ",1),e[25]||(e[25]=t("span",{class:"text-red-500"},"*",-1))],8,et),i(ee,{id:"attributes_"+v,modelValue:o.attribute_value_ids,"onUpdate:modelValue":f=>o.attribute_value_ids=f,options:M.value,optionGroupLabel:"label",optionGroupChildren:"items",optionLabel:k.value,optionValue:"id",class:"w-full"},null,8,["id","modelValue","onUpdate:modelValue","options","optionLabel"])])]),i(F,{type:"button",icon:"pi pi-trash",class:"p-button-danger",onClick:f=>Y(v),disabled:s.value.variants.length===1},null,8,["onClick","disabled"])]))),128)),i(F,{type:"button",label:l(a)("product.addVariant"),icon:"pi pi-plus",class:"p-button-secondary",onClick:X},null,8,["label"])])):B("",!0),t("div",tt,[t("label",at,n(l(a)("product.image")),1),t("div",st,[t("label",{onDragover:T(J,["prevent"]),onDragleave:H,onDrop:T(R,["prevent"]),class:ce([{"border-blue-500 bg-blue-50":h.value,"border-gray-300":!h.value},"w-full max-w-md transition-colors duration-300 border-2 border-dashed cursor-pointer rounded-xl"])},[t("input",{type:"file",onChange:R,accept:"image/*",class:"hidden"},null,32),D.value?(g(),y("div",ot,[t("div",lt,[t("img",{src:D.value,alt:"Preview",class:"object-contain w-full h-64 transition-transform duration-300 rounded-lg shadow-md group-hover:scale-105"},null,8,rt),t("div",nt,[t("div",it,[t("button",{type:"button",onClick:T(Q,["stop"]),class:"p-2 text-white transition bg-red-500 rounded-full hover:bg-red-600",title:l(a)("product.deleteImage")},e[26]||(e[26]=[t("i",{class:"text-sm pi pi-trash"},null,-1)]),8,dt),t("button",{type:"button",class:"p-2 text-gray-700 transition bg-white rounded-full hover:bg-gray-100",title:l(a)("product.editImage")},e[27]||(e[27]=[t("i",{class:"text-sm pi pi-pencil"},null,-1)]),8,ut)])])]),t("p",ct,n(l(a)("product.changeImage")),1)])):(g(),y("div",pt,[e[28]||(e[28]=t("div",{class:"p-4 mb-4 bg-blue-100 rounded-full"},[t("i",{class:"text-2xl text-blue-500 pi pi-image"})],-1)),t("p",mt,[t("span",_t,n(l(a)("product.uploadClick")),1),m(" "+n(l(a)("product.uploadDrag")),1)]),t("p",bt,n(l(a)("product.imageFormat")),1)]))],34)])])]),t("div",vt,[i(F,{type:"button",label:l(a)("product.cancelButton"),icon:"pi pi-times",onClick:e[14]||(e[14]=o=>l(A).go(-1)),class:"flex items-center justify-center px-6 py-3 mx-2 space-x-2 text-gray-700 transition-all duration-300 bg-gray-200 rounded-lg shadow-md hover:bg-gray-300 hover:shadow-lg",disabled:V.value},null,8,["label","disabled"]),i(F,{type:"submit",label:l(a)("product.createButton"),icon:"pi pi-plus",loading:V.value,class:"flex items-center justify-center px-8 py-3 mx-2 space-x-2 text-white transition-all duration-300 rounded-lg shadow-md bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 hover:shadow-lg",disabled:V.value},{default:pe(()=>[V.value?(g(),y("i",yt)):(g(),y("span",gt,n(l(a)("product.createButton")),1))]),_:1},8,["label","loading","disabled"])])],32),i(te)],8,me)),[[ae,"create products"]])}}};export{Vt as default};
