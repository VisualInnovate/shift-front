import{_ as j,u as z,G as A,j as G,r as n,l as w,o as P,a0 as H,y as J,a as K,c as W,f as s,t as u,e as o,p as c,h as i,x as m,C as X,i as p,U as _,T as C,V as M,Q as Y}from"./index-bdc85e85.js";const Z=["dir"],ee={class:"text-3xl font-bold text-center mb-8 text-gray-800"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={class:"space-y-2"},se={for:"belongs_to",class:"block text-sm font-medium text-gray-700"},le={class:"space-y-2"},oe={for:"type",class:"block text-sm font-medium text-gray-700"},re={class:"space-y-2"},ne={for:"model_id",class:"block text-sm font-medium text-gray-700"},ie={class:"space-y-2"},de={for:"row_type",class:"block text-sm font-medium text-gray-700"},ue={class:"space-y-2"},ce={for:"name_en",class:"block text-sm font-medium text-gray-700"},me={class:"space-y-2"},pe={for:"name_ar",class:"block text-sm font-medium text-gray-700"},ve={class:"pt-4 flex justify-center space-x-4"},ye={__name:"create",setup(be){const U=z(),d=A(),{t}=G(),a=n({belongs_to:null,model_id:null,name_en:"",name_ar:"",type:null,row_type:null}),B=n([{label:"Store",value:"store"},{label:"Category",value:"category"},{label:"Market",value:"market"}]),O=n([{label:"Categories",value:1},{label:"Products",value:2},{label:"Brand",value:3}]),D=n([{label:"Single Row",value:1},{label:"Double Rows",value:2}]),V=n([]),T=n([]),k=n([]),v=n([]),h=w(()=>localStorage.getItem("appLang")||"en"),I=w(()=>h.value==="en"?"name_en":"name_ar"),Q=w(()=>h.value==="ar"),y=n(!1),f=n(""),g=n(""),x=n(""),L=async()=>{try{const l=await p.get("/api/store",{params:{search:f.value||void 0}});V.value=l.data.data.data}catch{d.add({severity:"error",summary:t("error"),detail:t("error.storeLoad"),life:3e3})}},S=async()=>{try{const l=await p.get("/api/category",{params:{search:g.value||void 0}});T.value=l.data.data.data}catch{d.add({severity:"error",summary:t("error"),detail:t("error.categoryLoad"),life:3e3})}},F=async()=>{try{const l=await p.get("/api/market",{params:{search:x.value||void 0}});k.value=l.data.data.data}catch{d.add({severity:"error",summary:t("error"),detail:t("error.marketLoad"),life:3e3})}},R=async()=>{try{let l="";if(a.value.type===1?l="/api/category":a.value.type===2?l="/api/product":a.value.type===3&&(l="/api/brand"),l){const e=await p.get(l);v.value=e.data.data.data}else v.value=[]}catch{d.add({severity:"error",summary:t("error"),detail:t("error.modelLoad"),life:3e3})}},$=l=>{const e=l.value;a.value.belongs_to==="store"?(f.value=e,L()):a.value.belongs_to==="category"?(g.value=e,S()):a.value.belongs_to==="market"&&(x.value=e,F())},q=()=>{a.value.model_id=null,a.value.type=null,v.value=[],f.value="",g.value="",x.value=""},E=async()=>{a.value.type?await R():(v.value=[],a.value.model_id=null)};P(()=>{L(),S(),F()});const N=async()=>{var e,b;if(["belongs_to","model_id","name_en","name_ar","type","row_type"].some(r=>!a.value[r])){d.add({severity:"error",summary:t("error"),detail:t("validation.requiredFields"),life:3e3});return}y.value=!0;try{await p.post("/api/custom-tabs",a.value),d.add({severity:"success",summary:t("success"),detail:t("customTabs.createSuccess"),life:3e3})}catch(r){d.add({severity:"error",summary:t("error"),detail:((b=(e=r.response)==null?void 0:e.data)==null?void 0:b.message)||t("error.createError"),life:3e3})}finally{y.value=!1}};return(l,e)=>{const b=H("can");return J((K(),W("div",{class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg",dir:Q.value?"rtl":"ltr"},[s("h1",ee,u(o(t)("customTabs.createTitle")),1),s("form",{onSubmit:X(N,["prevent"]),class:"space-y-6"},[s("div",ae,[s("div",te,[s("label",se,[c(u(o(t)("customTabs.belongsTo"))+" ",1),e[7]||(e[7]=s("span",{class:"text-red-500"},"*",-1))]),i(o(_),{id:"belongs_to",modelValue:a.value.belongs_to,"onUpdate:modelValue":e[0]||(e[0]=r=>a.value.belongs_to=r),options:B.value,optionLabel:"label",optionValue:"value",class:m(["w-full",{"p-invalid":!a.value.belongs_to}]),onChange:q},null,8,["modelValue","options","class"])]),s("div",le,[s("label",oe,[c(u(o(t)("customTabs.type"))+" ",1),e[8]||(e[8]=s("span",{class:"text-red-500"},"*",-1))]),i(o(_),{id:"type",modelValue:a.value.type,"onUpdate:modelValue":e[1]||(e[1]=r=>a.value.type=r),options:O.value,optionLabel:"label",optionValue:"value",class:m(["w-full",{"p-invalid":!a.value.type}]),onChange:E},null,8,["modelValue","options","class"])]),s("div",re,[s("label",ne,[c(u(o(t)("customTabs.modelId"))+" ",1),e[9]||(e[9]=s("span",{class:"text-red-500"},"*",-1))]),i(o(_),{id:"model_id",modelValue:a.value.model_id,"onUpdate:modelValue":e[2]||(e[2]=r=>a.value.model_id=r),options:a.value.belongs_to==="store"?V.value:a.value.belongs_to==="category"?T.value:k.value,optionLabel:I.value,optionValue:"id",class:m(["w-full",{"p-invalid":!a.value.model_id}]),disabled:!a.value.belongs_to,filter:"",onFilter:$},null,8,["modelValue","options","optionLabel","class","disabled"])]),s("div",ie,[s("label",de,[c(u(o(t)("customTabs.rowType"))+" ",1),e[10]||(e[10]=s("span",{class:"text-red-500"},"*",-1))]),i(o(_),{id:"row_type",modelValue:a.value.row_type,"onUpdate:modelValue":e[3]||(e[3]=r=>a.value.row_type=r),options:D.value,optionLabel:"label",optionValue:"value",class:m(["w-full",{"p-invalid":!a.value.row_type}])},null,8,["modelValue","options","class"])]),s("div",ue,[s("label",ce,[c(u(o(t)("customTabs.nameEn"))+" ",1),e[11]||(e[11]=s("span",{class:"text-red-500"},"*",-1))]),i(o(C),{id:"name_en",modelValue:a.value.name_en,"onUpdate:modelValue":e[4]||(e[4]=r=>a.value.name_en=r),class:m(["w-full",{"p-invalid":!a.value.name_en}])},null,8,["modelValue","class"])]),s("div",me,[s("label",pe,[c(u(o(t)("customTabs.nameAr"))+" ",1),e[12]||(e[12]=s("span",{class:"text-red-500"},"*",-1))]),i(o(C),{id:"name_ar",modelValue:a.value.name_ar,"onUpdate:modelValue":e[5]||(e[5]=r=>a.value.name_ar=r),dir:"rtl",class:m(["w-full",{"p-invalid":!a.value.name_ar}])},null,8,["modelValue","class"])])]),s("div",ve,[i(o(M),{type:"button",label:o(t)("customTabs.cancelButton"),icon:"pi pi-times",onClick:e[6]||(e[6]=r=>o(U).go(-1)),class:"p-button-outlined p-button-secondary text-sm mx-1",disabled:y.value},null,8,["label","disabled"]),i(o(M),{type:"submit",label:o(t)("customTabs.createButton"),icon:"pi pi-check",loading:y.value,class:"p-button-success text-sm"},null,8,["label","loading"])])],32),i(o(Y))],8,Z)),[[b,"create custom tabs"]])}}},fe=j(ye,[["__scopeId","data-v-e9420c13"]]);export{fe as default};
