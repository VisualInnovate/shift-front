import{_ as N,r as f,l as z,a as D,u as M,c as j,o as C,a1 as A,e as v,h as p,B as g,g as l,t as r,v as u,i as o,j as i,E as B,w as h,G as L,F as O,b as x,V,U as _,aj as y,W as I,k as T}from"./index-df093464.js";import{x as E,A as J,O as S}from"./index.es-ad5f2996.js";const W={class:"max-w-3xl mx-auto p-6 bg-white rounded-xl shadow-lg"},G={class:"text-3xl font-bold text-center mb-8 text-gray-800"},K={class:"grid grid-cols-1 gap-6 lg:grid-cols-2"},R={class:"space-y-2"},Z={for:"user_id",class:"block text-sm font-medium text-gray-700"},H={class:"space-y-2"},P={for:"address_line_1",class:"block text-sm font-medium text-gray-700"},Q={class:"space-y-2"},X={for:"address_line_2",class:"block text-sm font-medium text-gray-700"},Y={class:"space-y-2"},ee={for:"governorate",class:"block text-sm font-medium text-gray-700"},ae={class:"space-y-2"},le={for:"city",class:"block text-sm font-medium text-gray-700"},se={class:"space-y-2"},te={for:"zip_code",class:"block text-sm font-medium text-gray-700"},de={class:"space-y-2"},re={for:"lat",class:"block text-sm font-medium text-gray-700"},oe={class:"space-y-2"},ie={for:"long",class:"block text-sm font-medium text-gray-700"},ne={class:"space-y-2"},ue={for:"distance",class:"block text-sm font-medium text-gray-700"},ce={class:"flex items-center space-y-2 col-span-1 lg:col-span-2"},me={class:"ml-2 text-sm font-medium text-gray-700"},ve={class:"mt-8"},pe={class:"text-xl font-semibold text-gray-800 mb-4"},_e={class:"pt-6 flex justify-center"},fe={key:0},ye={key:1,class:"pi pi-spinner pi-spin"},be={__name:"create",setup(ge){const b=f([]),$=z(),n=D(),{t}=M(),m=f(!1),k=[{label:"عمان (Amman)",value:"amman"},{label:"البلقاء (Balqa)",value:"balqa"},{label:"الزرقاء (Zarqa)",value:"zarqa"},{label:"مادبا (Madaba)",value:"madaba"},{label:"إربد (Irbid)",value:"irbid"},{label:"جرش (Jerash)",value:"jerash"},{label:"عجلون (Ajloun)",value:"ajloun"},{label:"المفرق (Mafraq)",value:"mafraq"},{label:"الكرك (Karak)",value:"karak"},{label:"الطفيلة (Tafila)",value:"tafila"},{label:"معان (Ma'an)",value:"maan"},{label:"العقبة (Aqaba)",value:"aqaba"}],e=f({user_id:null,address_line_1:"",address_line_2:"",governorate:"",city:"",country:"Jordan",zip_code:"",is_default:!1,lat:31.984983325941823,long:35.900908045672196,distance:1e3}),w=j(()=>{const s=Number(e.value.distance)||1e3;return{center:{lat:Number(e.value.lat),lng:Number(e.value.long)},radius:s,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}}),q=()=>{x.get("api/user").then(s=>{b.value=s.data.data.data}).catch(s=>{n.add({severity:"error",summary:t("error"),detail:t("address.failed_to_load_users"),life:3e3})})};function U(s){const a=s.latLng;e.value.lat=a.lat(),e.value.long=a.lng()}const F=async()=>{var s,a;m.value=!0;try{if(!e.value.user_id){n.add({severity:"error",summary:t("validation_error"),detail:t("address.user_required"),life:3e3});return}if(!e.value.address_line_1){n.add({severity:"error",summary:t("validation_error"),detail:t("address.line1_required"),life:3e3});return}if(!e.value.governorate){n.add({severity:"error",summary:t("validation_error"),detail:t("address.governorate_required"),life:3e3});return}if(!e.value.city){n.add({severity:"error",summary:t("validation_error"),detail:t("address.city_required"),life:3e3});return}if(!e.value.country){n.add({severity:"error",summary:t("validation_error"),detail:t("address.country_required"),life:3e3});return}if(e.value.lat<-90||e.value.lat>90){n.add({severity:"error",summary:t("validation_error"),detail:t("address.invalid_lat"),life:3e3});return}if(e.value.long<-180||e.value.long>180){n.add({severity:"error",summary:t("validation_error"),detail:t("address.invalid_long"),life:3e3});return}if(e.value.distance<=0){n.add({severity:"error",summary:t("validation_error"),detail:t("address.invalid_distance"),life:3e3});return}const c={...e.value,is_default:e.value.is_default?"1":"0"};await x.post("/api/address",c),$.push({name:"address"}),n.add({severity:"success",summary:t("success"),detail:t("address.created_successfully"),life:3e3})}catch(c){n.add({severity:"error",summary:t("error"),detail:((a=(s=c.response)==null?void 0:s.data)==null?void 0:a.message)||t("address.failed_to_create"),life:3e3})}finally{m.value=!1}};return C(()=>{q()}),(s,a)=>{const c=A("can");return v(),p(O,null,[g((v(),p("div",W,[l("h1",G,r(s.$t("address.create_new_address")),1),l("form",{onSubmit:L(F,["prevent"]),class:"space-y-6"},[l("div",K,[l("div",R,[l("label",Z,[u(r(s.$t("user.name"))+" ",1),a[10]||(a[10]=l("span",{class:"text-red-500"},"*",-1))]),o(i(V),{filter:"",modelValue:e.value.user_id,"onUpdate:modelValue":a[0]||(a[0]=d=>e.value.user_id=d),options:b.value,optionLabel:"name",optionValue:"id",placeholder:s.$t("user.select_user"),class:"w-full",required:""},null,8,["modelValue","options","placeholder"])]),l("div",H,[l("label",P,[u(r(s.$t("address.line1"))+" ",1),a[11]||(a[11]=l("span",{class:"text-red-500"},"*",-1))]),o(i(_),{id:"address_line_1",modelValue:e.value.address_line_1,"onUpdate:modelValue":a[1]||(a[1]=d=>e.value.address_line_1=d),placeholder:s.$t("address.enter_line1"),class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",Q,[l("label",X,r(s.$t("address.line2")),1),o(i(_),{id:"address_line_2",modelValue:e.value.address_line_2,"onUpdate:modelValue":a[2]||(a[2]=d=>e.value.address_line_2=d),placeholder:s.$t("address.enter_line2"),class:"w-full"},null,8,["modelValue","placeholder"])]),l("div",Y,[l("label",ee,[u(r(s.$t("address.governorate"))+" ",1),a[12]||(a[12]=l("span",{class:"text-red-500"},"*",-1))]),o(i(V),{modelValue:e.value.governorate,"onUpdate:modelValue":a[3]||(a[3]=d=>e.value.governorate=d),options:k,optionLabel:"label",optionValue:"value",placeholder:s.$t("address.select_governorate"),class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",ae,[l("label",le,[u(r(s.$t("address.city"))+" ",1),a[13]||(a[13]=l("span",{class:"text-red-500"},"*",-1))]),o(i(_),{id:"city",modelValue:e.value.city,"onUpdate:modelValue":a[4]||(a[4]=d=>e.value.city=d),placeholder:s.$t("address.enter_city"),class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",se,[l("label",te,r(s.$t("address.zip_code")),1),o(i(_),{id:"zip_code",modelValue:e.value.zip_code,"onUpdate:modelValue":a[5]||(a[5]=d=>e.value.zip_code=d),placeholder:s.$t("address.enter_zip_code"),class:"w-full"},null,8,["modelValue","placeholder"])]),l("div",de,[l("label",re,[u(r(s.$t("address.lat"))+" ",1),a[14]||(a[14]=l("span",{class:"text-red-500"},"*",-1))]),o(i(y),{id:"lat",modelValue:e.value.lat,"onUpdate:modelValue":a[6]||(a[6]=d=>e.value.lat=d),min:-90,max:90,step:1e-6,mode:"decimal",minFractionDigits:6,maxFractionDigits:6,class:"w-full",required:""},null,8,["modelValue"])]),l("div",oe,[l("label",ie,[u(r(s.$t("address.long"))+" ",1),a[15]||(a[15]=l("span",{class:"text-red-500"},"*",-1))]),o(i(y),{id:"long",modelValue:e.value.long,"onUpdate:modelValue":a[7]||(a[7]=d=>e.value.long=d),min:-180,max:180,step:1e-6,mode:"decimal",minFractionDigits:6,maxFractionDigits:6,class:"w-full",required:""},null,8,["modelValue"])]),l("div",ne,[l("label",ue,[u(r(s.$t("address.distance"))+" ("+r(s.$t("address.meters"))+") ",1),a[16]||(a[16]=l("span",{class:"text-red-500"},"*",-1))]),o(i(y),{id:"distance",modelValue:e.value.distance,"onUpdate:modelValue":a[8]||(a[8]=d=>e.value.distance=d),min:1,placeholder:s.$t("address.enter_distance"),class:"w-full",required:""},null,8,["modelValue","placeholder"])]),l("div",ce,[g(l("input",{type:"checkbox","onUpdate:modelValue":a[9]||(a[9]=d=>e.value.is_default=d),class:"w-5 h-5 text-blue-600"},null,512),[[B,e.value.is_default]]),l("label",me,r(s.$t("address.set_as_default")),1)])]),l("div",ve,[l("h2",pe,r(s.$t("address.select_location")),1),o(i(S),{onClick:U,style:{width:"100%",height:"500px"},center:{lat:Number(e.value.lat),lng:Number(e.value.long)},zoom:14},{default:h(()=>[o(i(E),{options:{position:{lat:Number(e.value.lat),lng:Number(e.value.long)}}},null,8,["options"]),o(i(J),{options:w.value},null,8,["options"])]),_:1},8,["center"])]),l("div",_e,[o(i(I),{type:"submit",label:s.$t("address.create_address"),icon:"pi pi-plus",loading:m.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300"},{default:h(()=>[m.value?(v(),p("i",ye)):(v(),p("span",fe,r(s.$t("address.create_address")),1))]),_:1},8,["label","loading"])])],32)])),[[c,"create address"]]),o(i(T))],64)}}},Ve=N(be,[["__scopeId","data-v-bd6c48d0"]]);export{Ve as default};
