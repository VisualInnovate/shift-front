import{_ as N,a as V,s as P,u as q,p as H,r as d,o as D,L as M,B,c as n,d as r,f as t,t as u,h as _,F as T,k as z,j as S,x as W,e as $,J as A,m as I}from"./index-df21bae4.js";const J={class:"mx-auto px-4 max-w-[1500px] pb-20"},U={key:0,class:"flex flex-col justify-center items-center py-32"},G={class:"mt-4 text-gray-600 font-medium"},K={key:1,class:"text-center py-32 animate-fade-in"},O={class:"bg-red-50 inline-block p-8 rounded-2xl border border-red-100"},Q={class:"text-xl font-semibold text-red-600 mb-6"},X={key:2,class:"animate-fade-in"},Y={class:"font-bold text-gray-800 lg:mt-12 mt-6 text-center text-2xl sm:text-3xl md:text-4xl mb-10"},Z=["onClick"],ee={class:"w-full overflow-hidden rounded-2xl shadow-sm hover:shadow-xl transition-all duration-500 relative bg-white aspect-square border border-gray-100"},te=["src","alt"],ae={class:"mt-4 text-center px-2 text-gray-900 font-semibold text-base md:text-lg line-clamp-2 group-hover:text-indigo-600 transition-colors"},oe={key:1,class:"text-center py-20 bg-gray-50 rounded-3xl"},se={class:"mt-4 text-gray-500 text-lg"},ne={key:2,class:"mt-10 flex justify-center"},re={__name:"customtap-brand",props:{title:{type:String,default:""}},setup(R){const{t:c,locale:j}=V(),h=P(()=>j.value),w=q(),i=H(),b=d([]),y=d(!0),x=d(null),f=d(0),m=d(parseInt(i.query.page)||1),k=d(typeof window<"u"?window.innerWidth:1200),C=()=>{k.value=window.innerWidth},p=P(()=>k.value<768?8:15),g=async(a,e=1)=>{if(a){y.value=!0,x.value=null;try{const o=(await S.get(`/api/home/get-custom-tab-details/${a}`,{params:{limit:p.value,page:e}})).data.data,v=o.details||{data:[],total:0,current_page:1};b.value=[{id:a,name_ar:o.name_ar||c("home.customTabTitle",{number:a}),name_en:o.name_en||c("home.customTabTitle",{number:a}),type:o.type,row_type:o.type===1?1:2,details:(v.data||[]).map(l=>({id:l.id,name_ar:l.name_ar,name_en:l.name_en,has_subcategories:l.has_subcategories,media:l.media||[]}))}],f.value=v.total,m.value=v.current_page,w.replace({query:{...i.query,page:e>1?e:void 0}}).catch(()=>{})}catch(s){console.error("Fetch Error:",s),x.value=c("error.fetchFailed")||"Failed to load custom content."}finally{y.value=!1}}},E=a=>{const e=a.page+1;m.value=e,g(i.params.id,e),window.scrollTo({top:0,behavior:"smooth"})},F=a=>{w.push({name:"products-brand",params:{id:a}})};return D(()=>{window.addEventListener("resize",C),g(i.params.id,m.value)}),M(()=>{window.removeEventListener("resize",C)}),B(()=>i.params.id,a=>{a&&(m.value=1,g(a,1))}),B(p,()=>{g(i.params.id,1)}),(a,e)=>(n(),r("div",J,[y.value?(n(),r("div",U,[e[2]||(e[2]=t("svg",{class:"animate-spin h-12 w-12 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),t("p",G,u(_(c)("common.loading")||"Loading..."),1)])):x.value?(n(),r("div",K,[t("div",O,[t("p",Q,u(x.value),1),t("button",{onClick:e[0]||(e[0]=s=>g(_(i).params.id,1)),class:"bg-indigo-600 text-white px-8 py-3 rounded-xl hover:bg-indigo-700 transition-all shadow-lg active:scale-95"},u(_(c)("common.retry")||"Retry"),1)])])):(n(),r("div",X,[(n(!0),r(T,null,z(b.value,s=>(n(),r("div",{key:s.id,class:"m-auto max-w-7xl"},[t("h2",Y,u(R.title||(h.value==="ar"?s.name_ar:s.name_en)||"Category"),1),s.details&&s.details.length>0?(n(),r("div",{key:0,class:W(["grid gap-x-6 gap-y-10",s.row_type===1?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"])},[(n(!0),r(T,null,z(s.details,(o,v)=>{var l;return n(),r("div",{key:v,class:"group flex flex-col cursor-pointer",onClick:L=>F(o.id)},[t("div",ee,[t("img",{src:((l=o.media[0])==null?void 0:l.url)||"/placeholder.jpg",alt:h.value==="ar"?o.name_ar:o.name_en,class:"w-full h-full transition-transform duration-700 group-hover:scale-110",loading:"lazy",onError:e[1]||(e[1]=L=>L.target.src="/placeholder.jpg")},null,40,te),e[3]||(e[3]=t("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-5 transition-opacity duration-300"},null,-1))]),t("p",ae,u(h.value==="ar"?o.name_ar:o.name_en),1)],8,Z)}),128))],2)):(n(),r("div",oe,[e[4]||(e[4]=t("svg",{class:"mx-auto h-16 w-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)),t("p",se,u(_(c)("common.no_data")||"No items available in this section"),1)])),f.value>p.value?(n(),r("div",ne,[$(_(A),{rows:p.value,totalRecords:f.value,first:(m.value-1)*p.value,onPage:E,template:"PrevPageLink PageLinks NextPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])):I("",!0)]))),128))]))]))}},ie=N(re,[["__scopeId","data-v-5c2142d9"]]);export{ie as default};
