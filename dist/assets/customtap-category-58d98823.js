import{_ as N,u as j,r as u,l as B,p as E,c as F,o as I,J as V,b as D,x as h,e as i,h as c,g as r,t as y,j as w,F as P,m as z,A as M,i as T,H as $,n as A}from"./index-a2002b59.js";const H={class:"mx-auto px-4 max-w-[1500px]"},U={key:0,class:"flex justify-center items-center py-16"},J={key:1,class:"text-center py-16"},W={class:"text-xl font-semibold text-red-600 mb-4"},G={class:"font-bold font-sans text-gray-600 lg:mt-8 mt-4 text-center text-lg sm:text-xl md:text-2xl lg:text-3xl"},K=["onClick","aria-label"],O={class:"w-full overflow-hidden rounded-xl shadow-md relative bg-gray-50 aspect-square"},Q=["src","alt"],X={class:"mt-4 mb-2 text-center px-2 text-gray-800 font-medium text-sm sm:text-base md:text-lg line-clamp-2"},Y={key:0,class:"mt-12 flex justify-center"},Z={__name:"customtap-category",props:{title:{type:String,default:""}},setup(R){const{t:b}=j(),m=u(localStorage.getItem("appLang")||"ar"),k=B(),n=E(),C=u([]),g=u(!0),v=u(null),s=u(1),x=u(0),L=u(!1),f=()=>{typeof window<"u"&&(L.value=window.innerWidth<768)},p=F(()=>L.value?10:20);I(()=>{f(),window.addEventListener("resize",f),d(n.params.id,s.value)}),V(()=>{window.removeEventListener("resize",f)});const d=async(t,a=1)=>{if(!t){g.value=!1;return}g.value=!0,v.value=null;try{const e=(await D.get(`/api/home/get-custom-tab-details/${t}`,{params:{limit:p.value,page:a}})).data.data;C.value=[{id:t,name_ar:e.name_ar||"قسم مخصص",name_en:e.name_en||"Custom Section",type:e.type,row_type:e.type===1?1:2,details:(e.details.data||[]).map(l=>({id:l.id,name_ar:l.name_ar,name_en:l.name_en,has_subcategories:l.has_subcategories,media:l.media||[]}))}];const _=e.details;s.value=_.current_page,x.value=_.total,n.query.page!==String(s.value)&&k.replace({query:{...n.query,page:s.value>1?s.value:void 0}}).catch(()=>{})}catch(o){console.error("Error fetching custom tabs:",o),v.value=b("error.fetchFailed")||"Failed to load content."}finally{g.value=!1}},S=(t,a,o)=>{const e=t?"subcategory":"produts_category";k.push({name:e,params:{id:a},query:{name:encodeURIComponent(o)}})},q=t=>{const a=t.page+1;s.value=a,d(n.params.id,a)};return h(()=>n.params.id,t=>{t&&(s.value=1,d(t,1))}),h(p,()=>{s.value=1,d(n.params.id,1)}),h(()=>n.query.page,t=>{const a=parseInt(t)||1;a!==s.value&&(s.value=a,d(n.params.id,a))}),(t,a)=>(i(),c("div",H,[g.value?(i(),c("div",U,a[1]||(a[1]=[r("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):v.value?(i(),c("div",J,[r("p",W,y(v.value),1),r("button",{onClick:a[0]||(a[0]=o=>d(w(n).params.id,1)),class:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition"},y(w(b)("common.retry")||"Retry"),1)])):(i(!0),c(P,{key:2},z(C.value,o=>(i(),c("div",{key:o.id,class:"m-auto max-w-7xl"},[r("h2",G,y(R.title||(m.value==="ar"?o.name_ar:o.name_en)||"Category"),1),r("div",{class:M(["mt-8 grid gap-x-4 gap-y-10",o.row_type===1?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"])},[(i(!0),c(P,null,z(o.details,(e,_)=>{var l;return i(),c("div",{key:_,class:"group flex flex-col items-center cursor-pointer transition-all duration-300 hover:-translate-y-2",onClick:ee=>S(e.has_subcategories,e.id,m.value==="ar"?e.name_ar:e.name_en),"aria-label":m.value==="ar"?e.name_ar:e.name_en},[r("div",O,[r("img",{src:((l=e.media[0])==null?void 0:l.url)||"/placeholder.jpg",alt:m.value==="ar"?e.name_ar:e.name_en,class:"w-full h-full object-contain transition-transform duration-700 group-hover:scale-110",loading:"lazy"},null,8,Q),a[2]||(a[2]=r("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1))]),r("p",X,y(m.value==="ar"?e.name_ar:e.name_en),1)],8,K)}),128))],2),x.value>p.value?(i(),c("div",Y,[T(w($),{rows:p.value,totalRecords:x.value,first:(s.value-1)*p.value,onPage:q,template:"PrevPageLink PageLinks NextPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])):A("",!0)]))),128))]))}},te=N(Z,[["__scopeId","data-v-6e93f462"]]);export{te as default};
