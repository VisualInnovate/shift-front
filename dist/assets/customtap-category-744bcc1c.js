import{_ as F,a as T,s as P,u as V,p as D,r as c,o as S,L as W,B as z,c as n,d as r,f as a,t as d,h as _,F as R,k as N,j as $,x as I,e as M,J as A,m as H}from"./index-21d8e7d9.js";const J={class:"mx-auto px-4 max-w-[1500px] pb-20"},U={key:0,class:"flex flex-col justify-center items-center py-32"},G={class:"mt-4 text-gray-600 font-medium"},K={key:1,class:"text-center py-32"},O={class:"text-xl font-semibold text-red-600 mb-6"},Q={key:2,class:"animate-fade-in"},X={class:"font-bold text-gray-800 lg:mt-12 mt-6 text-center text-2xl sm:text-3xl md:text-4xl mb-10"},Y={key:0,class:"text-center py-20"},Z={class:"text-gray-500 text-xl"},ee=["onClick"],te={class:"w-full overflow-hidden rounded-2xl shadow-sm hover:shadow-xl transition-all duration-500 relative bg-white aspect-square border border-gray-100"},ae=["src","alt"],se={class:"mt-4 text-center px-2 text-gray-900 font-semibold text-base md:text-lg line-clamp-2 group-hover:text-indigo-600 transition-colors"},oe={key:2,class:"mt-20 flex justify-center"},ne={__name:"customtap-category",props:{title:{type:String,default:""}},setup(j){const{t:v,locale:q}=T(),x=P(()=>q.value),w=V(),i=D(),b=c([]),h=c(!0),y=c(null),u=c(parseInt(i.query.page)||1),f=c(0),k=c(typeof window<"u"?window.innerWidth:1200),C=()=>{k.value=window.innerWidth},m=P(()=>k.value<768?10:20),p=async(o,e=1)=>{if(o){h.value=!0,y.value=null;try{const t=(await $.get(`/api/home/get-custom-tab-details/${o}`,{params:{limit:m.value,page:e}})).data.data,g=t.details||{data:[],total:0,current_page:1};b.value=[{id:o,name_ar:t.name_ar||"قسم مخصص",name_en:t.name_en||"Custom Section",type:t.type,row_type:t.type===1?1:2,details:(g.data||[]).map(l=>({id:l.id,name_ar:l.name_ar,name_en:l.name_en,has_subcategories:l.has_subcategories,media:l.media||[]}))}],f.value=g.total,u.value=g.current_page,w.replace({query:{...i.query,page:e>1?e:void 0}}).catch(()=>{})}catch(s){console.error("Fetch Error:",s),y.value=v("error.fetchFailed")||"Failed to load content"}finally{h.value=!1}}},B=o=>{const e=o.page+1;u.value=e,p(i.params.id,e),window.scrollTo({top:0,behavior:"smooth"})},E=(o,e,s)=>{const t=o?"subcategory":"produts_category";w.push({name:t,params:{id:e},query:{name:s}})};return S(()=>{window.addEventListener("resize",C),p(i.params.id,u.value)}),W(()=>{window.removeEventListener("resize",C)}),z(()=>i.params.id,o=>{o&&(u.value=1,p(o,1))}),z(m,()=>{p(i.params.id,1)}),(o,e)=>(n(),r("div",J,[h.value?(n(),r("div",U,[e[2]||(e[2]=a("svg",{class:"animate-spin h-12 w-12 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),a("p",G,d(_(v)("common.loading")||"Loading..."),1)])):y.value?(n(),r("div",K,[a("p",O,d(y.value),1),a("button",{onClick:e[0]||(e[0]=s=>p(_(i).params.id,1)),class:"bg-indigo-600 text-white px-8 py-3 rounded-xl hover:bg-indigo-700 transition-all shadow-lg"},d(_(v)("common.retry")||"Retry"),1)])):(n(),r("div",Q,[(n(!0),r(R,null,N(b.value,s=>(n(),r("div",{key:s.id,class:"m-auto max-w-7xl"},[a("h2",X,d(j.title||(x.value==="ar"?s.name_ar:s.name_en)),1),s.details.length===0?(n(),r("div",Y,[e[3]||(e[3]=a("i",{class:"pi pi-box text-6xl text-gray-300 mb-4"},null,-1)),a("p",Z,d(_(v)("common.no_data")||"No items found"),1)])):(n(),r("div",{key:1,class:I(["grid gap-x-6 gap-y-10",s.row_type===1?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5":"grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"])},[(n(!0),r(R,null,N(s.details,(t,g)=>{var l;return n(),r("div",{key:g,class:"group flex flex-col cursor-pointer",onClick:L=>E(t.has_subcategories,t.id,x.value==="ar"?t.name_ar:t.name_en)},[a("div",te,[a("img",{src:((l=t.media[0])==null?void 0:l.url)||"/placeholder.jpg",alt:x.value==="ar"?t.name_ar:t.name_en,class:"w-full h-full transition-transform duration-700 group-hover:scale-110",loading:"lazy",onError:e[1]||(e[1]=L=>L.target.src="/placeholder.jpg")},null,40,ae),e[4]||(e[4]=a("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-5 transition-opacity duration-300"},null,-1))]),a("p",se,d(x.value==="ar"?t.name_ar:t.name_en),1)],8,ee)}),128))],2)),f.value>m.value?(n(),r("div",oe,[M(_(A),{rows:m.value,totalRecords:f.value,first:(u.value-1)*m.value,onPage:B,template:"PrevPageLink PageLinks NextPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])):H("",!0)]))),128))]))]))}},le=F(ne,[["__scopeId","data-v-10d236b5"]]);export{le as default};
