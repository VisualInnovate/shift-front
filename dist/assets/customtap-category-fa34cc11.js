import{_ as S,j as B,r as u,u as F,k as I,l as M,o as z,E as D,q as $,a as r,c as n,f as o,t as v,e as R,F as x,d as b,i as V,x as q,g as L}from"./index-f721525b.js";const N={class:"mx-auto px-4 max-w-[1500px]"},A={key:0,class:"flex justify-center items-center py-16"},H={key:1,class:"text-center py-16 text-red-600"},U={class:"text-lg font-semibold"},W={class:"font-bold font-sans text-gray-600 lg:mt-4 xs:mt-2 xs:text-lg sm:text-xl md:text-2xl text-center lg:text-3xl"},G=["onClick","aria-label"],J={class:"w-full overflow-hidden rounded-xl shadow-sm relative bg-gray-100 aspect-square"},K=["src","alt"],O={class:"font-sans mt-4 mb-1 text-center mx-3 text-gray-800 font-medium xs:text-sm sm:text-base md:text-lg w-full truncate"},Q={key:0,class:"flex justify-center items-center pt-8"},X={class:"inline-flex gap-2","aria-label":"Pagination"},Y=["onClick","aria-current"],Z={__name:"customtap-category",props:{title:{type:String,default:""}},setup(j){const{t:y}=B(),d=u(localStorage.getItem("appLang")||"ar"),w=u([]),f=u(!0),m=u(null),k=F(),c=I(),_=u({current_page:1,last_page:1,next_page_url:null,prev_page_url:null,links:[]}),p=u(parseInt(c.query.page)||1),C=u(!1),h=()=>{typeof window<"u"&&(C.value=window.innerWidth<768)},T=M(()=>C.value?8:15);z(()=>{h(),typeof window<"u"&&window.addEventListener("resize",h)}),D(()=>{typeof window<"u"&&window.removeEventListener("resize",h)});const g=async(t,s=1)=>{if(!t)return;f.value=!0,m.value=null;const l=`/api/home/get-custom-tab-details/${t}?limit=${T.value}&page=${s}`;try{const a=(await V.get(l)).data.data;_.value={current_page:a.details.current_page,last_page:a.details.last_page,next_page_url:a.details.next_page_url,prev_page_url:a.details.prev_page_url,links:a.details.links},p.value=a.details.current_page,w.value=[{id:t,name_ar:a.name_ar||y("home.customTabTitle",{number:t}),name_en:a.name_en||y("home.customTabTitle",{number:t}),type:a.type,row_type:a.type===1?1:2,details:(a.details.data||[]).map(i=>({id:i.id,name_ar:i.name_ar,name_en:i.name_en,has_subcategories:i.has_subcategories,media:i.media}))}]}catch(e){console.error("Error fetching custom tabs:",e),m.value=y("error.fetchFailed")||"Failed to load custom content."}finally{f.value=!1,k.push({query:{...c.query}}).catch(()=>{})}},E=(t,s,l)=>{let e;t?e="customtap-category":e="customtap-products",k.push({name:e,params:{id:s},query:{title:l}})},P=t=>{t>=1&&t<=_.value.last_page&&g(c.params.id,t)};return z(()=>{g(c.params.id,p.value)}),$(()=>c.params.id,t=>{t&&(p.value=1,g(t,1))}),$(T,(t,s)=>{t!==s&&(p.value=1,g(c.params.id,1))}),(t,s)=>(r(),n("div",N,[f.value?(r(),n("div",A,s[1]||(s[1]=[o("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):m.value?(r(),n("div",H,[o("p",U,v(m.value),1),o("button",{onClick:s[0]||(s[0]=l=>g(R(c).params.id,p.value)),class:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded"}," Retry ")])):(r(!0),n(x,{key:2},b(w.value,l=>(r(),n("div",{key:l.id,class:"m-auto max-w-7xl"},[o("h2",W,v(j.title||(d.value==="ar"?l.name_ar:l.name_en)||"Category"),1),o("div",{class:q(["mt-6 grid gap-x-4 gap-y-8",l.row_type===1?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-5":"grid-cols-2 md:grid-cols-3 lg:grid-cols-5 xl:grid-cols-5"])},[(r(!0),n(x,null,b(l.details,(e,a)=>{var i;return r(),n("div",{key:a,class:"group flex flex-col items-start cursor-pointer transition-all pb-[1%] rounded-lg shadow-lg duration-300 hover:-translate-y-2 h-auto",onClick:ee=>E(e.has_subcategories,e.id,d.value==="ar"?e.name_ar:e.name_en),"aria-label":`Maps to ${d.value==="ar"?e.name_ar:e.name_en}`},[o("div",J,[o("img",{src:((i=e.media[0])==null?void 0:i.url)||"/placeholder.jpg",alt:d.value==="ar"?e.name_ar:e.name_en,class:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,K),s[2]||(s[2]=o("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))]),o("p",O,v(d.value==="ar"?e.name_ar:e.name_en),1)],8,G)}),128))],2),_.value.last_page>1?(r(),n("div",Q,[o("nav",X,[(r(!0),n(x,null,b(_.value.links,(e,a)=>(r(),n(x,{key:a},[e.url&&!["« Previous","Next »"].includes(e.label)?(r(),n("button",{key:0,onClick:i=>P(parseInt(e.label)),"aria-current":e.active?"page":void 0,class:q(["px-4 py-2 rounded-full text-sm font-medium transition-colors duration-200",e.active?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-100 hover:text-indigo-700"])},v(e.label),11,Y)):L("",!0)],64))),128))])])):L("",!0)]))),128))]))}},ae=S(Z,[["__scopeId","data-v-a26bd922"]]);export{ae as default};
