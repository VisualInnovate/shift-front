import{_ as E,u as H,l as V,p as I,z as q,r as _,c as T,o as W,J as D,x as G,e as l,h as i,g as a,t as n,j as c,F as J,m as U,n as d,i as K,b as x,G as B,A as F,H as O}from"./index-0f4f1a00.js";const Q={class:"mx-auto mt-16 max-w-[1500px] px-4 sm:px-6 lg:px-8 pb-20"},X={key:0,class:"flex flex-col items-center justify-center py-32"},Y={class:"mt-4 text-gray-600"},Z={key:1,class:"text-center py-32"},tt={class:"text-xl font-semibold text-red-600 mb-6"},et={key:2},st={class:"text-center text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-10"},at={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 gap-5 lg:gap-8"},ot=["onClick"],lt={class:"bg-white rounded-2xl shadow-md hover:shadow-2xl transition-all duration-500 overflow-hidden flex flex-col h-full"},it={class:"relative aspect-square overflow-hidden bg-gray-50"},nt={key:0,class:"absolute top-3 left-3 z-10 bg-black text-white text-xs font-bold px-3 py-1.5 rounded-full uppercase tracking-wider"},rt=["src","alt"],ct=["onClick"],dt={class:"p-4 flex flex-col flex-grow"},ut={class:"font-semibold text-gray-900 text-base line-clamp-2 leading-tight mb-2"},_t={key:0,class:"text-gray-600 text-sm line-clamp-2 mb-3"},gt={class:"flex items-center gap-1 mb-3"},ht={class:"text-yellow-500 font-bold text-sm"},mt={class:"text-gray-500 text-xs"},vt={class:"mt-auto flex items-center justify-between"},xt={class:"flex flex-col"},pt={class:"text-xl font-bold text-gray-900"},wt={key:0,class:"text-sm line-through text-red-500 opacity-80"},ft=["onClick","disabled"],bt={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},yt={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},kt={key:1,class:"mt-10 flex justify-center"},M="/placeholder.jpg",Ct={__name:"customtap-products",props:{title:{type:String,default:""}},setup($){const{t:u,locale:k}=H(),p=V(),C=I(),w=q(),f=_(!0),g=_(null),b=_([]),h=_(1),y=_(0),m=T(()=>window.innerWidth<768?10:20),v=async(e=1)=>{var t;f.value=!0,g.value=null;try{const r=((t=(await x.get(`/api/home/get-custom-tab-details/${C.params.id}`,{params:{page:e,limit:m.value}})).data.data)==null?void 0:t.details)||{data:[],total:0};b.value=r.data.map(o=>{var P,z;return{id:o.id,name:k.value==="ar"?o.name_ar||o.name_en:o.name_en||o.name_ar,sub_name:k.value==="ar"?o.sub_name_ar||o.sub_name_en:o.sub_name_en||o.sub_name_ar,base_price:parseFloat(o.base_price),final_price:o.total_discounts_value>0?parseFloat(o.base_price)-parseFloat(o.total_discounts_value):parseFloat(o.base_price),total_discounts_value:parseFloat(o.total_discounts_value||0),img:((z=(P=o.media)==null?void 0:P.find(N=>N.name==="product_main_image"))==null?void 0:z.url)||o.key_default_image||M,total_rating:o.total_rating||0,total_reviews:o.total_reviews||0,is_wished:o.is_wished||!1,in_cart:o.in_cart||!1,is_stock:o.is_stock,is_free_shipping:o.is_free_shipping||!1,is_best_seller:o.is_best_seller||!1}}),y.value=r.total,h.value=r.current_page}catch(s){g.value=u("products.errorLoading")||"Failed to load products",console.error(s)}finally{f.value=!1}},j=e=>{const t=e.page+1;h.value=t,v(t),window.scrollTo({top:0,behavior:"smooth"})},A=async e=>{if(!w.authenticatedweb)return p.push({name:"AuthLogin"});if(e.is_stock!==0)try{await x.post("/api/cart/add",{product_id:e.id,quantity:1}),e.in_cart=!0}catch{alert(u("cart.error"))}},R=async e=>{if(!w.authenticatedweb)return p.push({name:"AuthLogin"});const t=e.is_wished;try{t?await x.delete(`/api/wishlists/${e.id}`):await x.post("/api/wishlists",{product_id:e.id}),e.is_wished=!t}catch{e.is_wished=t}},L=e=>{const t=Number(e);return t%1===0?t.toString():t.toFixed(2)},S=(e,t)=>(e==null?void 0:e.length)>t?e.substr(0,t-1)+"...":e;return W(()=>{v(1);const e=()=>{};window.addEventListener("resize",e),D(()=>window.removeEventListener("resize",e))}),G(()=>C.params.id,()=>{h.value=1,v(1)}),(e,t)=>(l(),i("div",Q,[f.value?(l(),i("div",X,[t[3]||(t[3]=a("svg",{class:"animate-spin h-12 w-12 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),a("p",Y,n(c(u)("common.loading")),1)])):g.value?(l(),i("div",Z,[a("p",tt,n(g.value),1),a("button",{onClick:t[0]||(t[0]=s=>v(1)),class:"bg-indigo-600 text-white px-8 py-3 rounded-xl hover:bg-indigo-700 transition"},n(c(u)("products.retry")),1)])):(l(),i("div",et,[a("h2",st,n($.title||c(u)("products.allProducts")),1),b.value.length>0?(l(),i("div",at,[(l(!0),i(J,null,U(b.value,s=>(l(),i("div",{key:s.id,class:"group cursor-pointer",onClick:r=>c(p).push({name:"Product-details",params:{id:s.id}})},[a("div",lt,[a("div",it,[s.is_best_seller?(l(),i("div",nt," Best Seller ")):d("",!0),a("img",{src:s.img,alt:s.name,class:"w-full h-full object-contain transition-transform duration-700 group-hover:scale-110",loading:"lazy",onError:t[1]||(t[1]=r=>r.target.src=M)},null,40,rt),t[5]||(t[5]=a("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),c(w).authenticatedweb?(l(),i("button",{key:1,onClick:B(r=>R(s),["stop"]),class:F(["absolute top-3 right-3 z-20 p-2.5 bg-white rounded-full shadow-lg hover:shadow-xl transition-all",{"text-red-500":s.is_wished}])},t[4]||(t[4]=[a("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[a("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),10,ct)):d("",!0)]),a("div",dt,[a("h3",ut,n(S(s.name,50)),1),s.sub_name?(l(),i("p",_t,n(s.sub_name),1)):d("",!0),a("div",gt,[a("span",ht,n(s.total_rating||"0.0"),1),t[6]||(t[6]=a("svg",{class:"w-4 h-4 text-yellow-500 fill-current",viewBox:"0 0 24 24"},[a("path",{d:"M12 17.27l6.18 3.73-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73-1.64 7.03z"})],-1)),a("span",mt,"("+n(s.total_reviews||0)+")",1)]),a("div",vt,[a("div",xt,[a("span",pt,n(e.$t("currencyLabel"))+" "+n(L(s.final_price)),1),s.total_discounts_value>0?(l(),i("span",wt,n(e.$t("currencyLabel"))+" "+n(L(s.base_price)),1)):d("",!0)]),a("button",{onClick:B(r=>A(s),["stop"]),disabled:s.is_stock===0,class:F(["p-3 rounded-full transition-all duration-300 shadow-md",[s.in_cart?"bg-[#0b3baa] text-white":s.is_stock===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#A6853B] text-white hover:bg-[#8f702c]"]])},[s.in_cart?(l(),i("svg",bt,t[7]||(t[7]=[a("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):(l(),i("svg",yt,t[8]||(t[8]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.708.707 1.708H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])))],10,ft)])])])],8,ot))),128))])):d("",!0),y.value>m.value?(l(),i("div",kt,[K(c(O),{rows:m.value,totalRecords:y.value,first:(h.value-1)*m.value,onPage:t[2]||(t[2]=s=>j(s)),template:"PrevPageLink PageLinks NextPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])):d("",!0)]))]))}},Pt=E(Ct,[["__scopeId","data-v-8858b9d8"]]);export{Pt as default};
