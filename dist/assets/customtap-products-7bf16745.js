import{_ as V,u as q,l as R,q as D,A as U,r as g,c as J,o as G,J as K,y as O,e as o,h as i,g as a,t as n,j as m,F as P,m as B,n as d,b as v,H as $,B as k,x as Q}from"./index-5811e467.js";const X={class:"mx-auto mt-16 max-w-[1500px] px-4 sm:px-6 lg:px-8 pb-20"},Y={key:0,class:"flex flex-col items-center justify-center py-32"},Z={class:"mt-4 text-gray-600"},tt={key:1,class:"text-center py-32"},et={class:"text-xl font-semibold text-red-600 mb-6"},st={key:2},at={class:"text-center text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-10"},lt={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 gap-5 lg:gap-8"},ot=["onClick"],it={class:"bg-white rounded-2xl shadow-md hover:shadow-2xl transition-all duration-500 overflow-hidden flex flex-col h-full"},nt={class:"relative aspect-square overflow-hidden bg-gray-50"},rt={key:0,class:"absolute top-3 left-3 z-10 bg-black text-white text-xs font-bold px-3 py-1.5 rounded-full uppercase tracking-wider"},ct=["src","alt"],dt=["onClick"],ut={class:"p-4 flex flex-col flex-grow"},_t={class:"font-semibold text-gray-900 text-base line-clamp-2 leading-tight mb-2"},gt={key:0,class:"text-gray-600 text-sm line-clamp-2 mb-3"},mt={class:"flex items-center gap-1 mb-3"},ht={class:"text-yellow-500 font-bold text-sm"},vt={class:"text-gray-500 text-xs"},xt={class:"mt-auto flex items-center justify-between"},bt={class:"flex items-baseline gap-2"},pt={class:"text-2xl font-bold text-gray-900"},ft={key:0,class:"text-base line-through text-blue-600 opacity-80 ml-2"},wt=["onClick","disabled"],yt={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},kt={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ct={key:1,class:"flex items-center mt-3 text-[#0b3baa] text-xs font-medium"},Lt={key:0,class:"mt-16 flex justify-center"},zt={class:"inline-flex gap-2","aria-label":"Pagination"},Ft=["onClick","disabled"],Mt=["innerHTML"],j="/placeholder.jpg",Pt={__name:"customtap-products",props:{title:{type:String,default:""}},setup(S){const{t:u,locale:x}=q(),A=localStorage.getItem("appLang")||"en";x.value=A;const b=R(),C=D(),p=U(),f=g(!0),h=g(null),L=g([]),c=g(1),w=g({current_page:1,last_page:1,links:[]}),y=J(()=>window.innerWidth<768?10:20),_=async(e=1)=>{var t;f.value=!0,h.value=null;try{const r=((t=(await v.get(`/api/home/get-custom-tab-details/${C.params.id}`,{params:{page:e,limit:y.value}})).data.data)==null?void 0:t.details)||[];L.value=r.data.map(l=>{var F,M;return{id:l.id,name:x.value==="ar"?l.name_ar||l.name_en:l.name_en||l.name_ar,sub_name:x.value==="ar"?l.sub_name_ar||l.sub_name_en:l.sub_name_en||l.sub_name_ar,base_price:parseFloat(l.base_price),final_price:l.total_discounts_value>0?parseFloat(l.base_price)-parseFloat(l.total_discounts_value):parseFloat(l.base_price),total_discounts_value:parseFloat(l.total_discounts_value||0),img:((M=(F=l.media)==null?void 0:F.find(I=>I.name==="product_main_image"))==null?void 0:M.url)||l.key_default_image||j,total_rating:l.total_rating||0,total_reviews:l.total_reviews||0,is_wished:l.is_wished||!1,in_cart:l.in_cart||!1,is_stock:l.is_stock,is_free_shipping:l.is_free_shipping||!1,is_best_seller:l.is_best_seller||!1}}),w.value={current_page:r.current_page,last_page:r.last_page,links:r.links||[]},c.value=r.current_page}catch(s){h.value=u("products.errorLoading")||"Failed to load products",console.error(s)}finally{f.value=!1}},H=e=>{if(!e)return null;const t=e.match(/page=(\d+)/);return t?Number(t[1]):1},N=e=>{e&&e!==c.value&&(c.value=e,_(e))},T=async e=>{if(!p.authenticatedweb)return b.push({name:"AuthLogin"});if(e.is_stock!==0)try{await v.post("/api/cart/add",{product_id:e.id,quantity:1}),e.in_cart=!0}catch{alert(u("cart.error"))}},W=async e=>{if(!p.authenticatedweb)return b.push({name:"AuthLogin"});const t=e.is_wished;try{t?await v.delete(`/api/wishlists/${e.id}`):await v.post("/api/wishlists",{product_id:e.id}),e.is_wished=!t}catch{e.is_wished=t}},z=e=>{const t=Number(e);return t%1===0?t.toString():t.toFixed(2)},E=(e,t)=>(e==null?void 0:e.length)>t?e.substr(0,t-1)+"...":e;return G(()=>{_(c.value);const e=()=>{(window.innerWidth<768&&y.value!==10||window.innerWidth>=768&&y.value!==20)&&(c.value=1,_(1))};window.addEventListener("resize",e),K(()=>window.removeEventListener("resize",e))}),O(()=>C.params.id,()=>{c.value=1,_(1)}),(e,t)=>(o(),i("div",X,[f.value?(o(),i("div",Y,[t[2]||(t[2]=a("svg",{class:"animate-spin h-12 w-12 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),a("p",Z,n(m(u)("common.loading")),1)])):h.value?(o(),i("div",tt,[a("p",et,n(h.value),1),a("button",{onClick:t[0]||(t[0]=s=>_(c.value)),class:"bg-indigo-600 text-white px-8 py-3 rounded-xl hover:bg-indigo-700 transition"},n(m(u)("products.retry")),1)])):(o(),i("div",st,[a("h2",at,n(S.title||m(u)("products.allProducts")),1),a("div",lt,[(o(!0),i(P,null,B(L.value,s=>(o(),i("div",{key:s.id,class:"group cursor-pointer",onClick:r=>m(b).push({name:"Product-details",params:{id:s.id}})},[a("div",it,[a("div",nt,[s.is_best_seller?(o(),i("div",rt," Best Seller ")):d("",!0),a("img",{src:s.img,alt:s.name,class:"w-full h-full object-contain transition-transform duration-700 group-hover:scale-110",loading:"lazy",onError:t[1]||(t[1]=r=>r.target.src=j)},null,40,ct),t[4]||(t[4]=a("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),m(p).authenticatedweb?(o(),i("button",{key:1,onClick:$(r=>W(s),["stop"]),class:k(["absolute top-3 right-3 z-20 p-2.5 bg-white rounded-full shadow-lg hover:shadow-xl transition-all",{"text-red-500":s.is_wished}]),"aria-label":"Wishlist"},t[3]||(t[3]=[a("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[a("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),10,dt)):d("",!0)]),a("div",ut,[a("h3",_t,n(E(s.name,50)),1),s.sub_name?(o(),i("p",gt,n(s.sub_name),1)):d("",!0),a("div",mt,[a("span",ht,n(s.total_rating||"0.0"),1),t[5]||(t[5]=a("svg",{class:"w-4 h-4 text-yellow-500 fill-current",viewBox:"0 0 24 24"},[a("path",{d:"M12 17.27l6.18 3.73-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73-1.64 7.03z"})],-1)),a("span",vt,"("+n(s.total_reviews||0)+")",1)]),a("div",xt,[a("div",bt,[a("span",pt,n(e.$t("currencyLabel"))+" "+n(z(s.final_price)),1),s.total_discounts_value>0?(o(),i("span",ft,n(e.$t("currencyLabel"))+" "+n(z(s.base_price)),1)):d("",!0)]),a("button",{onClick:$(r=>T(s),["stop"]),disabled:s.is_stock===0,class:k(["p-3 rounded-full transition-all duration-300 shadow-md",[s.in_cart?"bg-[#0b3baa] text-white":s.is_stock===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#A6853B] text-white hover:bg-[#8f702c]"]])},[s.in_cart?(o(),i("svg",yt,t[6]||(t[6]=[a("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):(o(),i("svg",kt,t[7]||(t[7]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.708.707 1.708H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])))],10,wt)]),s.is_free_shipping?(o(),i("div",Ct,[t[8]||(t[8]=a("i",{class:"pi pi-truck mr-1"},null,-1)),Q(" "+n(e.$t("products.Free_Delivery")),1)])):d("",!0)])])],8,ot))),128))]),w.value.last_page>1?(o(),i("div",Lt,[a("nav",zt,[(o(!0),i(P,null,B(w.value.links,(s,r)=>(o(),i("button",{key:r,onClick:l=>s.url&&N(H(s.url)),disabled:!s.url,class:k(["px-4 py-2 rounded-full text-sm font-medium transition",s.active?"bg-indigo-600 text-white":s.url?"bg-gray-100 text-gray-700 hover:bg-indigo-100":"bg-gray-50 text-gray-400 cursor-not-allowed"])},[a("span",{innerHTML:s.label},null,8,Mt)],10,Ft))),128))])])):d("",!0)]))]))}},$t=V(Pt,[["__scopeId","data-v-ad5bde4c"]]);export{$t as default};
