import{_ as E,u as H,l as I,p as T,z as q,r as _,c as D,o as W,J as G,x as J,e as l,h as i,g as a,t as n,j as u,F as U,m as K,n as c,i as O,b as x,G as F,A as B,v as Q,H as X}from"./index-f448e7d3.js";const Y={class:"mx-auto mt-16 max-w-[1500px] px-4 sm:px-6 lg:px-8 pb-20"},Z={key:0,class:"flex flex-col items-center justify-center py-32"},tt={class:"mt-4 text-gray-600"},et={key:1,class:"text-center py-32"},st={class:"text-xl font-semibold text-red-600 mb-6"},at={key:2},ot={class:"text-center text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-800 mb-10"},lt={key:0,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 xl:grid-cols-5 gap-5 lg:gap-8"},it=["onClick"],nt={class:"bg-white rounded-2xl shadow-md hover:shadow-2xl transition-all duration-500 overflow-hidden flex flex-col h-full"},rt={class:"relative aspect-square overflow-hidden bg-gray-50"},ct={key:0,class:"absolute top-3 left-3 z-10 bg-black text-white text-xs font-bold px-3 py-1.5 rounded-full uppercase tracking-wider"},dt=["src","alt"],ut=["onClick"],_t={class:"p-4 flex flex-col flex-grow"},gt={class:"font-semibold text-gray-900 text-base line-clamp-2 leading-tight mb-2"},mt={key:0,class:"text-gray-600 text-sm line-clamp-2 mb-3"},ht={class:"flex items-center gap-1 mb-3"},vt={class:"text-yellow-500 font-bold text-sm"},xt={class:"text-gray-500 text-xs"},pt={class:"mt-auto flex items-center justify-between"},ft={class:"flex flex-col"},wt={class:"text-xl font-bold text-gray-900"},bt={key:0,class:"text-sm line-through text-red-500 opacity-80"},yt=["onClick","disabled"],kt={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},Ct={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Lt={key:1,class:"flex items-center text-[#0b3baa] text-xs font-medium mt-2"},Pt={key:1,class:"mt-10 flex justify-center"},M="/placeholder.jpg",zt={__name:"customtap-products",props:{title:{type:String,default:""}},setup($){const{t:d,locale:y}=H(),k=I(),C=T(),p=q(),f=_(!0),g=_(null),w=_([]),m=_(1),b=_(0),h=D(()=>window.innerWidth<768?10:20),v=async(e=1)=>{var t;f.value=!0,g.value=null;try{const r=((t=(await x.get(`/api/home/get-custom-tab-details/${C.params.id}`,{params:{page:e,limit:h.value}})).data.data)==null?void 0:t.details)||{data:[],total:0};w.value=r.data.map(o=>{var P,z;return{id:o.id,name:y.value==="ar"?o.name_ar||o.name_en:o.name_en||o.name_ar,sub_name:y.value==="ar"?o.sub_name_ar||o.sub_name_en:o.sub_name_en||o.sub_name_ar,base_price:parseFloat(o.base_price),final_price:o.total_discounts_value>0?parseFloat(o.base_price)-parseFloat(o.total_discounts_value):parseFloat(o.base_price),total_discounts_value:parseFloat(o.total_discounts_value||0),img:((z=(P=o.media)==null?void 0:P.find(V=>V.name==="product_main_image"))==null?void 0:z.url)||o.key_default_image||M,total_rating:o.total_rating||0,total_reviews:o.total_reviews||0,is_wished:o.is_wished||!1,in_cart:o.in_cart||!1,is_stock:o.is_stock,is_free_shipping:o.is_free_shipping||!1,is_best_seller:o.is_best_seller||!1}}),b.value=r.total,m.value=r.current_page}catch(s){g.value=d("products.errorLoading")||"Failed to load products",console.error(s)}finally{f.value=!1}},j=e=>{const t=e.page+1;m.value=t,v(t),window.scrollTo({top:0,behavior:"smooth"})},A=async e=>{if(!p.authenticatedweb)return k.push({name:"AuthLogin"});if(e.is_stock!==0)try{await x.post("/api/cart/add",{product_id:e.id,quantity:1}),e.in_cart=!0}catch{alert(d("cart.error"))}},N=e=>{const t=`/product-details/${e.id}`;window.open(t,"_blank","noopener,noreferrer")},R=async e=>{if(!p.authenticatedweb)return k.push({name:"AuthLogin"});const t=e.is_wished;try{t?await x.delete(`/api/wishlists/${e.id}`):await x.post("/api/wishlists",{product_id:e.id}),e.is_wished=!t}catch{e.is_wished=t}},L=e=>{const t=Number(e);return t%1===0?t.toString():t.toFixed(2)},S=(e,t)=>(e==null?void 0:e.length)>t?e.substr(0,t-1)+"...":e;return W(()=>{v(1);const e=()=>{};window.addEventListener("resize",e),G(()=>window.removeEventListener("resize",e))}),J(()=>C.params.id,()=>{m.value=1,v(1)}),(e,t)=>(l(),i("div",Y,[f.value?(l(),i("div",Z,[t[3]||(t[3]=a("svg",{class:"animate-spin h-12 w-12 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),a("p",tt,n(u(d)("common.loading")),1)])):g.value?(l(),i("div",et,[a("p",st,n(g.value),1),a("button",{onClick:t[0]||(t[0]=s=>v(1)),class:"bg-indigo-600 text-white px-8 py-3 rounded-xl hover:bg-indigo-700 transition"},n(u(d)("products.retry")),1)])):(l(),i("div",at,[a("h2",ot,n($.title||u(d)("products.allProducts")),1),w.value.length>0?(l(),i("div",lt,[(l(!0),i(U,null,K(w.value,s=>(l(),i("div",{key:s.id,class:"group cursor-pointer",onClick:r=>N(s)},[a("div",nt,[a("div",rt,[s.is_best_seller?(l(),i("div",ct," Best Seller ")):c("",!0),a("img",{src:s.img,alt:s.name,class:"w-full h-full object-contain transition-transform duration-700 group-hover:scale-110",loading:"lazy",onError:t[1]||(t[1]=r=>r.target.src=M)},null,40,dt),t[5]||(t[5]=a("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),u(p).authenticatedweb?(l(),i("button",{key:1,onClick:F(r=>R(s),["stop"]),class:B(["absolute top-3 right-3 z-20 p-2.5 bg-white rounded-full shadow-lg hover:shadow-xl transition-all",{"text-red-500":s.is_wished}])},t[4]||(t[4]=[a("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[a("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),10,ut)):c("",!0)]),a("div",_t,[a("h3",gt,n(S(s.name,50)),1),s.sub_name?(l(),i("p",mt,n(s.sub_name),1)):c("",!0),a("div",ht,[a("span",vt,n(s.total_rating||"0.0"),1),t[6]||(t[6]=a("svg",{class:"w-4 h-4 text-yellow-500 fill-current",viewBox:"0 0 24 24"},[a("path",{d:"M12 17.27l6.18 3.73-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73-1.64 7.03z"})],-1)),a("span",xt,"("+n(s.total_reviews||0)+")",1)]),a("div",pt,[a("div",ft,[a("span",wt,n(e.$t("currencyLabel"))+" "+n(L(s.final_price)),1),s.total_discounts_value>0?(l(),i("span",bt,n(e.$t("currencyLabel"))+" "+n(L(s.base_price)),1)):c("",!0)]),a("button",{onClick:F(r=>A(s),["stop"]),disabled:s.is_stock===0,class:B(["p-3 rounded-full transition-all duration-300 shadow-md",[s.in_cart?"bg-[#0b3baa] text-white":s.is_stock===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#A6853B] text-white hover:bg-[#8f702c]"]])},[s.in_cart?(l(),i("svg",kt,t[7]||(t[7]=[a("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):(l(),i("svg",Ct,t[8]||(t[8]=[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.708.707 1.708H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])))],10,yt)]),s.is_free_shipping?(l(),i("div",Lt,[t[9]||(t[9]=a("span",{class:"pi pi-truck mr-2"},null,-1)),Q(" "+n(u(d)("products.Free_Delivery")),1)])):c("",!0)])])],8,it))),128))])):c("",!0),b.value>h.value?(l(),i("div",Pt,[O(u(X),{rows:h.value,totalRecords:b.value,first:(m.value-1)*h.value,onPage:t[2]||(t[2]=s=>j(s)),template:"PrevPageLink PageLinks NextPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])):c("",!0)]))]))}},Bt=E(zt,[["__scopeId","data-v-bd1ffdc8"]]);export{Bt as default};
