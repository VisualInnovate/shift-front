import{_ as Q,c as P,p as W,l as X,a as Y,u as Z,r as u,o as ee,d as _,a1 as ae,e as r,h as d,B as te,g as a,i as p,w as R,G as x,F as se,b as V,v as y,t as C,n as F,A as le,j as oe}from"./index-0f4f1a00.js";const ne={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},de={class:"space-y-2"},ie={key:0,class:"text-red-500 text-xs"},ue={class:"space-y-2"},ce={key:0,class:"text-red-500 text-xs"},me={class:"space-y-2"},pe={key:0,class:"text-red-500 text-xs"},ge={class:"md:col-span-2 space-y-2"},ve={class:"flex justify-center"},be={key:0,class:"p-4"},_e={class:"relative group"},fe=["src"],xe={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},ye={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},he={class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition cursor-pointer"},we={key:1,class:"p-8 flex flex-col items-center justify-center"},ke={class:"pt-4 flex justify-center space-x-4"},De={key:0},Ve={key:1,class:"pi pi-spinner pi-spin"},Ce={__name:"edit",setup(Fe){const G=P(()=>localStorage.getItem("appLang")||"en"),S=P(()=>G.value==="en"?"name_en":"name_ar"),A=W(),I=X(),h=Y(),{t:w}=Z(),c=u(),o=u(!1),f=u(null),v=u(null),b=u(!1),M=u(A.params.id),U=u([]),l=u({name_en:"",name_ar:"",brand_id:null,image:null}),$=async()=>{var t,e,s,n,i;try{o.value=!0;const[m,D]=await Promise.all([V.get(`/api/model/${M.value}`),V.get("/api/brand")]);l.value=m.data.data,U.value=D.data.data.data,v.value=(s=(e=(t=m.data)==null?void 0:t.data)==null?void 0:e.media[0])==null?void 0:s.url,o.value=!1}catch(m){console.error("Error fetching data:",m),h.add({severity:"error",summary:w("error"),detail:((i=(n=m.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to fetch data",life:3e3}),o.value=!1}};ee(()=>{$()});const z=t=>{t.preventDefault(),b.value=!0},J=()=>{b.value=!1},O=t=>{f.value=t;const e=new FileReader;e.onload=s=>{v.value=s.target.result},e.readAsDataURL(t),b.value=!1},k=t=>{var s,n,i;const e=((s=t.target.files)==null?void 0:s[0])||((i=(n=t.dataTransfer)==null?void 0:n.files)==null?void 0:i[0]);e&&e.type.match("image.*")&&O(e)},q=()=>{f.value=null,v.value=null,l.value.image=null},H=async()=>{o.value=!0;const t=new FormData;t.append("name_en",l.value.name_en),t.append("name_ar",l.value.name_ar),t.append("brand_id",l.value.brand_id),t.append("_method","PUT"),f.value?t.append("image",f.value):l.value.image===null&&t.append("remove_image","true"),V.post(`/api/model/${M.value}`,t).then(e=>{I.push({name:"model"}),h.add({severity:"success",summary:w("success"),detail:"Model updated successfully",life:3e3}),o.value=!1}).catch(e=>{var s,n;console.error("Error:",e),h.add({severity:"error",summary:w("error"),detail:((n=(s=e.response)==null?void 0:s.data)==null?void 0:n.message)||"An error occurred",life:3e3}),o.value=!1})};return(t,e)=>{const s=_("InputText"),n=_("Dropdown"),i=_("Button"),m=_("Form"),D=_("Toast"),K=ae("can");return r(),d(se,null,[te((r(),d("div",ne,[e[12]||(e[12]=a("h1",{class:"text-3xl font-bold text-center mb-8 text-gray-800"},"Edit Model",-1)),p(m,{ref_key:"form",ref:c,onSubmit:x(H,["prevent"]),class:"space-y-6"},{default:R(()=>{var j,B,T,E,L,N;return[a("div",re,[a("div",de,[e[4]||(e[4]=a("label",{for:"name_en",class:"block text-sm font-medium text-gray-700"},[y(" English Name "),a("span",{class:"text-red-500"},"*")],-1)),p(s,{id:"name_en",modelValue:l.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=g=>l.value.name_en=g),placeholder:"Enter model name in English",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(B=(j=c.value)==null?void 0:j.errors)!=null&&B.name_en?(r(),d("small",ie,C(c.value.errors.name_en[0]),1)):F("",!0)]),a("div",ue,[e[5]||(e[5]=a("label",{for:"name_ar",class:"block text-sm font-medium text-gray-700"},[y(" Arabic Name "),a("span",{class:"text-red-500"},"*")],-1)),p(s,{id:"name_ar",modelValue:l.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=g=>l.value.name_ar=g),placeholder:"أدخل اسم الموديل بالعربية",dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(E=(T=c.value)==null?void 0:T.errors)!=null&&E.name_ar?(r(),d("small",ce,C(c.value.errors.name_ar[0]),1)):F("",!0)]),a("div",me,[e[6]||(e[6]=a("label",{for:"brand_id",class:"block text-sm font-medium text-gray-700"},[y(" Brand "),a("span",{class:"text-red-500"},"*")],-1)),p(n,{filter:"",id:"brand_id",modelValue:l.value.brand_id,"onUpdate:modelValue":e[2]||(e[2]=g=>l.value.brand_id=g),options:U.value,optionLabel:S.value,optionValue:"id",placeholder:"Select a brand",class:"w-full"},null,8,["modelValue","options","optionLabel"]),(N=(L=c.value)==null?void 0:L.errors)!=null&&N.brand_id?(r(),d("small",pe,C(c.value.errors.brand_id[0]),1)):F("",!0)]),a("div",ge,[e[11]||(e[11]=a("label",{class:"block text-sm font-medium text-gray-700"},"Model Image",-1)),a("div",ve,[a("label",{onDragover:x(z,["prevent"]),onDragleave:J,onDrop:x(k,["prevent"]),class:le([{"border-blue-500 bg-blue-50":b.value,"border-gray-300":!b.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[a("input",{type:"file",onChange:k,accept:"image/*",class:"hidden"},null,32),v.value?(r(),d("div",be,[a("div",_e,[a("img",{src:v.value,alt:"Preview",class:"w-full h-64 object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,fe),a("div",xe,[a("div",ye,[a("button",{type:"button",onClick:x(q,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[7]||(e[7]=[a("i",{class:"pi pi-trash text-sm"},null,-1)])),a("label",he,[e[8]||(e[8]=a("i",{class:"pi pi-pencil text-sm"},null,-1)),a("input",{type:"file",onChange:k,accept:"image/*",class:"hidden"},null,32)])])])]),e[9]||(e[9]=a("p",{class:"mt-2 text-center text-sm text-gray-500"},"Click or drag to change image",-1))])):(r(),d("div",we,e[10]||(e[10]=[a("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[a("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1),a("p",{class:"text-sm text-center text-gray-600 mb-1"},[a("span",{class:"text-blue-500 font-medium"},"Click to upload"),y(" or drag and drop ")],-1),a("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 2MB)",-1)])))],34)])])]),a("div",ke,[p(i,{type:"button",label:"Cancel",icon:"pi pi-times",onClick:e[3]||(e[3]=g=>oe(I).go(-1)),class:"px-6 mx-2 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:o.value},null,8,["disabled"]),p(i,{type:"submit",label:"Update Model",icon:"pi pi-check",loading:o.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:o.value},{default:R(()=>[o.value?(r(),d("i",Ve)):(r(),d("span",De,"Update Model"))]),_:1},8,["loading","disabled"])])]}),_:1},512)])),[[K,"edit models"]]),p(D)],64)}}},Me=Q(Ce,[["__scopeId","data-v-b9e865c7"]]);export{Me as default};
