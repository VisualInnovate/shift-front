import{_ as Q,G as W,u as X,j as Y,r as c,o as Z,n as f,a0 as ee,a as n,c as d,y as te,f as s,t as o,h as p,w as N,C as h,F as se,i as k,p as m,g as b,x as ae}from"./index-89509fb9.js";const oe={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},le={class:"text-3xl font-bold text-center mb-8 text-gray-800"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ne={class:"space-y-2"},de={for:"name",class:"block text-sm font-medium text-gray-700"},ue={key:0,class:"text-red-500 text-xs"},ie={class:"space-y-2"},pe={for:"phone",class:"block text-sm font-medium text-gray-700"},ce={key:0,class:"text-red-500 text-xs"},me={class:"space-y-2"},ve={for:"type",class:"block text-sm font-medium text-gray-700"},ge={key:0,class:"text-red-500 text-xs"},_e={class:"space-y-2"},fe={for:"role",class:"block text-sm font-medium text-gray-700"},be={key:0,class:"text-red-500 text-xs"},ye={class:"space-y-2"},xe={for:"email",class:"block text-sm font-medium text-gray-700"},he={key:0,class:"text-red-500 text-xs"},we={class:"md:col-span-2 space-y-2"},ke={class:"block text-sm font-medium text-gray-700"},Ve={class:"flex justify-center"},De={key:0,class:"p-4"},$e={class:"relative group"},Ue=["src"],Fe={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},Ie={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},je={class:"mt-2 text-center text-sm text-gray-500"},Ce={key:1,class:"p-8 flex flex-col items-center justify-center"},Re={class:"text-sm text-center text-gray-600 mb-1"},Te={class:"text-blue-500 font-medium"},Be={class:"pt-4 flex justify-center"},Ge={key:0},Ne={key:1,class:"pi pi-spinner pi-spin"},Le={__name:"edite",setup(Pe){const L=W(),w=X(),{t:P}=Y(),l=c(),v=c(!1),V=c([]),y=c(null),g=c(null),_=c(!1),a=c({name:"",phone:"",type:null,role_id:null,email:""}),E=async()=>{try{const t=await k.get("api/role");V.value=t.data.data.data,z()}catch(t){console.error("Error fetching roles:",t)}},M=t=>{t.preventDefault(),_.value=!0},S=()=>{_.value=!1},A=t=>{y.value=t;const e=new FileReader;e.onload=r=>{g.value=r.target.result},e.readAsDataURL(t),_.value=!1},D=t=>{var r,i,x;const e=((r=t.target.files)==null?void 0:r[0])||((x=(i=t.dataTransfer)==null?void 0:i.files)==null?void 0:x[0]);e&&e.type.match("image.*")&&A(e)},z=()=>{k.get(`api/user/${w.currentRoute._value.params.id}`).then(t=>{var e,r,i;a.value.name=t.data.data.name,a.value.email=t.data.data.email,a.value.type=t.data.data.type,a.value.phone=t.data.data.phone,a.value.role_id=t.data.data.roles[0].id,g.value=(i=(r=(e=t.data)==null?void 0:e.data)==null?void 0:r.media[0])==null?void 0:i.url})},J=()=>{y.value=null,g.value=null},O=async()=>{v.value=!0;const t=new FormData;t.append("name",a.value.name),t.append("phone",a.value.phone),t.append("type",a.value.type),t.append("role_id",a.value.role_id),t.append("email",a.value.email),y.value&&t.append("image",y.value),k.post(`/api/user/${w.currentRoute._value.params.id}`,t).then(e=>{w.push({name:"users"})}).catch(e=>{console.error("Error:",e),L.add({severity:"error",summary:P("error"),detail:e.response.data.message,life:3e3}),v.value=!1})};return Z(()=>{E()}),(t,e)=>{const r=f("InputText"),i=f("Dropdown"),x=f("Button"),q=f("Form"),H=f("Toast"),K=ee("can");return n(),d(se,null,[te((n(),d("div",oe,[s("h1",le,o(t.$t("user.edit_User")),1),p(q,{ref_key:"form",ref:l,model:a.value,rules:t.rules,onSubmit:h(O,["prevent"]),class:"space-y-6"},{default:N(()=>{var $,U,F,I,j,C,R,T,B,G;return[s("div",re,[s("div",ne,[s("label",de,[m(o(t.$t("user.name"))+" ",1),e[5]||(e[5]=s("span",{class:"text-red-500"},"*",-1))]),p(r,{id:"name",modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=u=>a.value.name=u),placeholder:t.$t("user.enter_full_name"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(U=($=l.value)==null?void 0:$.errors)!=null&&U.name?(n(),d("small",ue,o(l.value.errors.name[0].message),1)):b("",!0)]),s("div",ie,[s("label",pe,[m(o(t.$t("user.phone"))+" ",1),e[6]||(e[6]=s("span",{class:"text-red-500"},"*",-1))]),p(r,{id:"phone",modelValue:a.value.phone,"onUpdate:modelValue":e[1]||(e[1]=u=>a.value.phone=u),placeholder:"+1 (___) ___-____",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(I=(F=l.value)==null?void 0:F.errors)!=null&&I.phone?(n(),d("small",ce,o(l.value.errors.phone[0].message),1)):b("",!0)]),s("div",me,[s("label",ve,[m(o(t.$t("user.type"))+" ",1),e[7]||(e[7]=s("span",{class:"text-red-500"},"*",-1))]),p(i,{filter:"",id:"type",modelValue:a.value.type,"onUpdate:modelValue":e[2]||(e[2]=u=>a.value.type=u),options:[{label:"Admin",value:1},{label:"customer",value:2},{label:"User",value:2}],optionLabel:"label",optionValue:"value",placeholder:'$t("user.select_user_type")',class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue"]),(C=(j=l.value)==null?void 0:j.errors)!=null&&C.type?(n(),d("small",ge,o(l.value.errors.type[0].message),1)):b("",!0)]),s("div",_e,[s("label",fe,[m(o(t.$t("user.role"))+" ",1),e[8]||(e[8]=s("span",{class:"text-red-500"},"*",-1))]),p(i,{filter:"",id:"role",modelValue:a.value.role_id,"onUpdate:modelValue":e[3]||(e[3]=u=>a.value.role_id=u),options:V.value,optionLabel:"name",optionValue:"id",placeholder:t.$t("user.select_role"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,["modelValue","options","placeholder"]),(T=(R=l.value)==null?void 0:R.errors)!=null&&T.role_id?(n(),d("small",be,o(l.value.errors.role_id[0].message),1)):b("",!0)]),s("div",ye,[s("label",xe,[m(o(t.$t("user.email"))+" ",1),e[9]||(e[9]=s("span",{class:"text-red-500"},"*",-1))]),p(r,{id:"email",modelValue:a.value.email,"onUpdate:modelValue":e[4]||(e[4]=u=>a.value.email=u),type:"email",placeholder:"user@example.com",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue"]),(G=(B=l.value)==null?void 0:B.errors)!=null&&G.email?(n(),d("small",he,o(l.value.errors.email[0].message),1)):b("",!0)]),s("div",we,[s("label",ke,o(t.$t("user.profile_Image")),1),s("div",Ve,[s("label",{onDragover:h(M,["prevent"]),onDragleave:S,onDrop:h(D,["prevent"]),class:ae([{"border-blue-500 bg-blue-50":_.value,"border-gray-300":!_.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[s("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32),g.value?(n(),d("div",De,[s("div",$e,[s("img",{src:g.value,alt:"Preview",class:"w-full h-64 object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,Ue),s("div",Fe,[s("div",Ie,[s("button",{type:"button",onClick:h(J,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[10]||(e[10]=[s("i",{class:"pi pi-trash text-sm"},null,-1)])),e[11]||(e[11]=s("button",{type:"button",class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition"},[s("i",{class:"pi pi-pencil text-sm"})],-1))])])]),s("p",je,o(t.$t("user.click_or_drag_to_change_photo")),1)])):(n(),d("div",Ce,[e[12]||(e[12]=s("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[s("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),s("p",Re,[s("span",Te,o(t.$t("user.click_to_upload")),1),m(" "+o(t.$t("user.or_drag_and_drop")),1)]),e[13]||(e[13]=s("p",{class:"text-xs text-gray-400"},"SVG, PNG, JPG or GIF (max. 1MB)",-1))]))],34)])])]),s("div",Be,[p(x,{type:"submit",label:"Update User",icon:"pi pi-user-plus",loading:v.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:v.value},{default:N(()=>[v.value?(n(),d("i",Ne)):(n(),d("span",Ge,o(t.$t("user.update_User")),1))]),_:1},8,["loading","disabled"])])]}),_:1},8,["model","rules"])])),[[K,"edit users"]]),p(H)],64)}}},Me=Q(Le,[["__scopeId","data-v-84b85f0a"]]);export{Me as default};
