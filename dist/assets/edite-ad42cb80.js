import{_ as G,p as O,l as q,a as H,u as J,r as p,o as K,d as y,a1 as Q,e as i,h as u,B as W,g as a,t as n,j as o,i as _,w as B,G as h,F as X,b as E,v as V,n as N,A as Y}from"./index-2602fe15.js";const Z={class:"max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-lg"},ee={class:"text-3xl font-bold text-center mb-8 text-gray-800"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},te={class:"space-y-2"},se={for:"name_en",class:"block text-sm font-medium text-gray-700"},re={key:0,class:"text-red-500 text-xs"},oe={class:"space-y-2"},ne={for:"name_ar",class:"block text-sm font-medium text-gray-700"},le={key:0,class:"text-red-500 text-xs"},de={class:"md:col-span-2 space-y-2"},ie={class:"block text-sm font-medium text-gray-700"},ue={class:"flex justify-center"},ce={key:0,class:"p-4"},pe={class:"relative group"},me=["src"],_e={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 flex items-center justify-center transition-all duration-300 rounded-lg"},ge={class:"opacity-0 group-hover:opacity-100 space-x-3 transition-all duration-300 transform translate-y-4 group-hover:translate-y-0"},be={class:"bg-white text-gray-700 p-2 rounded-full hover:bg-gray-100 transition cursor-pointer"},ve={class:"mt-2 text-center text-sm text-gray-500"},fe={key:1,class:"p-8 flex flex-col items-center justify-center"},xe={class:"text-sm text-center text-gray-600 mb-1"},ye={class:"text-blue-500 font-medium"},he={class:"text-xs text-gray-400"},we={class:"pt-4 flex justify-center space-x-4"},ke={key:0},De={key:1,class:"pi pi-spinner pi-spin"},Ve={__name:"edite",setup(Te){const U=O(),w=q(),k=H(),{t}=J(),g=p(),l=p(!1),v=p(null),m=p(null),b=p(!1),T=p(U.params.id),c=p({name_en:"",name_ar:""}),A=async()=>{var r,e;try{l.value=!0;const s=await E.get(`/api/brand/${T.value}`);c.value={name_en:s.data.data.name_en,name_ar:s.data.data.name_ar},s.data.data.media&&s.data.data.media.length>0&&(m.value=s.data.data.media[0].url)}catch(s){console.error("Error fetching brand:",s),k.add({severity:"error",summary:t("error"),detail:((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||t("brand.loadError"),life:3e3}),w.push({name:"brand"})}finally{l.value=!1}},R=r=>{r.preventDefault(),b.value=!0},L=()=>{b.value=!1},S=r=>{v.value=r;const e=new FileReader;e.onload=s=>{m.value=s.target.result},e.readAsDataURL(r),b.value=!1},D=r=>{var s,d,f;const e=((s=r.target.files)==null?void 0:s[0])||((f=(d=r.dataTransfer)==null?void 0:d.files)==null?void 0:f[0]);e&&e.type.match("image.*")&&S(e)},$=()=>{v.value=null,m.value=null},M=async()=>{var e,s;l.value=!0;const r=new FormData;r.append("name_en",c.value.name_en),r.append("name_ar",c.value.name_ar),v.value?r.append("image",v.value):m.value||r.append("remove_image","true");try{await E.post(`/api/brand/${T.value}`,r),w.push({name:"brand"}),k.add({severity:"success",summary:t("success"),detail:t("brand.updateSuccess"),life:3e3})}catch(d){console.error("Error updating brand:",d),k.add({severity:"error",summary:t("error"),detail:((s=(e=d.response)==null?void 0:e.data)==null?void 0:s.message)||t("brand.updateError"),life:3e3})}finally{l.value=!1}};return K(()=>{A()}),(r,e)=>{const s=y("InputText"),d=y("Button"),f=y("Form"),P=y("Toast"),z=Q("can");return i(),u(X,null,[W((i(),u("div",Z,[a("h1",ee,n(o(t)("brand.editTitle")),1),_(f,{ref_key:"form",ref:g,onSubmit:h(M,["prevent"]),class:"space-y-6"},{default:B(()=>{var j,C,F,I;return[a("div",ae,[a("div",te,[a("label",se,[V(n(o(t)("brand.nameEn"))+" ",1),e[3]||(e[3]=a("span",{class:"text-red-500"},"*",-1))]),_(s,{id:"name_en",modelValue:c.value.name_en,"onUpdate:modelValue":e[0]||(e[0]=x=>c.value.name_en=x),placeholder:o(t)("brand.enterNameEn"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(C=(j=g.value)==null?void 0:j.errors)!=null&&C.name_en?(i(),u("small",re,n(g.value.errors.name_en[0]),1)):N("",!0)]),a("div",oe,[a("label",ne,[V(n(o(t)("brand.nameAr"))+" ",1),e[4]||(e[4]=a("span",{class:"text-red-500"},"*",-1))]),_(s,{id:"name_ar",modelValue:c.value.name_ar,"onUpdate:modelValue":e[1]||(e[1]=x=>c.value.name_ar=x),placeholder:o(t)("brand.enterNameAr"),dir:"rtl",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"},null,8,["modelValue","placeholder"]),(I=(F=g.value)==null?void 0:F.errors)!=null&&I.name_ar?(i(),u("small",le,n(g.value.errors.name_ar[0]),1)):N("",!0)]),a("div",de,[a("label",ie,n(o(t)("brand.logo")),1),a("div",ue,[a("label",{onDragover:h(R,["prevent"]),onDragleave:L,onDrop:h(D,["prevent"]),class:Y([{"border-blue-500 bg-blue-50":b.value,"border-gray-300":!b.value},"cursor-pointer w-full max-w-md rounded-xl border-2 border-dashed transition-colors duration-300"])},[a("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32),m.value?(i(),u("div",ce,[a("div",pe,[a("img",{src:m.value,alt:"Preview",class:"w-full h-64 object-contain rounded-lg shadow-md transition-transform duration-300 group-hover:scale-105"},null,8,me),a("div",_e,[a("div",ge,[a("button",{type:"button",onClick:h($,["stop"]),class:"bg-red-500 text-white p-2 rounded-full hover:bg-red-600 transition"},e[5]||(e[5]=[a("i",{class:"pi pi-trash text-sm"},null,-1)])),a("label",be,[e[6]||(e[6]=a("i",{class:"pi pi-pencil text-sm"},null,-1)),a("input",{type:"file",onChange:D,accept:"image/*",class:"hidden"},null,32)])])])]),a("p",ve,n(o(t)("brand.changeLogo")),1)])):(i(),u("div",fe,[e[7]||(e[7]=a("div",{class:"bg-blue-100 p-4 rounded-full mb-4"},[a("i",{class:"pi pi-image text-blue-500 text-2xl"})],-1)),a("p",xe,[a("span",ye,n(o(t)("brand.upload")),1),V(" "+n(o(t)("brand.orDragDrop")),1)]),a("p",he,n(o(t)("brand.fileTypes")),1)]))],34)])])]),a("div",we,[_(d,{type:"button",label:o(t)("cancel"),icon:"pi pi-times",onClick:e[2]||(e[2]=x=>o(w).go(-1)),class:"px-6 mx-2 py-3 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:l.value},null,8,["label","disabled"]),_(d,{type:"submit",label:o(t)("brand.update"),icon:"pi pi-check",loading:l.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:l.value},{default:B(()=>[l.value?(i(),u("i",De)):(i(),u("span",ke,n(o(t)("brand.update")),1))]),_:1},8,["label","loading","disabled"])])]}),_:1},512)])),[[z,"edit brands"]]),_(P)],64)}}},Ce=G(Ve,[["__scopeId","data-v-264ef9d3"]]);export{Ce as default};
