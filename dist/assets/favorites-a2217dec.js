import{_ as A,u as H,l as N,z as I,r as v,o as P,e as o,h as n,g as s,A as x,j as c,t as l,F as L,m as F,n as _,b as p,G as M,v as T}from"./index-4d0c7489.js";const V={class:"bg-[#FAF7F0] min-h-screen py-12"},q={class:"mx-auto max-w-7xl px-4"},D={key:0,class:"flex justify-center items-center py-20"},W={key:1,class:"text-center py-20"},E={class:"text-xl font-semibold text-red-600 mb-4"},G={key:2,class:"text-center py-20"},R={class:"text-2xl text-gray-600 mb-6"},J={key:3,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"},K=["onClick"],Q={class:"aspect-square bg-gray-100 relative overflow-hidden"},U=["src","alt"],X=["onClick","aria-label"],Y={key:0,class:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center"},Z={class:"text-white font-bold text-lg"},tt={class:"p-5 flex flex-col flex-grow"},et={class:"font-semibold text-gray-900 text-lg line-clamp-2 mb-2"},st={key:0,class:"text-gray-600 text-sm line-clamp-2 mb-3"},at={class:"flex items-center gap-1 mb-3"},it={class:"text-yellow-500 font-bold text-sm"},ot={class:"text-gray-500 text-xs"},nt={class:"mt-auto flex items-center justify-between"},lt={class:"flex items-baseline gap-2"},rt={class:"text-2xl font-bold text-gray-900"},ct={key:0,class:"text-base line-through text-blue-600 opacity-80"},dt=["onClick","disabled"],ut={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},_t={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gt={key:1,class:"flex items-center mt-3 text-[#0b3baa] text-xs font-medium"},vt={key:4,class:"mt-16 flex justify-center"},ht={class:"inline-flex gap-2","aria-label":"Pagination"},ft=["onClick","disabled","innerHTML"],mt={__name:"favorites",setup(bt){const{t:r,locale:d}=H(),h=N(),y=I(),u=v([]),f=v(!0),g=v(null),m=v({current_page:1,last_page:1,links:[]}),w=a=>Number(a||0).toFixed(2),z=(a,e)=>(a==null?void 0:a.length)>e?a.slice(0,e)+"...":a,O=a=>{if(!a)return 1;const e=a.match(/page=(\d+)/);return e?parseInt(e[1]):1},S=a=>{const e=`/product-details/${a.id}`;window.open(e,"_blank","noopener,noreferrer")},b=async(a=1)=>{if(!y.authenticatedweb){h.push({name:"AuthLogin"});return}f.value=!0,g.value=null;try{const t=(await p.get("/api/wishlists",{params:{page:a,limit:12}})).data.data;u.value=(t.data||[]).map(i=>{var k,C;return{id:i.id,variant_id:i.variant_id||null,name:d.value==="ar"?i.name_ar||i.name_en:i.name_en||i.name_ar,sub_name:d.value==="ar"?i.sub_name_ar||i.sub_name_en:i.sub_name_en||i.sub_name_ar,base_price:parseFloat(i.base_price),total_discounts_value:parseFloat(i.total_discounts_value||0),final_price:Math.max(0,parseFloat(i.base_price)-parseFloat(i.total_discounts_value||0)),img:((C=(k=i.media)==null?void 0:k.find(j=>j.name==="product_main_image"))==null?void 0:C.url)||i.key_default_image||"/placeholder.jpg",total_rating:i.total_rating||"0.0",total_reviews:i.total_reviews||0,in_cart:i.in_cart||!1,is_stock:i.is_stock,isOutOfStock:i.is_stock===0,is_free_shipping:i.is_free_shipping||!1,is_wished:!0}}),m.value={current_page:t.current_page,last_page:t.last_page,links:t.links||[]}}catch(e){g.value=r("favorites.errorLoading"),console.error(e)}finally{f.value=!1}},$=async a=>{if(!y.authenticatedweb)return h.push({name:"AuthLogin"});if(!(a.isOutOfStock||a.in_cart))try{await p.post("/api/cart/add",{product_id:a.id,variant_id:a.variant_id,quantity:1}),a.in_cart=!0}catch{alert(r("cart.error"))}},B=async a=>{try{await p.delete(`/api/wishlists/${a.id}`,{data:{variant_id:a.variant_id}}),u.value=u.value.filter(e=>e.id!==a.id||e.variant_id!==a.variant_id)}catch{alert(r("favorites.errorWishlist"))}};return P(()=>{d.value=localStorage.getItem("appLang")||"ar",b()}),(a,e)=>(o(),n("main",V,[s("section",q,[s("h1",{class:x(["text-4xl font-bold text-center mb-12",{"font-noto-kufi text-right":c(d)==="ar","font-plus-jakarta":c(d)==="en"}])},l(c(r)("favorites.title")),3),f.value?(o(),n("div",D,e[2]||(e[2]=[s("svg",{class:"animate-spin h-10 w-10 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):g.value?(o(),n("div",W,[s("p",E,l(g.value),1),s("button",{onClick:e[0]||(e[0]=t=>b()),class:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition"},l(c(r)("common.retry")),1)])):u.value.length===0?(o(),n("div",G,[s("p",R,l(c(r)("favorites.empty")),1),s("button",{onClick:e[1]||(e[1]=t=>c(h).push({name:"Home"})),class:"bg-[#A6853B] text-white px-8 py-3 rounded-lg hover:bg-[#8f702c] transition"},l(c(r)("favorites.continueShopping")),1)])):(o(),n("div",J,[(o(!0),n(L,null,F(u.value,t=>(o(),n("div",{key:t.id+"-"+(t.variant_id||""),class:"group bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl hover:-translate-y-3 transition-all duration-300 cursor-pointer",onClick:i=>S(t)},[s("div",Q,[s("img",{src:t.img,alt:t.name,class:"w-full h-full object-contain transition-transform duration-700 group-hover:scale-110",loading:"lazy"},null,8,U),e[4]||(e[4]=s("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity"},null,-1)),s("button",{onClick:M(i=>B(t),["stop"]),class:"absolute top-3 right-3 p-2.5 bg-white rounded-full shadow-lg z-10 text-red-500 hover:bg-red-50 transition-all","aria-label":c(r)("favorites.remove")},e[3]||(e[3]=[s("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[s("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),8,X),t.isOutOfStock?(o(),n("div",Y,[s("span",Z,l(c(r)("products.outOfStock")),1)])):_("",!0)]),s("div",tt,[s("h3",et,l(z(t.name,50)),1),t.sub_name?(o(),n("p",st,l(t.sub_name),1)):_("",!0),s("div",at,[s("span",it,l(t.total_rating||"0.0"),1),e[5]||(e[5]=s("svg",{class:"w-4 h-4 text-yellow-500 fill-current",viewBox:"0 0 24 24"},[s("path",{d:"M12 17.27l6.18 3.73-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73-1.64 7.03z"})],-1)),s("span",ot,"("+l(t.total_reviews||0)+")",1)]),s("div",nt,[s("div",lt,[s("span",rt,l(a.$t("currencyLabel"))+" "+l(w(t.final_price)),1),t.total_discounts_value>0?(o(),n("span",ct,l(a.$t("currencyLabel"))+" "+l(w(t.base_price)),1)):_("",!0)]),s("button",{onClick:M(i=>$(t),["stop"]),disabled:t.isOutOfStock,class:x(["p-3 rounded-full transition-all duration-300 shadow-md",[t.in_cart?"bg-[#0b3baa] text-white":t.isOutOfStock?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#A6853B] text-white hover:bg-[#8f702c]"]])},[t.in_cart?(o(),n("svg",ut,e[6]||(e[6]=[s("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):(o(),n("svg",_t,e[7]||(e[7]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.708.707 1.708H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])))],10,dt)]),t.is_free_shipping?(o(),n("div",gt,[e[8]||(e[8]=s("i",{class:"pi pi-truck mr-1"},null,-1)),T(" "+l(a.$t("products.Free_Delivery")),1)])):_("",!0)])],8,K))),128))])),m.value.last_page>1?(o(),n("div",vt,[s("nav",ht,[(o(!0),n(L,null,F(m.value.links,t=>(o(),n("button",{key:t.label,onClick:i=>t.url&&b(O(t.url)),disabled:!t.url,class:x(["px-4 py-2 rounded-full text-sm font-medium transition-colors",t.active?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-100 hover:text-indigo-700 disabled:opacity-50"]),innerHTML:t.label},null,10,ft))),128))])])):_("",!0)])]))}},pt=A(mt,[["__scopeId","data-v-f332bb17"]]);export{pt as default};
