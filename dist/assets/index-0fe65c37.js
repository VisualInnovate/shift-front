import{_ as ee,u as te,G as ae,j as se,r as n,m as le,q as oe,o as ne,a0 as j,a as g,c as w,f as o,h as i,w as r,e,y as m,b as ie,t as d,F,d as re,a1 as de,i as R,T as ce,V as v,a2 as pe,Q as ue,H as ve,a3 as f,p as I,a5 as A,a4 as me,x as ge,g as fe,U as _e,S as be}from"./index-eeb36ec5.js";const he={class:"grid"},ye={class:"col-12"},xe={class:"card p-4 shadow-2 border-round"},ke={class:"text-2xl font-bold"},we={class:"flex gap-2"},Ce={class:"p-input-icon-left"},$e={class:"card shadow-1 surface-0"},Se={class:"text-center py-4"},Ue={class:"text-xl"},Ve={class:"flex justify-content-center align-items-center py-4"},Re={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Te={class:"p-paginator-left-content"},Ee={class:"p-paginator-current"},Ne={class:"p-paginator-right-content"},Me=["disabled"],De=["disabled"],Le=["onClick"],Be={key:1,class:"p-paginator-dots"},Pe=["disabled"],je=["disabled"],Fe={class:"flex align-items-center justify-content-center"},Ie={__name:"index",setup(Ae){const C=te(),_=ae(),{t}=se(),$=n(!0),T=n("");n({});const E=n(null);n(!1),n(!1);const b=n(!1);n(null);const O=n(null),N=n({}),S=n(""),u=n(1),V=n(0),h=n(10),U=n(0),z=n(""),G=n(""),M=n(""),D=n(""),L=n(0),B=n(0),P=n([]),Q=()=>{R.get("/api/export/store",{responseType:"blob"}).then(a=>{const s=new Blob([a.data],{type:"text/csv"}),c=window.URL.createObjectURL(s),p=document.createElement("a");p.href=c,p.setAttribute("download","stores_export.csv"),document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(c),_.add({severity:"success",summary:t("success"),detail:t("store.exportSuccess"),life:3e3})}).catch(a=>{_.add({severity:"error",summary:t("error"),detail:t("store.exportError"),life:3e3}),console.error("Error exporting stores:",a)})},q=a=>{T.value=a,b.value=!0},H=a=>{C.push({name:"store-shipping-settings",params:{id:a}})},W=()=>{R.delete(`/api/store/${T.value}`).then(()=>{y(),b.value=!1,_.add({severity:"success",summary:t("success"),detail:t("store.deletedSuccess"),life:3e3})}).catch(()=>{_.add({severity:"error",summary:t("error"),detail:t("store.deleteError"),life:3e3})})},J=()=>{N.value={global:{value:null,matchMode:de.CONTAINS}}};le(()=>{J()});const K=a=>{C.push({name:"media-links",params:{id:a,type:1}})},y=()=>{$.value=!0,R.get("/api/store",{params:{page:u.value,limit:h.value,search:S.value}}).then(a=>{$.value=!1,E.value=a.data.data.data,V.value=a.data.data.total,U.value=a.data.data.last_page,z.value=a.data.data.first_page_url,G.value=a.data.data.last_page_url,M.value=a.data.data.next_page_url,D.value=a.data.data.prev_page_url,L.value=a.data.data.from,B.value=a.data.data.to,P.value=a.data.data.links}).catch(a=>{$.value=!1,_.add({severity:"error",summary:t("error"),detail:t("store.loadError"),life:3e3}),console.error("Error fetching data:",a)})};oe(S,a=>{u.value=1,y()});const x=a=>{a>=1&&a<=U.value&&(u.value=a,y())},X=a=>{h.value=a.value,u.value=1,y()};ne(()=>{y()});const Y=()=>{C.push({name:"store-create"})},Z=a=>{C.push({name:"store-edit",params:{id:a}})};return(a,s)=>{const c=j("can"),p=j("tooltip");return g(),w("div",he,[o("div",ye,[o("div",xe,[i(e(pe),{class:"mb-4"},{start:r(()=>[o("h2",ke,d(e(t)("store.managementTitle")),1)]),end:r(()=>[o("div",we,[o("span",Ce,[s[8]||(s[8]=o("i",{class:"pi pi-search"},null,-1)),i(e(ce),{modelValue:S.value,"onUpdate:modelValue":s[0]||(s[0]=l=>S.value=l),placeholder:e(t)("store.search")},null,8,["modelValue","placeholder"])]),m(i(e(v),{label:e(t)("store.export"),icon:"pi pi-upload",class:"p-export",onClick:Q},null,8,["label"]),[[c,"list stores"]]),m(i(e(v),{label:e(t)("store.new"),icon:"pi pi-plus",class:"p-button-success",onClick:Y},null,8,["label"]),[[c,"create stores"]])])]),_:1}),i(e(ue)),o("div",$e,[m((g(),ie(e(me),{ref_key:"dt",ref:O,value:E.value,loading:$.value,"data-key":"id",paginator:!1,rows:h.value,filters:N.value,totalRecords:V.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:r(()=>[o("div",Se,[s[9]||(s[9]=o("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),o("p",Ue,d(e(t)("store.noData")),1)])]),loading:r(()=>[o("div",Ve,[i(e(ve),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:r(()=>[i(e(f),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(f),{field:"name_en",header:e(t)("store.nameEn"),sortable:!0},{body:r(l=>[I(d(l.data.name_en),1)]),_:1},8,["header"]),i(e(f),{field:"name_ar",header:e(t)("store.nameAr"),sortable:!0},{body:r(l=>[I(d(l.data.name_ar),1)]),_:1},8,["header"]),i(e(f),{field:"is_default",header:e(t)("store.isDefault"),sortable:!0},{body:r(l=>[i(e(A),{value:l.data.is_default?e(t)("store.yes"):e(t)("store.no"),severity:l.data.is_default?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),i(e(f),{field:"has_market",header:e(t)("store.hasMarket"),sortable:!0},{body:r(l=>[i(e(A),{value:l.data.has_market?e(t)("store.yes"):e(t)("store.no"),severity:l.data.has_market?"success":"info"},null,8,["value","severity"])]),_:1},8,["header"]),i(e(f),{header:e(t)("actions"),headerStyle:"width: 15rem"},{body:r(l=>[m(i(e(v),{icon:"pi pi-pencil",class:"p-detail",onClick:k=>Z(l.data.id)},null,8,["onClick"]),[[c,"edit stores"],[p,e(t)("edit"),void 0,{top:!0}]]),m(i(e(v),{icon:"pi pi-trash",class:"p-delete mx-2",onClick:k=>q(l.data.id)},null,8,["onClick"]),[[c,"delete stores"],[p,e(t)("delete"),void 0,{top:!0}]]),m(i(e(v),{icon:"pi pi-images",class:"p-detail",onClick:k=>K(l.data.id)},null,8,["onClick"]),[[c,"edit inventory"]]),m(i(e(v),{icon:"pi pi-truck",class:"p-button-warning mx-1",onClick:k=>H(l.data.id)},null,8,["onClick"]),[[p,e(t)("store.shippingSettings"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[c,"list stores"]]),o("div",Re,[o("div",Te,[o("span",Ee,d(e(t)("show"))+" "+d(L.value)+" "+d(e(t)("to"))+" "+d(B.value)+" "+d(e(t)("from"))+" "+d(V.value),1)]),o("div",Ne,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:s[1]||(s[1]=l=>x(1))},s[10]||(s[10]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,Me),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!D.value,onClick:s[2]||(s[2]=l=>x(u.value-1))},s[11]||(s[11]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,De),(g(!0),w(F,null,re(P.value,(l,k)=>(g(),w(F,{key:k},[l.label&&!isNaN(l.label)?(g(),w("button",{key:0,class:ge(["p-paginator-page p-paginator-element p-link",{"p-highlight":l.active}]),onClick:Oe=>x(parseInt(l.label))},d(l.label),11,Le)):l.label==="..."?(g(),w("span",Be,"...")):fe("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!M.value,onClick:s[3]||(s[3]=l=>x(u.value+1))},s[12]||(s[12]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Pe),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===U.value,onClick:s[4]||(s[4]=l=>x(U.value))},s[13]||(s[13]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,je),i(e(_e),{filter:"",modelValue:h.value,"onUpdate:modelValue":s[5]||(s[5]=l=>h.value=l),options:[5,10,20,30],optionLabel:"",onChange:X,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),i(e(be),{visible:b.value,"onUpdate:visible":s[7]||(s[7]=l=>b.value=l),style:{width:"450px"},header:e(t)("store.deleteConfirmTitle"),modal:!0},{footer:r(()=>[i(e(v),{label:e(t)("no"),icon:"pi pi-times",class:"p-button-text",onClick:s[6]||(s[6]=l=>b.value=!1)},null,8,["label"]),i(e(v),{variant:a.outline,label:e(t)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:W},null,8,["variant","label"])]),default:r(()=>[o("div",Fe,[s[14]||(s[14]=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),o("span",null,d(e(t)("store.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"])])])])}}},Ge=ee(Ie,[["__scopeId","data-v-87f8d849"]]);export{Ge as default};
