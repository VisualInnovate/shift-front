import{_ as O,G as X,j as Y,r as s,q as Z,o as ee,$ as G,a as m,c as _,f as l,h as n,w as p,e,y as U,b as te,t as d,F as L,d as ae,i as M,S as k,U as V,a1 as le,P as oe,H as ie,a2 as h,p as D,a3 as se,x as ne,g as de,T as re,R as pe}from"./index-7f2022c6.js";const ue={class:"grid"},ce={class:"col-12"},ve={class:"card p-4 shadow-2 border-round"},me={class:"text-2xl font-bold"},fe={class:"flex gap-2"},be={class:"p-input-icon-left"},ge={class:"card shadow-1 surface-0"},_e={class:"text-center py-4"},he={class:"text-xl"},ye={class:"flex justify-content-center align-items-center py-4"},xe={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ne={class:"p-paginator-left-content"},ke={class:"p-paginator-current"},Ve={class:"p-paginator-right-content"},we=["disabled"],Ce=["disabled"],$e=["onClick"],Pe={key:1,class:"p-paginator-dots"},Ue=["disabled"],De=["disabled"],Re={class:"p-fluid"},Se={class:"p-field mb-4"},Te={for:"name"},Ie={class:"p-field mb-4"},Be={for:"title"},Ee={class:"p-field"},Fe={for:"body"},je={__name:"index",setup(Ge){const w=X(),{t:o}=Y(),y=s(!0),R=s([]),S=s(null),q=s({}),x=s("");s(null);const u=s(1),C=s(0),c=s(10),N=s(0),z=s(""),H=s(""),T=s(""),I=s(""),B=s(0),E=s(0),F=s([]),f=s(!1),$=s(null),r=s({name:"",title:"",body:""}),v=s(!1),b=()=>{y.value=!0,M.get("/api/template-notification",{params:{page:u.value,per_page:c.value,search:x.value||void 0}}).then(i=>{R.value=i.data.data.data,C.value=i.data.data.total,N.value=i.data.data.last_page,z.value=i.data.data.first_page_url,H.value=i.data.data.last_page_url,T.value=i.data.data.next_page_url,I.value=i.data.data.prev_page_url,B.value=i.data.data.from,E.value=i.data.data.to,F.value=i.data.data.links,y.value=!1}).catch(i=>{w.add({severity:"error",summary:o("error"),detail:o("templateNotification.loadError"),life:3e3}),y.value=!1,console.error("Error fetching template notifications:",i)})};Z([x,c],()=>{u.value=1,b()});const g=i=>{i>=1&&i<=N.value&&(u.value=i,b())},Q=i=>{c.value=i.value,u.value=1,b()},W=()=>{S.value.exportCSV()},A=i=>{$.value=i.id,r.value.name=i.name,r.value.title=i.title,r.value.body=i.body,f.value=!0},J=()=>{v.value=!0,M.post(`/api/template-notification/${$.value}`,{name:r.value.name,title:r.value.title,body:r.value.body}).then(()=>{w.add({severity:"success",summary:o("success"),detail:o("templateNotification.updateSuccess"),life:3e3}),b(),f.value=!1,r.value={name:"",title:"",body:""},$.value=null}).catch(i=>{w.add({severity:"error",summary:o("error"),detail:o("templateNotification.updateError"),life:3e3})}).finally(()=>{v.value=!1})};return ee(()=>{b()}),(i,t)=>{const P=G("can"),K=G("tooltip");return m(),_("div",ue,[l("div",ce,[l("div",ve,[n(e(le),{class:"mb-4"},{start:p(()=>[l("h2",me,d(e(o)("templateNotification.managementTitle")),1)]),end:p(()=>[l("div",fe,[l("span",be,[t[11]||(t[11]=l("i",{class:"pi pi-search"},null,-1)),n(e(k),{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=a=>x.value=a),placeholder:e(o)("templateNotification.search")},null,8,["modelValue","placeholder"])]),U(n(e(V),{label:e(o)("templateNotification.export"),icon:"pi pi-upload",class:"p-export",onClick:W},null,8,["label"]),[[P,"list template-notification"]])])]),_:1}),n(e(oe)),l("div",ge,[U((m(),te(e(se),{ref_key:"dt",ref:S,value:R.value,loading:y.value,"data-key":"id",paginator:!1,rows:c.value,filters:q.value,totalRecords:C.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:p(()=>[l("div",_e,[t[12]||(t[12]=l("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),l("p",he,d(e(o)("templateNotification.noData")),1)])]),loading:p(()=>[l("div",ye,[n(e(ie),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:p(()=>[n(e(h),{"selection-mode":"multiple","header-style":"width: 3rem"}),n(e(h),{field:"name",header:e(o)("templateNotification.name"),sortable:!0},{body:p(a=>[D(d(a.data.name),1)]),_:1},8,["header"]),n(e(h),{field:"title",header:e(o)("templateNotification.title"),sortable:!0},{body:p(a=>[D(d(a.data.title),1)]),_:1},8,["header"]),n(e(h),{field:"body",header:e(o)("templateNotification.body"),sortable:!0},{body:p(a=>[D(d(a.data.body||"-"),1)]),_:1},8,["header"]),n(e(h),{header:e(o)("actions"),headerStyle:"width: 8rem"},{body:p(a=>[U(n(e(V),{icon:"pi pi-pencil",class:"p-detail",onClick:j=>A(a.data)},null,8,["onClick"]),[[P,"edit template-notification"],[K,e(o)("edit"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading","rows","filters","totalRecords"])),[[P,"list template-notification"]]),l("div",xe,[l("div",Ne,[l("span",ke,d(e(o)("show"))+" "+d(B.value)+" "+d(e(o)("to"))+" "+d(E.value)+" "+d(e(o)("from"))+" "+d(C.value),1)]),l("div",Ve,[l("button",{class:"p-paginator-first p-paginator-element p-link",disabled:u.value===1,onClick:t[1]||(t[1]=a=>g(1))},t[13]||(t[13]=[l("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,we),l("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!I.value,onClick:t[2]||(t[2]=a=>g(u.value-1))},t[14]||(t[14]=[l("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Ce),(m(!0),_(L,null,ae(F.value,(a,j)=>(m(),_(L,{key:j},[a.label&&!isNaN(parseInt(a.label))?(m(),_("button",{key:0,class:ne(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:Le=>g(parseInt(a.label))},d(a.label),11,$e)):a.label==="..."?(m(),_("span",Pe,"...")):de("",!0)],64))),128)),l("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!T.value,onClick:t[3]||(t[3]=a=>g(u.value+1))},t[15]||(t[15]=[l("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Ue),l("button",{class:"p-paginator-last p-paginator-element p-link",disabled:u.value===N.value,onClick:t[4]||(t[4]=a=>g(N.value))},t[16]||(t[16]=[l("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,De),n(e(re),{modelValue:c.value,"onUpdate:modelValue":t[5]||(t[5]=a=>c.value=a),options:[5,10,20,30],onChange:Q,class:"ml-2",style:{width:"80px"}},null,8,["modelValue"])])])]),n(e(pe),{visible:f.value,"onUpdate:visible":t[10]||(t[10]=a=>f.value=a),style:{width:"450px"},header:e(o)("templateNotification.updateTitle"),modal:!0},{footer:p(()=>[n(e(V),{label:e(o)("cancel"),icon:"pi pi-times",class:"p-button-text",disabled:v.value,onClick:t[9]||(t[9]=a=>f.value=!1)},null,8,["label","disabled"]),n(e(V),{label:e(o)("save"),icon:"pi pi-check",class:"p-button-text p-button-success",disabled:v.value,onClick:J},null,8,["label","disabled"])]),default:p(()=>[l("div",Re,[l("div",Se,[l("label",Te,d(e(o)("templateNotification.name")),1),n(e(k),{id:"name",disabled:"true",modelValue:r.value.name,"onUpdate:modelValue":t[6]||(t[6]=a=>r.value.name=a),placeholder:e(o)("templateNotification.name")},null,8,["modelValue","placeholder","disabled"])]),l("div",Ie,[l("label",Be,d(e(o)("templateNotification.title")),1),n(e(k),{id:"title",modelValue:r.value.title,"onUpdate:modelValue":t[7]||(t[7]=a=>r.value.title=a),placeholder:e(o)("templateNotification.title"),disabled:v.value},null,8,["modelValue","placeholder","disabled"])]),l("div",Ee,[l("label",Fe,d(e(o)("templateNotification.body")),1),n(e(k),{id:"body",modelValue:r.value.body,"onUpdate:modelValue":t[8]||(t[8]=a=>r.value.body=a),placeholder:e(o)("templateNotification.body"),disabled:v.value},null,8,["modelValue","placeholder","disabled"])])])]),_:1},8,["visible","header"])])])])}}},qe=O(je,[["__scopeId","data-v-9502420a"]]);export{qe as default};
