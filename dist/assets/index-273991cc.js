import{_ as oe,l as ie,a as re,u as de,r as o,y as ce,o as pe,a1 as ue,e as m,h,g as n,i,w as c,j as e,C as x,f as be,t as r,F as z,m as ve,b as R,U as me,W as p,a3 as ge,k as fe,s as _e,a4 as C,x as P,a5 as he,B as xe,n as M,V as ye,T as W,af as we}from"./index-5811e467.js";const ke={class:"grid"},Ce={class:"col-12"},$e={class:"card p-4 shadow-2 border-round"},Ue={class:"text-2xl font-bold"},Ee={class:"flex gap-2"},Le={class:"p-input-icon-left"},Re={class:"card shadow-1 surface-0"},De={class:"text-center py-4"},Be={class:"text-xl"},Pe={class:"flex justify-content-center align-items-center py-4"},Ve={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},Ne={class:"p-paginator-left-content"},Fe={class:"p-paginator-current"},Ie={class:"p-paginator-right-content"},je=["disabled"],Se=["disabled"],Te=["onClick","aria-label"],Ae={key:1,class:"p-paginator-dots"},Oe=["disabled"],ze=["disabled"],Me={class:"flex align-items-center justify-content-center"},We={class:"flex flex-column gap-3"},qe={key:0,class:"mt-2"},Ge={class:"font-semibold"},Qe={__name:"index",setup(He){const g={mounted(s,a){}},V=ie(),v=re(),{t:l}=de(),$=o(!0),N=o([]),y=o(!1),F=o(null),q=o(null),G=o({}),U=o(""),I=o(null),w=o(!1),u=o(null),E=o(!1),b=o(1),D=o(0),f=o(10),L=o(0),Q=o(""),H=o(""),j=o(""),S=o(""),T=o(0),A=o(0),O=o([]),J=o([{id:"1",brand_name_ar:"ليستر",brand_name_en:"Luster"},{id:"2",brand_name_ar:"لوكس",brand_name_en:"Lux"},{id:"3",brand_name_ar:"مارفلوس",brand_name_en:"Marvelous"}]),_=()=>{$.value=!0,R.get("/api/brand",{params:{page:b.value,limit:f.value,search:U.value||""}}).then(s=>{N.value=s.data.data.data,D.value=s.data.data.total,L.value=s.data.data.last_page,Q.value=s.data.data.first_page_url,H.value=s.data.data.last_page_url,j.value=s.data.data.next_page_url,S.value=s.data.data.prev_page_url,T.value=s.data.data.from,A.value=s.data.data.to,O.value=s.data.data.links,$.value=!1}).catch(s=>{v.add({severity:"error",summary:l("error"),detail:l("brand.loadError"),life:3e3}),$.value=!1,console.error("Error fetching brands:",s)})};ce([U,f],()=>{b.value=1,_()});const k=s=>{s>=1&&s<=L.value&&(b.value=s,_())},K=s=>{f.value=s.value,b.value=1,_()},X=s=>{F.value=s,y.value=!0},Y=()=>{R.delete(`/api/brand/${F.value}`).then(()=>{v.add({severity:"success",summary:l("success"),detail:l("brand.deleteSuccess"),life:3e3}),_(),y.value=!1}).catch(s=>{v.add({severity:"error",summary:l("error"),detail:l("brand.deleteError"),life:3e3}),console.error("Error deleting brand:",s)})},Z=()=>{R.get("/api/export/brands",{responseType:"blob"}).then(s=>{const a=new Blob([s.data],{type:"text/csv"}),d=window.URL.createObjectURL(a),t=document.createElement("a");t.href=d,t.setAttribute("download","brands_export.csv"),document.body.appendChild(t),t.click(),document.body.removeChild(t),window.URL.revokeObjectURL(d)}).catch(s=>{v.add({severity:"error",summary:l("error"),detail:l("brand.exportError"),life:3e3}),console.error("Error exporting brands:",s)})},ee=()=>{const s=`id,Arabic Name,English Name
`+J.value.map(t=>`"${t.id}","${t.brand_name_ar}","${t.brand_name_en}"`).join(`
`),a=new Blob([s],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a");if(d.download!==void 0){const t=URL.createObjectURL(a);d.setAttribute("href",t),d.setAttribute("download","brand_import_example.xlsx"),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(t)}},ae=()=>{w.value=!0,u.value=null},te=s=>{u.value=s.files[0]},le=()=>{if(!u.value){v.add({severity:"warn",summary:l("warning"),detail:l("brand.importNoFile"),life:3e3});return}E.value=!0;const s=new FormData;s.append("file",u.value),R.post("/api/import/brands",s).then(()=>{v.add({severity:"success",summary:l("success"),detail:l("brand.importSuccess"),life:3e3}),_(),w.value=!1,u.value=null;const a=document.querySelector('.p-fileupload input[type="file"]');a&&(a.value="")}).catch(a=>{v.add({severity:"error",summary:l("error"),detail:l("brand.importError"),life:3e3}),console.error("Error importing brands:",a)}).finally(()=>{E.value=!1})},se=()=>{V.push({name:"brand-create"})},ne=s=>{V.push({name:"brand-edit",params:{id:s}})};return pe(()=>{_()}),(s,a)=>{const d=ue("tooltip");return m(),h("div",ke,[n("div",Ce,[n("div",$e,[i(e(ge),{class:"mb-4"},{start:c(()=>[n("h2",Ue,r(e(l)("brand.managementTitle")),1)]),end:c(()=>[n("div",Ee,[n("span",Le,[a[11]||(a[11]=n("i",{class:"pi pi-search"},null,-1)),i(e(me),{modelValue:U.value,"onUpdate:modelValue":a[0]||(a[0]=t=>U.value=t),placeholder:e(l)("brand.search")},null,8,["modelValue","placeholder"])]),x(i(e(p),{label:e(l)("brand.import"),icon:"pi pi-download",class:"other",onClick:ae,"aria-label":"Import brands"},null,8,["label"]),[[g,"import brands"]]),x(i(e(p),{label:e(l)("brand.export"),icon:"pi pi-upload",class:"exite",onClick:Z,"aria-label":"Export brands"},null,8,["label"]),[[g,"export brands"]]),x(i(e(p),{label:e(l)("brand.new"),icon:"pi pi-plus",class:"p-button-success",onClick:se,"aria-label":"Create new brand"},null,8,["label"]),[[g,"create brands"]])])]),_:1}),i(e(fe)),n("div",Re,[x((m(),be(e(he),{ref_key:"dt",ref:q,value:N.value,selection:I.value,"onUpdate:selection":a[1]||(a[1]=t=>I.value=t),loading:$.value,"data-key":"id",paginator:!1,rows:f.value,filters:G.value,totalRecords:D.value,"responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:c(()=>[n("div",De,[a[12]||(a[12]=n("i",{class:"pi pi-exclamation-circle text-2xl mb-2"},null,-1)),n("p",Be,r(e(l)("brand.noData")),1)])]),loading:c(()=>[n("div",Pe,[i(e(_e),{style:{width:"50px",height:"50px"},strokeWidth:"4"})])]),default:c(()=>[i(e(C),{"selection-mode":"multiple","header-style":"width: 3rem"}),i(e(C),{field:"id",header:e(l)("id"),sortable:!0},{body:c(t=>[P(r(t.data.id),1)]),_:1},8,["header"]),i(e(C),{field:"name_en",header:e(l)("brand.nameEn"),sortable:!0},{body:c(t=>[P(r(t.data.name_en),1)]),_:1},8,["header"]),i(e(C),{field:"name_ar",header:e(l)("brand.nameAr"),sortable:!0},{body:c(t=>[P(r(t.data.name_ar),1)]),_:1},8,["header"]),i(e(C),{header:e(l)("actions"),"header-style":"width: 12rem"},{body:c(t=>[x(i(e(p),{icon:"pi pi-pencil",class:"p-detail",onClick:B=>ne(t.data.id),"aria-label":"Edit brand"},null,8,["onClick"]),[[g,"edit brands"],[d,e(l)("edit"),void 0,{top:!0}]]),x(i(e(p),{icon:"pi pi-trash",class:"p-delete",onClick:B=>X(t.data.id),"aria-label":"Delete brand"},null,8,["onClick"]),[[g,"delete brands"],[d,e(l)("delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","selection","loading","rows","filters","totalRecords"])),[[g,"list brands"]]),n("div",Ve,[n("div",Ne,[n("span",Fe,r(e(l)("show"))+" "+r(T.value)+" "+r(e(l)("to"))+" "+r(A.value)+" "+r(e(l)("from"))+" "+r(D.value),1)]),n("div",Ie,[n("button",{class:"p-paginator-first p-paginator-element p-link",disabled:b.value===1,onClick:a[2]||(a[2]=t=>k(1)),"aria-label":"First page"},a[13]||(a[13]=[n("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,je),n("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:!S.value,onClick:a[3]||(a[3]=t=>k(b.value-1)),"aria-label":"Previous page"},a[14]||(a[14]=[n("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,Se),(m(!0),h(z,null,ve(O.value,(t,B)=>(m(),h(z,{key:B},[t.label&&!isNaN(parseInt(t.label))?(m(),h("button",{key:0,class:xe(["p-paginator-page p-paginator-element p-link",{"p-highlight":t.active}]),onClick:Je=>k(parseInt(t.label)),"aria-label":`Page ${t.label}`},r(t.label),11,Te)):t.label==="..."?(m(),h("span",Ae,"...")):M("",!0)],64))),128)),n("button",{class:"p-paginator-next p-paginator-element p-link",disabled:!j.value,onClick:a[4]||(a[4]=t=>k(b.value+1)),"aria-label":"Next page"},a[15]||(a[15]=[n("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,Oe),n("button",{class:"p-paginator-last p-paginator-element p-link",disabled:b.value===L.value,onClick:a[5]||(a[5]=t=>k(L.value)),"aria-label":"Last page"},a[16]||(a[16]=[n("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,ze),i(e(ye),{modelValue:f.value,"onUpdate:modelValue":a[6]||(a[6]=t=>f.value=t),options:[5,10,20,30],onChange:K,class:"ml-2",style:{width:"80px"},"aria-label":"Rows per page"},null,8,["modelValue"])])])]),i(e(W),{visible:y.value,"onUpdate:visible":a[8]||(a[8]=t=>y.value=t),style:{width:"450px"},header:e(l)("brand.deleteConfirmTitle"),modal:!0},{footer:c(()=>[i(e(p),{label:e(l)("no"),icon:"pi pi-times",class:"p-button-text",onClick:a[7]||(a[7]=t=>y.value=!1),"aria-label":"Cancel delete"},null,8,["label"]),i(e(p),{label:e(l)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:Y,"aria-label":"Confirm delete"},null,8,["label"])]),default:c(()=>[n("div",Me,[a[17]||(a[17]=n("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"var(--red-500)"}},null,-1)),n("span",null,r(e(l)("brand.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),i(e(W),{visible:w.value,"onUpdate:visible":a[10]||(a[10]=t=>w.value=t),style:{width:"600px"},header:e(l)("brand.importInstructions"),modal:!0},{footer:c(()=>[i(e(p),{label:e(l)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:a[9]||(a[9]=t=>w.value=!1),"aria-label":"Cancel import"},null,8,["label"]),i(e(p),{label:e(l)("import"),icon:"pi pi-check",class:"p-button-success",onClick:le,disabled:!u.value,loading:E.value,"aria-label":"Import brands"},null,8,["label","disabled","loading"])]),default:c(()=>[n("div",We,[n("div",null,[i(e(p),{label:e(l)("brand.downloadExample"),icon:"pi pi-download",class:"p-button-outlined",onClick:ee,"aria-label":"Download example CSV"},null,8,["label"])]),i(e(we),{mode:"basic",name:"file",accept:".xlsx,.xls,.csv",maxFileSize:1e7,chooseLabel:e(l)("brand.chooseFile"),onSelect:te,auto:!1,disabled:E.value,class:"mb-3"},null,8,["chooseLabel","disabled"]),u.value?(m(),h("div",qe,[n("p",Ge,r(e(l)("selectedFile"))+": "+r(u.value.name),1)])):M("",!0)])]),_:1},8,["visible","header"])])])])}}},Xe=oe(Qe,[["__scopeId","data-v-fa599202"]]);export{Xe as default};
