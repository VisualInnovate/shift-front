import{j as Q,u as H,G as J,r,q as K,m as W,o as X,n as c,a0 as I,a as v,c as b,f as o,h as l,w as p,y as w,b as Y,t as n,e as i,F as S,d as Z,a1 as ee,i as te,p as B,x as ae,g as oe}from"./index-bdc85e85.js";const ne={class:"grid"},se={class:"col-12"},le={class:"card p-4 shadow-2 border-round"},ie={class:"text-2xl font-bold"},re={class:"flex gap-3 align-items-center"},de={class:"p-input-icon-left"},pe={class:"text-center py-6 text-600"},ce={class:"text-xl"},ue={class:"flex justify-content-center py-6"},ve={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},ge={class:"p-paginator-left-content"},me={class:"p-paginator-current"},be={class:"p-paginator-right-content flex align-items-center gap-3"},_e=["disabled"],he=["disabled"],fe=["onClick"],ye={key:1,class:"p-paginator-dots"},xe=["disabled"],we=["disabled"],Ve={__name:"index",setup(Ce){const{t:s}=Q(),M=H(),R=J(),_=r(!0),C=r([]);r(null);const k=r(null),T=r({}),h=r(""),d=r(1),f=r(0),g=r(0),V=r(0),P=r(0),D=r([]),F=()=>{T.value={global:{value:null,matchMode:ee.CONTAINS}}},y=()=>{_.value=!0,te.get("/api/invoice",{params:{page:d.value,limit:10,search:h.value||void 0}}).then(e=>{e.data.is_success&&e.data.data&&(C.value=e.data.data.data,f.value=e.data.data.total,g.value=e.data.data.last_page,V.value=e.data.data.from||0,P.value=e.data.data.to||0,D.value=e.data.data.links||[]),_.value=!1}).catch(e=>{R.add({severity:"error",summary:s("error"),detail:s("invoice.loadError")||"Failed to load invoices",life:4e3}),console.error("Error fetching invoices:",e),_.value=!1})};K(h,()=>{d.value=1,y()});const m=e=>{e>=1&&e<=g.value&&e!==d.value&&(d.value=e,y())},L=()=>{k.value.exportCSV()},E=e=>{M.push({name:"invoice-show",params:{id:e}})};return W(()=>{F()}),X(()=>{y()}),(e,t)=>{const j=c("InputText"),N=c("Button"),G=c("Toolbar"),U=c("Toast"),u=c("Column"),q=c("ProgressSpinner"),z=c("DataTable"),A=c("Dropdown"),x=I("can"),O=I("tooltip");return v(),b("div",ne,[o("div",se,[o("div",le,[l(G,{class:"mb-4"},{start:p(()=>[o("h2",ie,n(i(s)("invoice.managementTitle")||"Invoice Management"),1)]),end:p(()=>[o("div",re,[o("span",de,[t[6]||(t[6]=o("i",{class:"pi pi-search"},null,-1)),l(j,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),placeholder:i(s)("search")+"..."},null,8,["modelValue","placeholder"])]),w(l(N,{label:i(s)("role.export"),icon:"pi pi-upload",class:"p-button-outlined",onClick:L},null,8,["label"]),[[x,"export invoices"]])])]),_:1}),l(U),w((v(),Y(z,{ref_key:"dt",ref:k,value:C.value,loading:_.value,"data-key":"id",paginator:!1,rows:10,filters:T.value,totalRecords:f.value,responsiveLayout:"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:p(()=>[o("div",pe,[t[7]||(t[7]=o("i",{class:"pi pi-inbox text-4xl mb-3"},null,-1)),o("p",ce,n(i(s)("invoice.noData")||"No invoices found"),1)])]),loading:p(()=>[o("div",ue,[l(q)])]),default:p(()=>[l(u,{selectionMode:"multiple",headerStyle:"width: 3rem"}),l(u,{field:"number",header:i(s)("invoice.number"),sortable:""},{body:p(a=>[o("strong",null,n(a.data.number),1)]),_:1},8,["header"]),l(u,{field:"total_price",header:i(s)("invoice.total"),sortable:""},{body:p(a=>[o("strong",null,n(a.data.total_price)+" "+n(e.$t("currencyLabel")),1)]),_:1},8,["header"]),l(u,{field:"sub_total_price",header:i(s)("invoice.subTotal")},{body:p(a=>[B(n(a.data.sub_total_price)+" "+n(e.$t("currencyLabel")),1)]),_:1},8,["header"]),l(u,{field:"tax_fee",header:i(s)("invoice.tax")},{body:p(a=>[B(n(a.data.tax_fee)+" "+n(e.$t("currencyLabel")),1)]),_:1},8,["header"]),l(u,{header:i(s)("actions"),headerStyle:"width: 8rem; text-align: center"},{body:p(a=>[w(l(N,{icon:"pi pi-eye",class:"p-button-rounded p-detail",onClick:$=>E(a.data.id)},null,8,["onClick"]),[[O,i(s)("view"),void 0,{top:!0}],[x,"show invoices"]])]),_:1},8,["header"])]),_:1},8,["value","loading","filters","totalRecords"])),[[x,"list invoices"]]),o("div",ve,[o("div",ge,[o("span",me,n(i(s)("show"))+" "+n(V.value)+" "+n(i(s)("to"))+" "+n(P.value)+" "+n(i(s)("from"))+" "+n(f.value),1)]),o("div",be,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:d.value===1,onClick:t[1]||(t[1]=a=>m(1))},t[8]||(t[8]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,_e),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:d.value===1,onClick:t[2]||(t[2]=a=>m(d.value-1))},t[9]||(t[9]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,he),(v(!0),b(S,null,Z(D.value,(a,$)=>(v(),b(S,{key:$},[a.label&&!isNaN(parseInt(a.label))?(v(),b("button",{key:0,class:ae(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:ke=>m(parseInt(a.label))},n(a.label),11,fe)):a.label==="..."?(v(),b("span",ye,"...")):oe("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:d.value===g.value,onClick:t[3]||(t[3]=a=>m(d.value+1))},t[10]||(t[10]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,xe),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:d.value===g.value,onClick:t[4]||(t[4]=a=>m(g.value))},t[11]||(t[11]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,we),l(A,{modelValue:e.rowsPerPage,"onUpdate:modelValue":t[5]||(t[5]=a=>e.rowsPerPage=a),options:[5,10,20,30,50],onChange:e.changeRowsPerPage,class:"ml-3",style:{width:"80px"}},null,8,["modelValue","onChange"])])])])])])}}};export{Ve as default};
