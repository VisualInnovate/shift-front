import{_ as W,a as q,u as H,r as n,x as J,o as K,a1 as O,e as b,h as g,g as s,i,w as d,j as t,t as r,F as B,m as X,b as F,U as Y,a3 as Z,k as ee,s as te,a4 as D,v as ae,B as E,W as v,a5 as le,A as se,n as I,V as oe,T as j,ad as ie}from"./index-f448e7d3.js";const ne={class:"grid"},re={class:"col-12"},de={class:"card p-4 shadow-2 border-round"},ue={class:"text-2xl font-bold"},ce={class:"flex gap-2"},pe={class:"p-input-icon-left"},ve={class:"card shadow-1 surface-0"},fe={class:"text-center py-4"},me={class:"flex justify-content-center py-4"},he={class:"p-paginator p-component p-paginator-bottom"},be={class:"p-paginator-left-content"},ge={class:"p-paginator-current"},_e={class:"p-paginator-right-content"},ye=["disabled"],ke=["disabled"],xe=["onClick"],we=["disabled"],Ce={class:"flex align-items-center justify-content-center"},$e={key:0,class:"mt-3 font-bold"},Fe={__name:"index",setup(De){const f=q(),{t:a}=H(),_=n(!0),V=n([]),m=n(!1),N=n(null),y=n(""),k=n(!1),c=n(null),x=n(!1),u=n(1),P=n(0),h=n(10),C=n(0),S=n([]),L=n(0),T=n(0),p=()=>{_.value=!0,F.get("/api/shiftmartfile",{params:{page:u.value,limit:h.value,search:y.value||void 0}}).then(o=>{const e=o.data.data;V.value=e.data,P.value=e.total,C.value=e.last_page,S.value=e.links,L.value=e.from,T.value=e.to,_.value=!1}).catch(o=>{f.add({severity:"error",summary:a("error"),detail:a("shiftmart.loadError"),life:3e3}),_.value=!1})};J([y,h],()=>{u.value=1,p()});const w=o=>{o>=1&&o<=C.value&&(u.value=o,p())},R=o=>{h.value=o.value,u.value=1,p()},z=o=>{N.value=o,m.value=!0},A=()=>{F.delete(`/api/shiftmartfile/${N.value}`).then(()=>{f.add({severity:"success",summary:a("success"),detail:a("shiftmart.deleteSuccess"),life:3e3}),p(),m.value=!1}).catch(()=>{f.add({severity:"error",summary:a("error"),detail:a("shiftmart.deleteError"),life:3e3})})},M=o=>{const e=`/api/shiftmartfile/${o}`;window.open(e,"_blank")},G=o=>{c.value=o.files[0]},Q=()=>{if(!c.value)return;x.value=!0;const o=new FormData;o.append("file",c.value),F.post("/api/shiftmartfile",o).then(()=>{f.add({severity:"success",summary:a("success"),detail:a("shiftmart.uploadSuccess"),life:3e3}),p(),k.value=!1}).catch(()=>{f.add({severity:"error",summary:a("error"),detail:a("shiftmart.uploadError"),life:3e3})}).finally(()=>{x.value=!1})};return K(()=>{p()}),(o,e)=>{const U=O("tooltip");return b(),g("div",ne,[s("div",re,[s("div",de,[i(t(Z),{class:"mb-4"},{start:d(()=>[s("h2",ue,r(t(a)("shiftmart.title")),1)]),end:d(()=>[s("div",ce,[s("span",pe,[e[9]||(e[9]=s("i",{class:"pi pi-search"},null,-1)),i(t(Y),{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l),placeholder:t(a)("market.search")},null,8,["modelValue","placeholder"])])])]),_:1}),i(t(ee)),s("div",ve,[i(t(le),{value:V.value,loading:_.value,"data-key":"id","responsive-layout":"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:d(()=>[s("div",fe,r(t(a)("shiftmart.noFiles")),1)]),loading:d(()=>[s("div",me,[i(t(te),{style:{width:"50px",height:"50px"}})])]),default:d(()=>[i(t(D),{field:"id",header:t(a)("shiftmart.id"),sortable:!0,style:{width:"15%"}},null,8,["header"]),i(t(D),{field:"created_at",header:t(a)("shiftmart.createdAt"),sortable:!0},{body:d(l=>[ae(r(new Date(l.data.created_at).toLocaleString()),1)]),_:1},8,["header"]),i(t(D),{header:t(a)("actions"),style:{width:"15rem"}},{body:d(l=>[E(i(t(v),{icon:"pi pi-download",class:"p-button-rounded p-button-info mr-2",onClick:$=>M(l.data.id)},null,8,["onClick"]),[[U,t(a)("shiftmart.download"),void 0,{top:!0}]]),E(i(t(v),{icon:"pi pi-trash",class:"p-button-rounded p-button-danger",onClick:$=>z(l.data.id)},null,8,["onClick"]),[[U,t(a)("shiftmart.delete"),void 0,{top:!0}]])]),_:1},8,["header"])]),_:1},8,["value","loading"]),s("div",he,[s("div",be,[s("span",ge,r(t(a)("showing"))+" "+r(L.value)+" "+r(t(a)("to"))+" "+r(T.value)+" "+r(t(a)("from"))+" "+r(P.value),1)]),s("div",_e,[s("button",{class:"p-paginator-element p-link",disabled:u.value===1,onClick:e[1]||(e[1]=l=>w(1))},e[10]||(e[10]=[s("span",{class:"pi pi-angle-double-left"},null,-1)]),8,ye),s("button",{class:"p-paginator-element p-link",disabled:u.value===1,onClick:e[2]||(e[2]=l=>w(u.value-1))},e[11]||(e[11]=[s("span",{class:"pi pi-angle-left"},null,-1)]),8,ke),(b(!0),g(B,null,X(S.value,(l,$)=>(b(),g(B,{key:$},[isNaN(l.label)?I("",!0):(b(),g("button",{key:0,class:se(["p-paginator-element p-link",{"p-highlight":l.active}]),onClick:Ve=>w(parseInt(l.label))},r(l.label),11,xe))],64))),128)),s("button",{class:"p-paginator-element p-link",disabled:u.value===C.value,onClick:e[3]||(e[3]=l=>w(u.value+1))},e[12]||(e[12]=[s("span",{class:"pi pi-angle-right"},null,-1)]),8,we),i(t(oe),{modelValue:h.value,"onUpdate:modelValue":e[4]||(e[4]=l=>h.value=l),options:[10,20,50],onChange:R,class:"ml-2"},null,8,["modelValue"])])])]),i(t(j),{visible:m.value,"onUpdate:visible":e[6]||(e[6]=l=>m.value=l),style:{width:"450px"},header:t(a)("shiftmart.deleteConfirmTitle"),modal:!0},{footer:d(()=>[i(t(v),{label:t(a)("no"),icon:"pi pi-times",class:"p-button-text",onClick:e[5]||(e[5]=l=>m.value=!1)},null,8,["label"]),i(t(v),{label:t(a)("yes"),icon:"pi pi-check",class:"p-button-text p-button-danger",onClick:A},null,8,["label"])]),default:d(()=>[s("div",Ce,[e[13]||(e[13]=s("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem",color:"red"}},null,-1)),s("span",null,r(t(a)("shiftmart.deleteConfirmMessage")),1)])]),_:1},8,["visible","header"]),i(t(j),{visible:k.value,"onUpdate:visible":e[8]||(e[8]=l=>k.value=l),style:{width:"500px"},header:t(a)("shiftmart.uploadFile"),modal:!0},{footer:d(()=>[i(t(v),{label:t(a)("cancel"),icon:"pi pi-times",class:"p-button-text",onClick:e[7]||(e[7]=l=>k.value=!1)},null,8,["label"]),i(t(v),{label:t(a)("shiftmart.uploadFile"),icon:"pi pi-check",class:"p-button-success",onClick:Q,loading:x.value,disabled:!c.value},null,8,["label","loading","disabled"])]),default:d(()=>[i(t(ie),{mode:"basic",name:"file",auto:!1,onSelect:G,disabled:x.value,class:"w-full",chooseLabel:t(a)("shiftmart.chooseFile")},null,8,["disabled","chooseLabel"]),c.value?(b(),g("div",$e,r(c.value.name),1)):I("",!0)]),_:1},8,["visible","header"])])])])}}},Pe=W(Fe,[["__scopeId","data-v-9ab8e4d9"]]);export{Pe as default};
