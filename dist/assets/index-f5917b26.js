import{u as Q,b as H,c as J,r,z as K,y as W,o as X,q as c,a1 as B,e as v,f as b,g as o,h as s,w as p,B as w,v as Y,t as n,i,F as I,m as Z,a2 as ee,p as te,k as S,n as ae,l as oe}from"./index-7b82f61b.js";const ne={class:"grid"},le={class:"col-12"},se={class:"card p-4 shadow-2 border-round"},ie={class:"text-2xl font-bold"},re={class:"flex gap-3 align-items-center"},de={class:"p-input-icon-left"},pe={class:"text-center py-6 text-600"},ce={class:"text-xl"},ue={class:"flex justify-content-center py-6"},ve={class:"p-paginator p-component p-unselectable-text p-paginator-bottom"},ge={class:"p-paginator-left-content"},me={class:"p-paginator-current"},be={class:"p-paginator-right-content flex align-items-center gap-3"},_e=["disabled"],he=["disabled"],fe=["onClick"],ye={key:1,class:"p-paginator-dots"},xe=["disabled"],we=["disabled"],Ve={__name:"index",setup(ke){const{t:l}=Q(),M=H(),R=J(),_=r(!0),k=r([]);r(null);const C=r(null),T=r({}),h=r(""),d=r(1),f=r(0),g=r(0),V=r(0),P=r(0),D=r([]),F=()=>{T.value={global:{value:null,matchMode:ee.CONTAINS}}},y=()=>{_.value=!0,te.get("/api/invoice",{params:{page:d.value,limit:10,search:h.value||void 0}}).then(e=>{e.data.is_success&&e.data.data&&(k.value=e.data.data.data,f.value=e.data.data.total,g.value=e.data.data.last_page,V.value=e.data.data.from||0,P.value=e.data.data.to||0,D.value=e.data.data.links||[]),_.value=!1}).catch(e=>{R.add({severity:"error",summary:l("error"),detail:l("invoice.loadError")||"Failed to load invoices",life:4e3}),console.error("Error fetching invoices:",e),_.value=!1})};K(h,()=>{d.value=1,y()});const m=e=>{e>=1&&e<=g.value&&e!==d.value&&(d.value=e,y())},L=()=>{C.value.exportCSV()},E=e=>{M.push({name:"invoice-show",params:{id:e}})};return W(()=>{F()}),X(()=>{y()}),(e,t)=>{const z=c("InputText"),N=c("Button"),U=c("Toolbar"),j=c("Toast"),u=c("Column"),q=c("ProgressSpinner"),A=c("DataTable"),G=c("Dropdown"),x=B("can"),O=B("tooltip");return v(),b("div",ne,[o("div",le,[o("div",se,[s(U,{class:"mb-4"},{start:p(()=>[o("h2",ie,n(i(l)("invoice.managementTitle")||"Invoice Management"),1)]),end:p(()=>[o("div",re,[o("span",de,[t[6]||(t[6]=o("i",{class:"pi pi-search"},null,-1)),s(z,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),placeholder:i(l)("search")+"..."},null,8,["modelValue","placeholder"])]),w(s(N,{label:i(l)("role.export"),icon:"pi pi-upload",class:"p-button-outlined",onClick:L},null,8,["label"]),[[x,"export invoices"]])])]),_:1}),s(j),w((v(),Y(A,{ref_key:"dt",ref:C,value:k.value,loading:_.value,"data-key":"id",paginator:!1,rows:10,filters:T.value,totalRecords:f.value,responsiveLayout:"scroll",stripedRows:"",showGridlines:"",class:"p-datatable-sm"},{empty:p(()=>[o("div",pe,[t[7]||(t[7]=o("i",{class:"pi pi-inbox text-4xl mb-3"},null,-1)),o("p",ce,n(i(l)("invoice.noData")||"No invoices found"),1)])]),loading:p(()=>[o("div",ue,[s(q)])]),default:p(()=>[s(u,{selectionMode:"multiple",headerStyle:"width: 3rem"}),s(u,{field:"number",header:i(l)("invoice.number"),sortable:""},{body:p(a=>[o("strong",null,n(a.data.number),1)]),_:1},8,["header"]),s(u,{field:"total_price",header:i(l)("invoice.total"),sortable:""},{body:p(a=>[o("strong",null,n(a.data.total_price)+" "+n(e.$t("currencyLabel")),1)]),_:1},8,["header"]),s(u,{field:"sub_total_price",header:i(l)("invoice.subTotal")},{body:p(a=>[S(n(a.data.sub_total_price)+" "+n(e.$t("currencyLabel")),1)]),_:1},8,["header"]),s(u,{field:"tax_fee",header:i(l)("invoice.tax")},{body:p(a=>[S(n(a.data.tax_fee)+" "+n(e.$t("currencyLabel")),1)]),_:1},8,["header"]),s(u,{header:i(l)("actions"),headerStyle:"width: 8rem; text-align: center"},{body:p(a=>[w(s(N,{icon:"pi pi-eye",class:"p-button-rounded p-detail",onClick:$=>E(a.data.id)},null,8,["onClick"]),[[O,i(l)("view"),void 0,{top:!0}],[x,"show invoices"]])]),_:1},8,["header"])]),_:1},8,["value","loading","filters","totalRecords"])),[[x,"list invoices"]]),o("div",ve,[o("div",ge,[o("span",me,n(i(l)("show"))+" "+n(V.value)+" "+n(i(l)("to"))+" "+n(P.value)+" "+n(i(l)("from"))+" "+n(f.value),1)]),o("div",be,[o("button",{class:"p-paginator-first p-paginator-element p-link",disabled:d.value===1,onClick:t[1]||(t[1]=a=>m(1))},t[8]||(t[8]=[o("span",{class:"p-paginator-icon pi pi-angle-double-left"},null,-1)]),8,_e),o("button",{class:"p-paginator-prev p-paginator-element p-link",disabled:d.value===1,onClick:t[2]||(t[2]=a=>m(d.value-1))},t[9]||(t[9]=[o("span",{class:"p-paginator-icon pi pi-angle-left"},null,-1)]),8,he),(v(!0),b(I,null,Z(D.value,(a,$)=>(v(),b(I,{key:$},[a.label&&!isNaN(parseInt(a.label))?(v(),b("button",{key:0,class:ae(["p-paginator-page p-paginator-element p-link",{"p-highlight":a.active}]),onClick:Ce=>m(parseInt(a.label))},n(a.label),11,fe)):a.label==="..."?(v(),b("span",ye,"...")):oe("",!0)],64))),128)),o("button",{class:"p-paginator-next p-paginator-element p-link",disabled:d.value===g.value,onClick:t[3]||(t[3]=a=>m(d.value+1))},t[10]||(t[10]=[o("span",{class:"p-paginator-icon pi pi-angle-right"},null,-1)]),8,xe),o("button",{class:"p-paginator-last p-paginator-element p-link",disabled:d.value===g.value,onClick:t[4]||(t[4]=a=>m(g.value))},t[11]||(t[11]=[o("span",{class:"p-paginator-icon pi pi-angle-double-right"},null,-1)]),8,we),s(G,{modelValue:e.rowsPerPage,"onUpdate:modelValue":t[5]||(t[5]=a=>e.rowsPerPage=a),options:[5,10,20,30,50],onChange:e.changeRowsPerPage,class:"ml-3",style:{width:"80px"}},null,8,["modelValue","onChange"])])])])])])}}};export{Ve as default};
