import{_ as q,u as B,r as c,l as E,p as F,c as I,o as z,J as M,x as $,e as r,h as n,g as o,t as h,j as D,F as v,m as b,b as R,A as L,n as j}from"./index-5353bf79.js";const V={class:"mx-auto px-4 max-w-[1500px]"},A={key:0,class:"flex justify-center items-center py-16"},N={key:1,class:"text-center py-16 text-red-600"},H={class:"text-lg font-semibold"},J=["onClick","aria-label"],U={class:"w-full overflow-hidden rounded-xl shadow-sm relative bg-gray-100 aspect-square"},W=["src","alt"],G={class:"font-sans mt-4 mb-1 text-center mx-3 text-gray-800 font-medium xs:text-sm sm:text-base md:text-lg w-full truncate"},K={key:0,class:"flex justify-center items-center pt-8"},O={class:"inline-flex gap-2","aria-label":"Pagination"},Q=["onClick","aria-current"],X={__name:"media-category",props:{title:{type:String,default:""}},setup(Y){const{t:y}=B(),g=c(localStorage.getItem("appLang")||"ar"),w=c([]),f=c(!0),m=c(null),k=E(),i=F(),_=c({current_page:1,last_page:1,next_page_url:null,prev_page_url:null,links:[]}),d=c(parseInt(i.query.page)||1),C=c(!1),x=()=>{typeof window<"u"&&(C.value=window.innerWidth<768)},T=I(()=>C.value?8:15);z(()=>{x(),typeof window<"u"&&window.addEventListener("resize",x)}),M(()=>{typeof window<"u"&&window.removeEventListener("resize",x)});const p=async(a,s=1)=>{if(!a)return;f.value=!0,m.value=null;const u=`/api/home/get-media-link/details/${i.params.id}?limit=${T.value}&page=${s}`;try{const t=(await R.get(u)).data.data;_.value={current_page:t.details.current_page,last_page:t.details.last_page,next_page_url:t.details.next_page_url,prev_page_url:t.details.prev_page_url,links:t.details.links},d.value=t.details.current_page,w.value=[{id:a,name_ar:t.name_ar||y("home.customTabTitle",{number:a}),name_en:t.name_en||y("home.customTabTitle",{number:a}),type:t.type,row_type:t.type===1?1:2,details:(t.details.data||[]).map(l=>({id:l.id,name_ar:l.name_ar,name_en:l.name_en,has_subcategories:l.has_subcategories,media:l.media}))}]}catch(e){console.error("Error fetching custom tabs:",e),m.value=y("error.fetchFailed")||"Failed to load custom content."}finally{f.value=!1,k.push({query:{...i.query}}).catch(()=>{})}},P=(a,s,u)=>{let e;a?e="subcategory":e="produts_category",k.push({name:e,params:{id:s}})},S=a=>{a>=1&&a<=_.value.last_page&&p(i.params.id,a)};return z(()=>{p(i.params.id,d.value)}),$(()=>i.params.id,a=>{a&&(d.value=1,p(a,1))}),$(T,(a,s)=>{a!==s&&(d.value=1,p(i.params.id,1))}),(a,s)=>(r(),n("div",V,[f.value?(r(),n("div",A,s[1]||(s[1]=[o("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):m.value?(r(),n("div",N,[o("p",H,h(m.value),1),o("button",{onClick:s[0]||(s[0]=u=>p(D(i).params.id,d.value)),class:"mt-4 bg-indigo-600 text-white px-4 py-2 rounded"}," Retry ")])):(r(!0),n(v,{key:2},b(w.value,u=>(r(),n("div",{key:u.id,class:"m-auto max-w-7xl"},[o("div",{class:L(["mt-6 grid gap-x-4 gap-y-8",u.row_type===1?"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-5":"grid-cols-2 md:grid-cols-3 lg:grid-cols-5 xl:grid-cols-5"])},[(r(!0),n(v,null,b(u.details,(e,t)=>{var l;return r(),n("div",{key:t,class:"group flex flex-col items-start cursor-pointer transition-all pb-[1%] rounded-lg shadow-lg duration-300 hover:-translate-y-2 h-auto",onClick:Z=>P(e.has_subcategories,e.id,g.value==="ar"?e.name_ar:e.name_en),"aria-label":`Maps to ${g.value==="ar"?e.name_ar:e.name_en}`},[o("div",U,[o("img",{src:((l=e.media[0])==null?void 0:l.url)||"/placeholder.jpg",alt:g.value==="ar"?e.name_ar:e.name_en,class:"w-full h-full object-contain transition-transform duration-500 group-hover:scale-110",loading:"lazy"},null,8,W),s[2]||(s[2]=o("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-300"},null,-1))]),o("p",G,h(g.value==="ar"?e.name_ar:e.name_en),1)],8,J)}),128))],2),_.value.last_page>1?(r(),n("div",K,[o("nav",O,[(r(!0),n(v,null,b(_.value.links,(e,t)=>(r(),n(v,{key:t},[e.url&&!["« Previous","Next »"].includes(e.label)?(r(),n("button",{key:0,onClick:l=>S(parseInt(e.label)),"aria-current":e.active?"page":void 0,class:L(["px-4 py-2 rounded-full text-sm font-medium transition-colors duration-200",e.active?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-indigo-100 hover:text-indigo-700"])},h(e.label),11,Q)):j("",!0)],64))),128))])])):j("",!0)]))),128))]))}},ae=q(X,[["__scopeId","data-v-d1162d23"]]);export{ae as default};
