import{_ as S,a as C,u as P,p as D,C as T,r as g,o as j,c as u,d,f as a,v as B,t as f,h as o,F as v,k as m,m as y,g as M,D as O,G as F,a1 as K}from"./index-df21bae4.js";const N={class:"bg-gray-900 min-h-screen flex items-center justify-center p-4 overflow-hidden",dir:"rtl"},R={class:"bg-white rounded-3xl shadow-2xl p-6 w-full max-w-sm my-8 text-center"},E={class:"space-y-6"},L={class:"text-2xl font-bold text-gray-800"},U={class:"text-sm text-gray-500"},$={class:"flex justify-center space-x-2 space-x-reverse"},A=["onUpdate:modelValue","onInput","onKeydown","aria-label"],G={key:0,class:"text-red-500 text-sm w-full text-center"},H=["disabled","aria-label"],q={class:"text-sm text-gray-500 mt-4"},z=["disabled","aria-label"],J={key:1,class:"text-green-500 text-sm mt-2"},Q={__name:"otp",props:{email:String,phone:String,otp_type:String},setup(b){const{t:s}=C(),x=P();D();const n=T(),l=g(["","","","","",""]),h=g([]),i=g([]),e=b;j(()=>{if(!e.email&&!e.phone){i.value=[s("otpVerification.invalidInfo")],x.push({name:"authlog"});return}console.log("OTP Page Props:",{email:e.email,phone:e.phone,otp_type:e.otp_type}),h.value.length>0&&h.value[0].focus()});const w=(t,r)=>{const _=r.target.value.replace(/[^0-9]/g,"");l.value[t]=_.slice(0,1),_&&t<l.value.length-1&&h.value[t+1].focus()},V=t=>{t>0&&l.value[t]===""&&h.value[t-1].focus()},k=async()=>{i.value=[];const t=l.value.join("");if(console.log("Verifying OTP with Props:",{email:e.email,phone:e.phone,otp_type:e.otp_type,otp:t}),t.length!==6||!/^\d{6}$/.test(t)){i.value=[s("otpVerification.invalidOtp")];return}const r=await n.verifyEmail({otp_type:e.otp_type,email:e.email,phone:e.phone,otp:t});r.is_success||(i.value=r.errors)},I=async()=>{i.value=[],console.log("Resending Code with Props:",{email:e.email,phone:e.phone,otp_type:e.otp_type});const t=await n.resendOtp({email:e.email,phone:e.phone,otp_type:e.otp_type});t.is_success||(i.value=t.errors)};return(t,r)=>(u(),d("div",N,[a("div",R,[r[0]||(r[0]=a("div",{class:"flex flex-col items-center mb-8"},[a("img",{src:B,alt:"SHIFT7 Logo",class:"h-16 w-16 object-contain"})],-1)),a("div",E,[a("h2",L,f(o(s)("otpVerification.title")),1),a("p",U,f(o(s)("otpVerification.otpSent")),1),a("div",$,[(u(!0),d(v,null,m(l.value,(_,c)=>O((u(),d("input",{key:c,type:"text",maxlength:"1",pattern:"[0-9]",class:"w-12 h-12 text-center text-xl font-bold rounded-xl bg-gray-100 border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow","onUpdate:modelValue":p=>l.value[c]=p,onInput:p=>w(c,p),onKeydown:K(p=>V(c),["backspace"]),ref_for:!0,ref:p=>{p&&(h.value[c]=p)},"aria-label":o(s)("otpVerification.otpDigit",{number:c+1})},null,40,A)),[[F,l.value[c]]])),128))]),i.value.length?(u(),d("div",G,[(u(!0),d(v,null,m(i.value,_=>(u(),d("p",{class:"text-red-500 text-sm w-full text-center",key:_},f(_),1))),128))])):y("",!0),a("button",{onClick:k,disabled:o(n).loading,class:"w-full mt-6 py-3 bg-blue-700 text-white font-bold rounded-xl shadow-lg hover:bg-blue-800 transition-colors duration-300 disabled:bg-gray-400","aria-label":o(s)("otpVerification.verify")},f(o(n).loading?o(s)("otpVerification.verifying"):o(s)("otpVerification.verify")),9,H),a("div",q,[M(f(o(s)("otpVerification.noCode"))+" ",1),a("button",{onClick:I,disabled:o(n).loading,class:"text-blue-600 font-semibold hover:underline","aria-label":o(s)("otpVerification.resend")},f(o(n).loading?o(s)("otpVerification.resending"):o(s)("otpVerification.resend")),9,z)]),o(n).successMsg?(u(),d("div",J,f(o(n).successMsg),1)):y("",!0)])])]))}},X=S(Q,[["__scopeId","data-v-498455f9"]]);export{X as default};
