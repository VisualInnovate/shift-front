import{_ as ie,j as ue,k as ce,u as de,v as ve,G as _e,r as g,l as f,q as pe,o as ge,a as n,c as i,h as w,e as r,f as t,t as o,g as d,F as z,d as I,p as me,x as J,y as he,A as xe,i as R,H as fe,I as $,J as ye}from"./index-bdc85e85.js";import{P as be}from"./ProductOffers-6222378c.js";const we={class:"product-page max-w-7xl mx-auto p-4 lg:p-8"},ke={key:0,class:"text-center py-20"},Oe={class:"mt-4 text-gray-600"},Se={key:1,class:"text-red-500 text-center py-10 text-lg"},Ce={key:2,class:"flex flex-col lg:flex-row items-start gap-8 lg:gap-12"},De={class:"w-full lg:w-1/2 flex flex-col-reverse lg:flex-row items-center gap-4"},Ae={class:"flex lg:flex-col flex-row items-center justify-center lg:justify-start gap-3 w-full lg:w-1/4 order-2 lg:order-1"},Be=["src","alt","onClick"],Ve={class:"w-full lg:w-3/4 order-1 lg:order-2"},Fe={class:"relative w-full aspect-square shadow-xl rounded-2xl overflow-hidden bg-gray-50"},qe={key:0,class:"absolute top-4 left-4 z-10 bg-black text-white text-xs font-bold px-4 py-2 rounded-full uppercase tracking-wider shadow-lg"},Re={key:1,class:"absolute top-4 right-4 z-10 bg-green-600 text-white text-xs font-bold px-4 py-2 rounded-full flex items-center gap-2 shadow-lg"},$e=["src","alt"],je={class:"w-full lg:w-1/2"},Ee={class:"bg-white rounded-2xl shadow-lg p-6 lg:p-8"},Te={class:"flex flex-wrap gap-3 mb-6"},Le={class:"text-3xl lg:text-4xl font-bold text-gray-800 mb-3 leading-tight"},ze={key:0,class:"text-xl text-gray-600 mb-6"},Ie={class:"flex items-center gap-3 mb-6"},Me={class:"text-gray-600"},Pe={class:"mb-8"},Ue={class:"flex items-baseline gap-4 flex-wrap"},Ne={class:"text-4xl font-bold text-gray-900"},Qe={key:0,class:"text-2xl font-bold text-[#0b3baa] line-through opacity-80"},Ge={key:1,class:"bg-red-100 text-red-800 text-sm font-bold px-3 py-1 rounded-full"},He={key:1,class:"flex items-center gap-6 mb-8"},Je={class:"font-bold text-gray-700 text-lg"},We={class:"flex items-center border-2 border-gray-300 rounded-xl overflow-hidden select-none"},Ye=["disabled"],Ke={class:"px-8 py-3 font-semibold text-lg border-x-2 border-gray-300 min-w-20 text-center"},Xe=["disabled"],Ze=["disabled"],et={key:0,class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},tt={key:1},st={key:2},at={key:3},lt={key:2,class:"text-red-600 font-semibold text-center mt-4"},ot={key:3,class:"bg-[#E6AC312B] px-8 py-10 rounded-2xl mt-12"},rt={class:"text-gray-700 leading-relaxed text-base"},nt={key:4,class:"mt-12 p-8 bg-white rounded-2xl shadow-xl"},it={class:"text-3xl font-bold text-center text-gray-800 mb-10"},ut={class:"grid md:grid-cols-3 gap-8 mb-12"},ct={class:"text-center"},dt={class:"text-6xl font-bold text-gray-800"},vt={class:"text-gray-500"},_t={class:"md:col-span-2 space-y-3"},pt={class:"w-8 text-sm font-medium"},gt={class:"flex-1 bg-gray-200 rounded-full h-4 relative overflow-hidden"},mt={class:"text-sm text-gray-600 w-12 text-right"},ht={class:"mt-12 border-t pt-12"},xt={class:"text-2xl font-bold text-center mb-8"},ft={key:0,class:"max-w-2xl mx-auto space-y-6"},yt={class:"text-center"},bt=["placeholder"],wt=["disabled"],kt={key:0,class:"text-red-500 text-center font-medium"},Ot={key:1,class:"text-center py-12 bg-gray-50 rounded-2xl"},St={class:"text-gray-600 mb-6 text-lg"},Ct={key:0,class:"mt-12 space-y-8"},Dt={class:"text-2xl font-bold text-gray-800 border-b pb-4"},At={class:"flex items-center justify-between mb-4"},Bt={class:"flex items-center gap-4"},Vt={class:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center text-xl font-bold text-gray-600"},Ft={class:"font-semibold text-lg"},qt={class:"text-sm text-gray-500"},Rt={class:"text-gray-700 leading-relaxed pl-16"},$t={key:0,class:"text-center mt-8"},jt={class:"text-[#A6853B] font-bold hover:underline"},Et={key:1,class:"text-center py-16 text-gray-500 text-lg"},Tt={key:5,class:"mt-12"},Lt={__name:"product-details",setup(zt){const{t:s,locale:h}=ue(),j=ce(),k=de(),B=ve(),O=_e(),e=g({}),E=g([]),S=g(""),y=g(1),b=g(!0),x=g(null),C=g(!1),D=g(!1),v=g([]),V=g(!1),F=g(!1),A=g(null),p=g({rating:2,comment:""}),M=f(()=>(e.value.total_discounts_value||0)>0),W=f(()=>{const a=parseFloat(e.value.base_price||0),l=parseFloat(e.value.total_discounts_value||0);return a?Math.round(l/a*100):0}),P=a=>parseFloat(a||0).toFixed(2),q=f(()=>h.value==="en"?e.value.description_en||s("product.noDescription"):e.value.description_ar||s("product.noDescription")),U=f(()=>q.value.length>300),Y=f(()=>U.value?q.value.slice(0,300)+"...":q.value),T=f(()=>v.value.length?v.value.reduce((l,c)=>l+c.rate,0)/v.value.length:0),K=f(()=>{const a={5:0,4:0,3:0,2:0,1:0};v.value.forEach(c=>a[c.rate]++);const l=v.value.length;return[5,4,3,2,1].map(c=>({stars:c,count:a[c],percentage:l?Math.round(a[c]/l*100):0}))}),X=f(()=>v.value.slice(0,5)),Z=a=>S.value=a,ee=()=>V.value=!V.value,te=a=>a?new Date(a).toLocaleDateString(h.value==="ar"?"ar-EG":"en-US",{year:"numeric",month:"short",day:"numeric"}):"",se=async()=>{var a,l;if(!B.authenticatedweb)return k.push({name:"authlog"});if(!(e.value.isOutOfStock||C.value)){C.value=!0;try{await R.post("/api/cart/add",{product_id:e.value.id,variant_id:e.value.variant_id||null,quantity:1}),e.value.in_cart=!0,y.value=1,O.add({severity:"success",summary:s("success"),detail:s("cart.added"),life:3e3})}catch(c){O.add({severity:"error",detail:((l=(a=c.response)==null?void 0:a.data)==null?void 0:l.message)||s("cart.error"),life:3e3})}finally{C.value=!1}}},N=async a=>{if(!B.authenticatedweb||D.value||e.value.isOutOfStock)return;const l=a==="plus"?y.value+1:y.value-1;if(!(l<1)){D.value=!0;try{await R.post("/api/cart/update",{product_id:e.value.id,variant_id:e.value.variant_id||null,quantity:l}),y.value=l,O.add({severity:"success",detail:s(a==="plus"?"cart.quantityIncreased":"cart.quantityDecreased"),life:2e3})}catch{O.add({severity:"error",detail:s("cart.quantityError"),life:3e3})}finally{D.value=!1}}},ae=()=>{e.value.in_cart||e.value.isOutOfStock||se()},le=async()=>{var a,l,c;if(p.value.rating===0||!p.value.comment.trim()){A.value=s("reviews.requiredFields");return}F.value=!0,A.value=null;try{const m={model_id:j.params.id,rate:p.value.rating,type:"product",message:p.value.comment.trim()},{data:_}=await R.post("/api/review",m);_.is_success&&(v.value.unshift({id:_.data.id||Date.now(),rate:p.value.rating,message:p.value.comment.trim(),user:{name:((a=B.user)==null?void 0:a.name)||"You"},created_at:new Date().toISOString()}),p.value={rating:0,comment:""},O.add({severity:"success",summary:s("success"),detail:s("reviews.submitSuccess"),life:4e3}))}catch(m){A.value=((c=(l=m.response)==null?void 0:l.data)==null?void 0:c.message)||s("reviews.submitError")}finally{F.value=!1}},oe=a=>a&&k.push(a.has_subcategories?{name:"subcategory",params:{id:a.id}}:{name:"produts_category",params:{id:a.id}}),re=a=>a&&k.push({name:"products-brand",params:{id:a.id}}),ne=a=>a&&k.push(a.has_market?{name:"stores-hasmarket"}:{name:"home"}),Q=async()=>{var a,l,c;b.value=!0,x.value=null;try{const{data:m}=await R.get(`/api/home/product-details/${j.params.id}`);if(m.is_success){const _=m.data.product;e.value={..._,in_cart:!!_.in_cart,isOutOfStock:_.is_stock===0},E.value=_.media||[],S.value=((a=E.value[0])==null?void 0:a.url)||_.key_default_image||"",v.value=_.reviews||[],y.value=_.in_cart&&_.quantity||1}else x.value=s("product.notFound")}catch(m){x.value=((c=(l=m.response)==null?void 0:l.data)==null?void 0:c.message)||s("product.loadError")}finally{b.value=!1}};return pe(()=>j.params.id,a=>{a&&(Q(),window.scrollTo(0,0))}),ge(()=>{window.scrollTo(0,0),Q()}),(a,l)=>{var c,m,_,G;return n(),i("div",we,[b.value?(n(),i("div",ke,[w(r(fe),{style:{width:"50px",height:"50px"},strokeWidth:"4"}),t("p",Oe,o(r(s)("loading")),1)])):d("",!0),x.value?(n(),i("div",Se,o(x.value),1)):(n(),i("header",Ce,[t("div",De,[t("div",Ae,[(n(!0),i(z,null,I(E.value,u=>(n(),i("img",{key:u.url,src:u.url,alt:r(s)("product.thumbnailAlt"),class:J(["h-20 w-20 object-cover rounded-lg cursor-pointer border-2 transition-all duration-200 hover:border-blue-500",{"border-blue-500 opacity-100":S.value===u.url,"border-gray-300 opacity-70":S.value!==u.url}]),onClick:L=>Z(u.url)},null,10,Be))),128))]),t("div",Ve,[t("div",Fe,[e.value.is_best_seller?(n(),i("div",qe," Best Seller ")):d("",!0),e.value.is_free_shipping?(n(),i("div",Re,[l[8]||(l[8]=t("i",{class:"pi pi-truck"},null,-1)),me(" "+o(r(s)("products.Free_Delivery")),1)])):d("",!0),t("img",{src:S.value||e.value.key_default_image,alt:r(h)==="en"?e.value.name_en:e.value.name_ar,class:"w-full h-full object-cover transition-transform duration-700 hover:scale-105",loading:"lazy"},null,8,$e)])])]),t("div",je,[t("div",Ee,[t("section",Te,[e.value.store_id?(n(),i("span",{key:0,onClick:l[0]||(l[0]=u=>ne(e.value.store)),class:"sub-tiles cursor-pointer"},o(r(h)==="en"?(c=e.value.store)==null?void 0:c.name_en:((m=e.value.store)==null?void 0:m.name_ar)||r(s)("store.default")),1)):d("",!0),e.value.category?(n(),i("span",{key:1,onClick:l[1]||(l[1]=u=>oe(e.value.category)),class:"sub-tiles cursor-pointer"},o(r(h)==="en"?e.value.category.name_en:e.value.category.name_ar),1)):d("",!0),e.value.brand_id?(n(),i("span",{key:2,onClick:l[2]||(l[2]=u=>re(e.value.brand)),class:"sub-tiles cursor-pointer"},o(r(h)==="en"?(_=e.value.brand)==null?void 0:_.name_en:((G=e.value.brand)==null?void 0:G.name_ar)||r(s)("brand.default")),1)):d("",!0)]),t("h1",Le,o(r(h)==="en"?e.value.name_en:e.value.name_ar),1),e.value.sub_name_en||e.value.sub_name_ar?(n(),i("h2",ze,o(r(h)==="en"?e.value.sub_name_en:e.value.sub_name_ar),1)):d("",!0),t("div",Ie,[w(r($),{modelValue:T.value,readonly:!0,cancel:!1,class:"text-lg"},null,8,["modelValue"]),t("span",Me,"("+o(v.value.length)+" "+o(v.value.length===1?r(s)("reviews.singular"):r(s)("reviews.plural"))+")",1)]),l[10]||(l[10]=t("hr",{class:"bg-gradient-to-r from-transparent via-[#A17D1C] to-transparent h-0.5 my-8"},null,-1)),t("div",Pe,[t("div",Ue,[t("span",Ne,o(P(e.value.base_price_after_discount))+" "+o(a.$t("currencyLabel")),1),M.value?(n(),i("span",Qe,o(P(e.value.base_price))+" "+o(a.$t("currencyLabel")),1)):d("",!0),M.value?(n(),i("span",Ge," -"+o(W.value)+"% ",1)):d("",!0)])]),e.value.in_cart?(n(),i("div",He,[t("label",Je,o(r(s)("product.quantity"))+":",1),t("div",We,[t("button",{onClick:l[3]||(l[3]=u=>N("minus")),disabled:y.value<=1||D.value||e.value.isOutOfStock,class:"px-5 py-3 text-2xl font-bold hover:bg-gray-100 disabled:opacity-50 transition"},"âˆ’",8,Ye),t("span",Ke,o(y.value),1),t("button",{onClick:l[4]||(l[4]=u=>N("plus")),disabled:D.value||e.value.isOutOfStock,class:"px-5 py-3 text-2xl font-bold hover:bg-gray-100 disabled:opacity-50 transition"},"+",8,Xe)])])):d("",!0),t("button",{onClick:ae,disabled:C.value||e.value.isOutOfStock,class:J(["w-full py-5 text-xl font-bold rounded-2xl text-white transition-all duration-300 shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-3",{"bg-[#A6853B] hover:bg-[#8f702c]":!e.value.in_cart&&!e.value.isOutOfStock,"bg-[#0b3baa] hover:bg-[#093080]":e.value.in_cart,"bg-gray-400 cursor-not-allowed":e.value.isOutOfStock}])},[e.value.in_cart?(n(),i("svg",et,l[9]||(l[9]=[t("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):d("",!0),e.value.in_cart?(n(),i("span",tt,o(r(s)("product.inCart")),1)):e.value.isOutOfStock?(n(),i("span",st,o(r(s)("product.outOfStock")),1)):(n(),i("span",at,o(C.value?r(s)("product.adding")+"...":r(s)("product.addToCart")),1))],10,Ze),e.value.isOutOfStock?(n(),i("p",lt,o(r(s)("product.outOfStock")),1)):d("",!0)])])])),!b.value&&!x.value?(n(),i("section",ot,[t("p",rt,o(V.value?q.value:Y.value),1),U.value?(n(),i("button",{key:0,onClick:ee,class:"mt-4 text-[#E39F30] font-bold text-sm hover:underline focus:outline-none"},o(V.value?r(s)("product.readLess"):r(s)("product.readMore")),1)):d("",!0)])):d("",!0),!b.value&&!x.value?(n(),i("section",nt,[t("h2",it,o(r(s)("reviews.title")),1),t("div",ut,[t("div",ct,[t("div",dt,o(T.value.toFixed(1)),1),w(r($),{modelValue:T.value,readonly:!0,cancel:!1,class:"my-4 justify-center text-3xl"},null,8,["modelValue"]),t("p",vt,o(v.value.length)+" "+o(v.value.length===1?r(s)("reviews.singular"):r(s)("reviews.plural")),1)]),t("div",_t,[(n(!0),i(z,null,I(K.value,u=>(n(),i("div",{key:u.stars,class:"flex items-center gap-3"},[t("span",pt,o(u.stars),1),t("div",gt,[t("div",{class:"absolute top-0 left-0 h-full bg-[#A6853B] transition-all duration-700 ease-out",style:ye({width:u.percentage+"%"})},null,4)]),t("span",mt,o(u.count),1)]))),128))])]),t("div",ht,[t("h3",xt,o(r(s)("reviews.writeReview")),1),r(B).authenticatedweb?(n(),i("div",ft,[t("div",yt,[w(r($),{modelValue:p.value.rating,"onUpdate:modelValue":l[5]||(l[5]=u=>p.value.rating=u),stars:5,cancel:!1,class:"text-4xl justify-center"},null,8,["modelValue"])]),he(t("textarea",{"onUpdate:modelValue":l[6]||(l[6]=u=>p.value.comment=u),rows:"6",class:"w-full p-5 border border-gray-300 rounded-xl focus:ring-4 focus:ring-[#A6853B]/20 focus:border-[#A6853B] outline-none resize-none transition",placeholder:r(s)("reviews.placeholder")},null,8,bt),[[xe,p.value.comment]]),t("button",{onClick:le,disabled:F.value||p.value.rating===0||!p.value.comment.trim(),class:"w-full py-4 bg-[#A6853B] hover:bg-[#8f702c] text-white font-bold rounded-xl transition disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl"},o(F.value?r(s)("reviews.submitting")+"...":r(s)("reviews.submit")),9,wt),A.value?(n(),i("p",kt,o(A.value),1)):d("",!0)])):(n(),i("div",Ot,[t("p",St,o(r(s)("reviews.loginToReview")),1),t("button",{onClick:l[7]||(l[7]=u=>r(k).push({name:"authlog"})),class:"px-10 py-4 bg-[#A6853B] text-white font-bold rounded-xl hover:bg-[#8f702c] transition shadow-lg"},o(r(s)("reviews.login")),1)]))]),v.value.length?(n(),i("div",Ct,[t("h3",Dt,o(r(s)("reviews.customerReviews")),1),(n(!0),i(z,null,I(X.value,u=>{var L,H;return n(),i("div",{key:u.id,class:"border-b pb-8 last:border-0"},[t("div",At,[t("div",Bt,[t("div",Vt,o((((L=u.user)==null?void 0:L.name)||"A")[0].toUpperCase()),1),t("div",null,[t("p",Ft,o(((H=u.user)==null?void 0:H.name)||r(s)("reviews.anonymous")),1),w(r($),{modelValue:u.rate,readonly:!0,cancel:!1},null,8,["modelValue"])])]),t("span",qt,o(te(u.created_at)),1)]),t("p",Rt,o(u.message),1)])}),128)),v.value.length>5?(n(),i("div",$t,[t("button",jt,o(r(s)("reviews.viewAll"))+" ("+o(v.value.length)+") ",1)])):d("",!0)])):(n(),i("div",Et,o(r(s)("reviews.noReviews")),1))])):d("",!0),!b.value&&!x.value?(n(),i("section",Tt,[w(be)])):d("",!0)])}}},Pt=ie(Lt,[["__scopeId","data-v-3a0e8b97"]]);export{Pt as default};
