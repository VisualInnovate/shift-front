import{_ as ge,j as fe,k as be,u as ye,v as he,G as xe,r as g,l as b,q as me,o as we,a as r,c as o,h as E,e as n,f as s,t as l,g as f,F as M,d as R,p as ke,x as Q,i as ee,H as Ce,I as De}from"./index-7f2022c6.js";import{P as Oe}from"./ProductOffers-9a842051.js";const Ve={class:"product-page max-w-7xl mx-auto p-4 lg:p-8"},Fe={key:0,class:"text-center py-20"},qe={class:"mt-4 text-gray-600"},$e={key:1,class:"text-red-500 text-center py-10 text-lg"},je={key:2},Ae={class:"flex flex-col lg:flex-row items-start gap-8 lg:gap-12"},Be={class:"w-full lg:w-1/2 flex flex-col-reverse lg:flex-row items-center gap-4"},Se={class:"flex lg:flex-col flex-row items-center justify-center lg:justify-start gap-3 w-full lg:w-1/4 order-2 lg:order-1"},Ie=["src","alt","onClick"],Le={class:"w-full lg:w-3/4 order-1 lg:order-2"},Pe={class:"relative w-full aspect-square shadow-xl rounded-2xl overflow-hidden bg-gray-50"},Te={key:0,class:"absolute top-4 left-4 z-10 bg-black text-white text-xs font-bold px-4 py-2 rounded-full uppercase tracking-wider shadow-lg"},ze={key:1,class:"absolute top-4 right-4 z-10 bg-green-600 text-white text-xs font-bold px-4 py-2 rounded-full flex items-center gap-2 shadow-lg"},Ee=["src","alt"],Me={class:"w-full lg:w-1/2"},Re={class:"bg-white rounded-2xl shadow-lg p-6 lg:p-8"},Qe={class:"flex flex-wrap gap-3 mb-6"},Ge={class:"text-3xl lg:text-4xl font-bold text-gray-800 mb-3 leading-tight"},He={key:0,class:"text-xl text-gray-600 mb-6"},Ue={class:"flex items-center gap-3 mb-6"},We={class:"text-gray-600"},Je={key:1,class:"space-y-6 mb-8"},Ke={class:"block text-lg font-semibold text-gray-700 mb-3 capitalize"},Xe={class:"flex flex-wrap gap-3"},Ye=["onClick"],Ze={key:0,class:"text-red-600 font-bold"},Ne={key:1,class:"text-green-600 font-medium"},et={class:"mb-8"},tt={class:"flex items-baseline gap-4 flex-wrap"},at={class:"text-4xl font-bold text-gray-900"},st={key:0,class:"text-2xl font-bold text-[#0b3baa] line-through opacity-80"},lt={key:1,class:"bg-red-100 text-red-800 text-sm font-bold px-3 py-1 rounded-full"},rt={key:2,class:"flex items-center gap-6 mb-8"},ot={class:"font-bold text-gray-700 text-lg"},nt={class:"flex items-center border-2 border-gray-300 rounded-xl overflow-hidden select-none"},it=["disabled"],ut={class:"px-8 py-3 font-semibold text-lg border-x-2 border-gray-300 min-w-20 text-center"},ct=["disabled"],dt=["disabled"],vt={key:0,class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},_t={key:1},pt={key:2},gt={key:3},ft={class:"bg-[#E6AC312B] px-8 py-10 rounded-2xl mt-12"},bt={class:"text-gray-700 leading-relaxed text-base"},yt={class:"mt-12"},ht={__name:"product-details",setup(xt){const{t:i,locale:x}=fe(),G=be(),te=ye(),ae=he(),S=xe(),t=g({}),H=g([]),I=g({}),V=g({}),u=g(null),L=g([]),D=g(""),j=g(1),P=g(!0),F=g(null),q=g(!1),U=g(!1),O=g([]),A=g(!1),m=b(()=>t.value.has_variants===!0),se=b(()=>{var e;return[...(e=u.value)!=null&&e.image?[{url:u.value.image}]:[],...L.value||[]]}),T=b(()=>{var a;return((a=u.value)==null?void 0:a.price_after_discount)||t.value.base_price_after_discount||t.value.base_price}),z=b(()=>{var a;return((a=u.value)==null?void 0:a.price)||t.value.base_price}),W=b(()=>parseFloat(z.value)>parseFloat(T.value)),le=b(()=>{const a=parseFloat(z.value),e=parseFloat(T.value);return a>e?Math.round((a-e)/a*100):0}),w=b(()=>!u.value||u.value.quantity<=0),B=b(()=>x.value==="en"?t.value.description_en||i("product.noDescription"):t.value.description_ar||i("product.noDescription")),J=b(()=>B.value.length>300),re=b(()=>J.value?B.value.slice(0,300)+"...":B.value),oe=b(()=>O.value.length?O.value.reduce((a,e)=>a+e.rate,0)/O.value.length:0),ne=a=>D.value=a,ie=()=>A.value=!A.value,K=a=>parseFloat(a||0).toFixed(2),ue=(a,e)=>{V.value[a]=e,Y()},X=(a,e)=>{var p;return((p=V.value[a])==null?void 0:p.id)===e.id},Y=()=>{if(!m.value)return;const a=Object.keys(V.value);if(a.length!==Object.keys(I.value).length){u.value=null;return}const e=H.value.find(p=>a.every(c=>{const d=V.value[c];return p.attributes[c]&&p.attributes[c].id===d.id}));u.value=e||null,e!=null&&e.image&&(D.value=e.image)},ce=async()=>{var e,p,c;if(!ae.authenticatedweb)return te.push({name:"authlog"});if(w.value||q.value)return;const a=m.value?(e=u.value)==null?void 0:e.variant_id:null;if(!(m.value&&!a)){q.value=!0;try{await ee.post("/api/cart/add",{product_id:t.value.id,variant_id:a,quantity:1}),t.value.in_cart=!0,j.value=1,S.add({severity:"success",detail:i("cart.added"),life:3e3})}catch(d){S.add({severity:"error",detail:((c=(p=d.response)==null?void 0:p.data)==null?void 0:c.message)||i("cart.error"),life:3e3})}finally{q.value=!1}}},Z=async a=>{},de=()=>{if(!(t.value.in_cart||w.value)){if(m.value&&!u.value){S.add({severity:"warn",detail:i("product.selectVariant"),life:3e3});return}ce()}},ve=a=>{},_e=a=>{},pe=a=>{},N=async()=>{var a,e,p;P.value=!0,F.value=null;try{const{data:c}=await ee.get(`/api/home/product-details/${G.params.id}`);if(c.is_success){const d=c.data.product;if(t.value={...d,in_cart:!!d.in_cart,isOutOfStock:d.is_stock===0},L.value=d.media||[],D.value=d.key_default_image||((a=L.value[0])==null?void 0:a.url)||"",O.value=d.reviews||[],j.value=d.in_cart&&d.quantity||1,d.has_variants&&c.data.variants_details){const k=c.data.variants_details.attributes||{};I.value=k,H.value=(c.data.variants_details.combinations||[]).map(v=>{const $={};return Object.keys(k).forEach(C=>{const _=k[C].find(y=>{var h;return v[C]===y.value_en||v[C]===y.value_ar||((h=v.attribute_values)==null?void 0:h[C])===y.id});_&&($[C]=_)}),{variant_id:v.variant_id,price:v.price,price_after_discount:v.price_after_discount||v.price,quantity:v.quantity??999,image:v.image,sku:v.sku,attributes:$}}),Object.keys(k).forEach(v=>{V.value[v]=k[v][0]}),Y()}}else F.value=i("product.notFound")}catch(c){F.value=((p=(e=c.response)==null?void 0:e.data)==null?void 0:p.message)||i("product.loadError")}finally{P.value=!1}};return me(()=>G.params.id,()=>{N(),window.scrollTo(0,0)}),we(()=>{N(),window.scrollTo(0,0)}),(a,e)=>{var p,c,d,k,v,$,C;return r(),o("div",Ve,[P.value?(r(),o("div",Fe,[E(n(Ce),{style:{width:"50px",height:"50px"},strokeWidth:"4"}),s("p",qe,l(n(i)("loading")),1)])):f("",!0),F.value?(r(),o("div",$e,l(F.value),1)):(r(),o("div",je,[s("header",Ae,[s("div",Be,[s("div",Se,[(r(!0),o(M,null,R(se.value,_=>(r(),o("img",{key:_.url,src:_.url,alt:n(i)("product.thumbnailAlt"),class:Q(["h-20 w-20 object-contain rounded-lg cursor-pointer border-2 transition-all duration-200 hover:border-blue-500",{"border-blue-500 opacity-100":D.value===_.url,"border-gray-300 opacity-70":D.value!==_.url}]),onClick:y=>ne(_.url)},null,10,Ie))),128))]),s("div",Le,[s("div",Pe,[(p=u.value)!=null&&p.is_best_seller||t.value.is_best_seller?(r(),o("div",Te," Best Seller ")):f("",!0),(c=u.value)!=null&&c.is_free_shipping||t.value.is_free_shipping?(r(),o("div",ze,[e[5]||(e[5]=s("i",{class:"pi pi-truck"},null,-1)),ke(" "+l(n(i)("products.Free_Delivery")),1)])):f("",!0),s("img",{src:D.value||((d=u.value)==null?void 0:d.image)||t.value.key_default_image,alt:n(x)==="en"?t.value.name_en:t.value.name_ar,class:"w-full h-full object-contain transition-transform duration-700 hover:scale-105",loading:"lazy"},null,8,Ee)])])]),s("div",Me,[s("div",Re,[s("section",Qe,[t.value.store_id?(r(),o("span",{key:0,onClick:e[0]||(e[0]=_=>pe(t.value.store)),class:"sub-tiles cursor-pointer"},l(n(x)==="en"?(k=t.value.store)==null?void 0:k.name_en:((v=t.value.store)==null?void 0:v.name_ar)||n(i)("store.default")),1)):f("",!0),t.value.category?(r(),o("span",{key:1,onClick:e[1]||(e[1]=_=>ve(t.value.category)),class:"sub-tiles cursor-pointer"},l(n(x)==="en"?t.value.category.name_en:t.value.category.name_ar),1)):f("",!0),t.value.brand_id?(r(),o("span",{key:2,onClick:e[2]||(e[2]=_=>_e(t.value.brand)),class:"sub-tiles cursor-pointer"},l(n(x)==="en"?($=t.value.brand)==null?void 0:$.name_en:((C=t.value.brand)==null?void 0:C.name_ar)||n(i)("brand.default")),1)):f("",!0)]),s("h1",Ge,l(n(x)==="en"?t.value.name_en:t.value.name_ar),1),t.value.sub_name_en||t.value.sub_name_ar?(r(),o("h2",He,l(n(x)==="en"?t.value.sub_name_en:t.value.sub_name_ar),1)):f("",!0),s("div",Ue,[E(n(De),{modelValue:oe.value,readonly:!0,cancel:!1,class:"text-lg"},null,8,["modelValue"]),s("span",We,"("+l(O.value.length)+" "+l(O.value.length===1?n(i)("reviews.singular"):n(i)("reviews.plural"))+")",1)]),e[7]||(e[7]=s("hr",{class:"bg-gradient-to-r from-transparent via-[#A17D1C] to-transparent h-0.5 my-8"},null,-1)),m.value?(r(),o("div",Je,[(r(!0),o(M,null,R(I.value,(_,y)=>(r(),o("div",{key:y},[s("label",Ke,l(n(i)("product.select"))+" "+l(y),1),s("div",Xe,[(r(!0),o(M,null,R(_,h=>(r(),o("button",{key:h.id,onClick:mt=>ue(y,h),class:Q(["px-6 py-3 rounded-xl border-2 font-medium transition-all",{"bg-[#A6853B] text-white border-[#A6853B]":X(y,h),"border-gray-300 hover:border-gray-400 bg-white":!X(y,h)}])},l(n(x)==="en"?h.value_en:h.value_ar),11,Ye))),128))])]))),128)),u.value&&u.value.quantity<=0?(r(),o("p",Ze,l(n(i)("product.outOfStock")),1)):u.value?(r(),o("p",Ne,l(n(i)("product.inStock"))+" ("+l(u.value.quantity)+" "+l(n(i)("product.available"))+") ",1)):f("",!0)])):f("",!0),s("div",et,[s("div",tt,[s("span",at,l(K(T.value))+" "+l(a.$t("currencyLabel")),1),W.value?(r(),o("span",st,l(K(z.value))+" "+l(a.$t("currencyLabel")),1)):f("",!0),W.value?(r(),o("span",lt," -"+l(le.value)+"% ",1)):f("",!0)])]),t.value.in_cart?(r(),o("div",rt,[s("label",ot,l(n(i)("product.quantity"))+":",1),s("div",nt,[s("button",{onClick:e[3]||(e[3]=_=>Z()),disabled:j.value<=1||U.value||w.value,class:"px-5 py-3 text-2xl font-bold hover:bg-gray-100 disabled:opacity-50 transition"},"âˆ’",8,it),s("span",ut,l(j.value),1),s("button",{onClick:e[4]||(e[4]=_=>Z()),disabled:U.value||w.value,class:"px-5 py-3 text-2xl font-bold hover:bg-gray-100 disabled:opacity-50 transition"},"+",8,ct)])])):f("",!0),s("button",{onClick:de,disabled:q.value||w.value||m.value&&!u.value,class:Q(["w-full py-5 text-xl font-bold rounded-2xl text-white transition-all duration-300 shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-3",{"bg-[#A6853B] hover:bg-[#8f702c]":!t.value.in_cart&&!w.value,"bg-[#0b3baa] hover:bg-[#093080]":t.value.in_cart,"bg-gray-400 cursor-not-allowed":w.value||m.value&&!u.value}])},[t.value.in_cart?(r(),o("svg",vt,e[6]||(e[6]=[s("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):f("",!0),t.value.in_cart?(r(),o("span",_t,l(n(i)("product.inCart")),1)):w.value||m.value&&!u.value?(r(),o("span",pt,l(n(i)("product.selectVariant")),1)):(r(),o("span",gt,l(q.value?n(i)("product.adding")+"...":n(i)("product.addToCart")),1))],10,dt)])])]),s("section",ft,[s("p",bt,l(A.value?B.value:re.value),1),J.value?(r(),o("button",{key:0,onClick:ie,class:"mt-4 text-[#E39F30] font-bold text-sm hover:underline"},l(A.value?n(i)("product.readLess"):n(i)("product.readMore")),1)):f("",!0)]),e[8]||(e[8]=s("section",{class:"mt-12 p-8 bg-white rounded-2xl shadow-xl"},null,-1)),s("section",yt,[E(Oe)])]))])}}},Ct=ge(ht,[["__scopeId","data-v-7f0eb11b"]]);export{Ct as default};
