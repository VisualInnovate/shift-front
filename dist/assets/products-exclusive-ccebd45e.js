import{_ as I,a as V,b as H,u as q,A as D,r as c,d as T,y as W,o as G,e as i,f as l,g as s,t as n,i as h,F as J,m as K,h as O,p as v,j as Q,l as d,G as z,n as B,k as U,H as X}from"./index-6aa0199c.js";import{d as Y}from"./banner-addtion-e4104052.js";const Z={class:"mx-auto mt-16 max-w-[1440px] px-4 sm:px-6 lg:px-8 pb-16"},tt={key:0,class:"flex flex-col items-center justify-center py-20"},et={class:"mt-4 text-gray-600"},st={key:1,class:"text-center py-20"},at={class:"text-lg font-semibold text-red-600 mb-4"},ot={key:2},it={class:"w-full"},lt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},nt=["onClick"],rt={class:"bg-white rounded-2xl shadow-md hover:shadow-2xl transition-all duration-300 overflow-hidden h-full flex flex-col"},ct={class:"relative aspect-square overflow-hidden bg-gray-50"},dt={key:0,class:"absolute top-3 left-3 z-10 bg-black text-white text-xs font-bold px-3 py-1.5 rounded-full uppercase tracking-wider"},ut=["src","alt"],_t=["onClick","aria-label"],gt={class:"p-5 flex flex-col flex-grow"},mt={class:"font-semibold text-gray-900 text-lg line-clamp-2 leading-tight mb-2"},ht={key:0,class:"text-gray-600 text-sm line-clamp-2 mb-3 leading-snug"},vt={class:"flex items-center gap-1 mb-3"},ft={class:"text-yellow-500 font-bold text-sm"},bt={class:"text-gray-500 text-xs"},xt={class:"mt-auto flex items-center justify-between"},pt={class:"flex items-baseline gap-2"},wt={class:"text-2xl font-bold text-gray-900"},yt={key:0,class:"text-base line-through text-blue-600 font-medium opacity-80"},kt=["onClick","disabled"],Lt={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24"},Ct={key:1,class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Pt={key:1,class:"flex items-center mt-3 text-[#0b3baa] text-xs font-medium"},zt={class:"mt-12 flex justify-center"},Bt={__name:"products-exclusive",setup(Ft){const F=V(),w=H(),{t:u,locale:f}=q(),b=D(),M=localStorage.getItem("appLang")||"en";f.value=M;const x=c(!0),_=c(null),y=c([]),g=c(1),m=c(12),k=c(0),$=T(()=>y.value),L=e=>Number(e).toFixed(2),j=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",p=async(e=1)=>{_.value=null,x.value=!0;try{const t={page:e,limit:m.value},r=(await v.get(`/api/home/exclusive-offers/${F.params.id}`,{params:t})).data.data;y.value=r.data.map(o=>{var C,P;return{id:o.id,name:f.value==="ar"?o.name_ar||o.name_en:o.name_en||o.name_ar,sub_name:f.value==="ar"?o.sub_name_ar||o.sub_name_en:o.sub_name_en||o.sub_name_ar,base_price:parseFloat(o.base_price),final_price:o.total_discounts_value>0?parseFloat(o.base_price)-parseFloat(o.total_discounts_value):parseFloat(o.base_price),total_discounts_value:parseFloat(o.total_discounts_value||0),img:((P=(C=o.media)==null?void 0:C.find(E=>E.name==="product_main_image"))==null?void 0:P.url)||o.key_default_image||Y,total_rating:o.total_rating||0,total_reviews:o.total_reviews||0,is_wished:o.is_wished||!1,in_cart:o.in_cart||!1,is_stock:o.is_stock,is_free_shipping:o.is_free_shipping||!1,is_best_seller:o.is_best_seller||!1}}),g.value=r.current_page,k.value=r.total}catch(t){_.value=u("products.errorLoading"),console.error(t)}finally{x.value=!1}},N=e=>{g.value=e.page+1,p(g.value)},R=async e=>{if(!b.authenticatedweb)return w.push({name:"authlog"});if(e.is_stock!==0)try{await v.post("/api/cart/add",{product_id:e.id,quantity:1}),e.in_cart=!0}catch{alert(u("cart.error"))}},S=async e=>{if(!b.authenticatedweb)return w.push({name:"authlog"});const t=e.is_wished;try{t?await v.delete(`/api/wishlists/${e.id}`):await v.post("/api/wishlists",{product_id:e.id}),e.is_wished=!t}catch{e.is_wished=t}},A=e=>{const t=`/product-details/${e.id}`;window.open(t,"_blank","noopener,noreferrer")};return W(()=>{p()}),G(()=>{const e=()=>{m.value=window.innerWidth>=1024?12:8};e(),window.addEventListener("resize",e)}),(e,t)=>(i(),l("div",Z,[x.value?(i(),l("div",tt,[t[1]||(t[1]=s("img",{src:Q,alt:"Loading",class:"w-32 h-32 object-contain animate-bounce"},null,-1)),s("p",et,n(h(u)("common.loading")),1)])):_.value?(i(),l("div",st,[s("p",at,n(_.value),1),s("button",{onClick:p,class:"bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition"},n(h(u)("products.retry")),1)])):(i(),l("div",ot,[s("div",it,[s("div",lt,[(i(!0),l(J,null,K($.value,a=>(i(),l("div",{key:a.id,class:"group cursor-pointer",onClick:r=>A(a)},[s("div",rt,[s("div",ct,[a.is_best_seller?(i(),l("div",dt," Best Seller ")):d("",!0),s("img",{src:a.img,alt:a.name,class:"w-full h-full object-contain transition-transform duration-700 group-hover:scale-110",loading:"lazy"},null,8,ut),t[3]||(t[3]=s("div",{class:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"},null,-1)),h(b).authenticatedweb?(i(),l("button",{key:1,onClick:z(r=>S(a),["stop"]),class:B(["absolute top-3 right-3 z-20 p-2.5 bg-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300",{"text-red-500":a.is_wished}]),"aria-label":a.is_wished?"Remove from wishlist":"Add to wishlist"},t[2]||(t[2]=[s("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24"},[s("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})],-1)]),10,_t)):d("",!0)]),s("div",gt,[s("h3",mt,n(j(a.name,50)),1),a.sub_name?(i(),l("p",ht,n(a.sub_name),1)):d("",!0),s("div",vt,[s("span",ft,n(a.total_rating||"0.0"),1),t[4]||(t[4]=s("svg",{class:"w-4 h-4 text-yellow-500 fill-current",viewBox:"0 0 24 24"},[s("path",{d:"M12 17.27l6.18 3.73-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73-1.64 7.03z"})],-1)),s("span",bt,"("+n(a.total_reviews||0)+")",1)]),s("div",xt,[s("div",pt,[s("span",wt,n(e.$t("currencyLabel"))+" "+n(L(a.final_price)),1),a.total_discounts_value>0?(i(),l("span",yt,n(e.$t("currencyLabel"))+" "+n(L(a.base_price)),1)):d("",!0)]),s("button",{onClick:z(r=>R(a),["stop"]),disabled:a.is_stock===0,class:B(["p-3 rounded-full transition-all duration-300 shadow-md",[a.in_cart?"bg-[#0b3baa] text-white":a.is_stock===0?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-[#A6853B] text-white hover:bg-[#8f702c]"]])},[a.in_cart?(i(),l("svg",Lt,t[5]||(t[5]=[s("path",{d:"M9 16.2l-3.5-3.5a.984.984 0 0 0-1.4 0 .984.984 0 0 0 0 1.4l4.2 4.2c.39.39 1.01.39 1.4 0l8.4-8.4a.984.984 0 0 0 0-1.4.984.984 0 0 0-1.4 0L9 16.2z"},null,-1)]))):(i(),l("svg",Ct,t[6]||(t[6]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.708.707 1.708H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])))],10,kt)]),a.is_free_shipping?(i(),l("div",Pt,[t[7]||(t[7]=s("i",{class:"pi pi-truck mr-1"},null,-1)),U(" "+n(e.$t("products.Free_Delivery")),1)])):d("",!0)])])],8,nt))),128))]),s("div",zt,[O(h(X),{rows:m.value,totalRecords:k.value,first:(g.value-1)*m.value,onPage:t[0]||(t[0]=a=>N(a)),template:"PrevPageLink PageLinks NextPageLink",class:"custom-paginator"},null,8,["rows","totalRecords","first"])])])]))]))}},jt=I(Bt,[["__scopeId","data-v-5104a6b1"]]);export{jt as default};
