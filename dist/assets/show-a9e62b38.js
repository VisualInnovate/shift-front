import{_ as V,u as B,p as C,l as E,a as M,r as I,o as R,e as p,h as m,g as t,i,j as s,w as v,t as e,v as u,F as q,m as Y,b as H,k as z,V as A,s as G,al as y,a4 as J,a3 as b,ak as K}from"./index-18c9ba51.js";const O={class:"grid"},Q={class:"col-12"},U={class:"flex justify-content-between align-items-center"},W={class:"m-0"},X={key:0,class:"flex justify-content-center py-8"},Z={key:1,class:"invoice-content",dir:"auto"},P={class:"grid mb-5"},tt={class:"col-6"},et={class:"text-primary"},st={class:"col-6 text-right"},ot={class:"mb-3"},nt={class:"flex align-items-center gap-3"},at={class:"font-medium"},lt={class:"text-500"},it={class:"grid"},ct={class:"col-12 md:col-6"},rt={class:"bg-gray-50 border-round p-4"},dt={class:"flex justify-content-between mb-2"},ut={class:"flex justify-content-between mb-2"},_t={class:"flex justify-content-between mb-2"},ht={class:"flex justify-content-between mb-2"},vt={class:"flex justify-content-between mb-2"},pt={class:"flex justify-content-between text-xl"},mt={class:"text-primary"},bt={class:"text-center mt-6 text-600"},xt={key:2,class:"text-center py-8 text-600"},gt={class:"text-xl"},yt={id:"print-section",class:"hidden"},ft={class:"p-8",dir:"auto"},wt={class:"text-3xl font-bold text-center mb-6"},kt={class:"grid"},$t={class:"col-6"},jt={class:"col-6 text-right"},Ft={class:"w-full mt-6 border-collapse"},It={class:"bg-gray-100"},qt={class:"border p-3 text-left"},Lt={class:"border p-3 text-center"},Dt={class:"border p-3 text-right"},Nt={class:"border p-3 text-right"},St={class:"border p-3"},Tt={class:"border p-3"},Vt={class:"border p-3 text-center"},Bt={class:"border p-3 text-right"},Ct={class:"border p-3 text-right font-bold"},Et={class:"text-right mt-6 text-xl"},Mt={class:"text-center mt-8 text-gray-600"},Rt={__name:"show",setup(Yt){const{t:o}=B(),L=C();E();const D=M(),n=I(null),g=I(!0),x=localStorage.getItem("appLang")||"en",N=async()=>{var c,a,_;g.value=!0;try{const h=await H.get(`/api/invoice/${L.params.id}`);if((c=h.data)!=null&&c.is_success&&((a=h.data)!=null&&a.data))n.value=h.data.data;else throw new Error(((_=h.data)==null?void 0:_.message)||"No data")}catch{D.add({severity:"error",summary:o("error"),detail:o("invoice.loadError")||"Failed to load invoice",life:5e3})}finally{g.value=!1}},f=c=>x==="ar"?c.name_ar:c.name_en,r=c=>`${parseFloat(c||0).toFixed(2)} ${o("currencyLabel")}`,S=c=>new Date(c).toLocaleDateString(x==="ar"?"ar":"en",{year:"numeric",month:"long",day:"numeric"}),T=()=>{var _;const c=document.getElementById("print-section").innerHTML,a=window.open("","","height=800,width=1000");a.document.write(`
    <html>
      <head>
        <title>Invoice ${(_=n.value)==null?void 0:_.number}</title>
        <style>
          body { font-family: DejaVu Sans, sans-serif; direction: ${x==="ar"?"rtl":"ltr"}; }
          table { width: 100%; border-collapse: collapse; }
          th, td { border: 1px solid #ddd; padding: 8px; }
          th { background-color: #f4f4f4; }
          .text-right { text-align: right; }
        </style>
      </head>
      <body>${c}</body>
    </html>
  `),a.document.close(),a.focus(),setTimeout(()=>a.print(),500)};return R(()=>{N()}),(c,a)=>{var _,h,w,k,$,j,F;return p(),m(q,null,[t("div",O,[t("div",Q,[i(s(z)),i(s(K),{class:"shadow-4"},{title:v(()=>{var d;return[t("div",U,[t("div",null,[t("h2",W,e(s(o)("invoice.details"))+" #"+e((d=n.value)==null?void 0:d.number),1)]),t("div",null,[i(s(A),{label:s(o)("print"),icon:"pi pi-print",class:"p-button-success mr-2",onClick:T},null,8,["label"])])])]}),content:v(()=>{var d;return[g.value?(p(),m("div",X,[i(s(G))])):n.value?(p(),m("div",Z,[t("div",P,[t("div",tt,[t("h3",et,e(s(o)("invoice.invoice")),1),t("p",null,[t("strong",null,e(s(o)("invoice.number"))+":",1),u(" "+e(n.value.number),1)]),t("p",null,[t("strong",null,e(s(o)("invoice.date"))+":",1),u(" "+e(n.value.created_at),1)])]),t("div",st,[t("p",null,[t("strong",null,e(s(o)("name"))+":",1),u(" "+e(((d=n.value.user)==null?void 0:d.name)||"-"),1)])])]),i(s(y)),t("h4",ot,e(s(o)("invoice.items")),1),i(s(J),{value:n.value.items,responsiveLayout:"scroll"},{default:v(()=>[i(s(b),{header:"#",headerStyle:"width: 3rem"},{body:v(l=>[u(e(l.index+1),1)]),_:1}),i(s(b),{header:s(o)("product")},{body:v(l=>[t("div",nt,[t("div",null,[t("div",at,e(f(l.data.product)),1),t("small",lt,e(s(x)==="ar"?l.data.product.sub_name_ar:l.data.product.sub_name_en),1)])])]),_:1},8,["header"]),i(s(b),{field:"quantity",header:s(o)("quantity"),style:{width:"100px","text-align":"center"}},null,8,["header"]),i(s(b),{header:s(o)("price")},{body:v(l=>[u(e(r(l.data.price)),1)]),_:1},8,["header"]),i(s(b),{header:s(o)("total")},{body:v(l=>[t("strong",null,e(r(parseFloat(l.data.price)*l.data.quantity)),1)]),_:1},8,["header"])]),_:1},8,["value"]),i(s(y)),t("div",it,[a[0]||(a[0]=t("div",{class:"col-12 md:col-6"},null,-1)),t("div",ct,[t("div",rt,[t("div",dt,[t("span",null,e(s(o)("invoice.subTotal")),1),t("strong",null,e(r(n.value.sub_total_price)),1)]),t("div",ut,[t("span",null,e(s(o)("invoice.tax")),1),t("strong",null,e(r(n.value.tax_fee)),1)]),t("div",_t,[t("span",null,e(s(o)("invoice.deliveryFee")),1),t("strong",null,e(r(n.value.delivery_fee)),1)]),t("div",ht,[t("span",null,e(s(o)("invoice.serviceFee")),1),t("strong",null,e(r(n.value.service_fee)),1)]),t("div",vt,[t("span",null,e(s(o)("invoice.coupon")),1),t("strong",null,"-"+e(r(n.value.coupon)),1)]),i(s(y),{class:"my-3"}),t("div",pt,[t("strong",null,e(s(o)("invoice.total")),1),t("strong",mt,e(r(n.value.total_price)),1)])])])]),t("div",bt,[t("p",null,e(s(o)("invoice.thankYou")),1)])])):(p(),m("div",xt,[a[1]||(a[1]=t("i",{class:"pi pi-exclamation-triangle text-5xl mb-3"},null,-1)),t("p",gt,e(s(o)("invoice.notFound")),1)]))]}),_:1})])]),t("div",yt,[t("div",ft,[t("h1",wt,e(s(o)("invoice.invoice"))+" #"+e((_=n.value)==null?void 0:_.number),1),t("div",kt,[t("div",$t,[t("p",null,[t("strong",null,e(s(o)("invoice.number"))+":",1),u(" "+e((h=n.value)==null?void 0:h.number),1)]),t("p",null,[t("strong",null,e(s(o)("invoice.date"))+":",1),u(" "+e(S((w=n.value)==null?void 0:w.created_at)),1)])]),t("div",jt,[t("p",null,[t("strong",null,e(s(o)("customer"))+":",1),u(" "+e(($=(k=n.value)==null?void 0:k.user)==null?void 0:$.name),1)])])]),t("table",Ft,[t("thead",null,[t("tr",It,[a[2]||(a[2]=t("th",{class:"border p-3 text-left"},"#",-1)),t("th",qt,e(s(o)("product")),1),t("th",Lt,e(s(o)("quantity")),1),t("th",Dt,e(s(o)("price")),1),t("th",Nt,e(s(o)("total")),1)])]),t("tbody",null,[(p(!0),m(q,null,Y((j=n.value)==null?void 0:j.items,(d,l)=>(p(),m("tr",{key:l},[t("td",St,e(l+1),1),t("td",Tt,e(f(d.product)),1),t("td",Vt,e(d.quantity),1),t("td",Bt,e(r(d.price)),1),t("td",Ct,e(r(parseFloat(d.price)*d.quantity)),1)]))),128))])]),t("div",Et,[t("p",null,[t("strong",null,e(s(o)("invoice.total"))+":",1),u(" "+e(r((F=n.value)==null?void 0:F.total_price)),1)])]),t("div",Mt,[t("p",null,e(s(o)("invoice.thankYou")),1)])])])],64)}}},zt=V(Rt,[["__scopeId","data-v-dfd6354a"]]);export{zt as default};
