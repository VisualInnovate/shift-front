import{_ as z,u as A,p as G,l as J,a as K,r as V,o as O,e as v,h as p,g as t,i,j as s,w as m,t as e,v as u,n as B,F as E,m as Q,b as U,k as X,W as Z,s as P,an as y,a5 as tt,a4 as b,am as et}from"./index-f448e7d3.js";const st={class:"grid"},nt={class:"col-12"},ot={class:"flex justify-content-between align-items-center"},at={class:"m-0"},lt={key:0,class:"flex justify-content-center py-8"},it={key:1,class:"invoice-content",dir:"auto"},ct={class:"grid mb-5"},rt={class:"col-6"},dt={class:"text-primary"},ut={class:"col-6 text-right"},_t={class:"mb-3"},ht={class:"flex align-items-center gap-3"},vt={class:"font-medium"},pt={class:"text-500"},mt={class:"grid"},bt={class:"col-12 md:col-6"},gt={class:"bg-gray-50 border-round p-4"},xt={class:"flex justify-content-between mb-2"},yt={class:"flex justify-content-between mb-2"},ft={class:"flex justify-content-between mb-2"},wt={class:"flex justify-content-between mb-2"},kt={class:"flex justify-content-between mb-2"},$t={class:"flex justify-content-between text-xl"},jt={class:"text-primary"},Ft={class:"text-center mt-6 text-600"},It={key:2,class:"text-center py-8 text-600"},qt={class:"text-xl"},Lt={id:"print-section",class:"hidden"},Nt={class:"p-8",dir:"auto"},Ct={class:"text-3xl font-bold text-center mb-6"},Dt={class:"grid"},St={class:"col-6"},Tt={class:"col-6 text-right"},Vt={key:0},Bt={key:1},Et={class:"w-full mt-6 border-collapse"},Mt={class:"bg-gray-100"},Rt={class:"border p-3 text-left"},Yt={class:"border p-3 text-center"},Ht={class:"border p-3 text-right"},Wt={class:"border p-3 text-right"},zt={class:"border p-3"},At={class:"border p-3"},Gt={class:"border p-3 text-center"},Jt={class:"border p-3 text-right"},Kt={class:"border p-3 text-right font-bold"},Ot={class:"text-right mt-6 text-xl"},Qt={class:"text-center mt-8 text-gray-600"},Ut={__name:"show",setup(Xt){const{t:n}=A(),M=G();J();const R=K(),o=V(null),x=V(!0),g=localStorage.getItem("appLang")||"en",Y=async()=>{var c,a,_;x.value=!0;try{const h=await U.get(`/api/invoice/${M.params.id}`);if((c=h.data)!=null&&c.is_success&&((a=h.data)!=null&&a.data))o.value=h.data.data;else throw new Error(((_=h.data)==null?void 0:_.message)||"No data")}catch{R.add({severity:"error",summary:n("error"),detail:n("invoice.loadError")||"Failed to load invoice",life:5e3})}finally{x.value=!1}},f=c=>g==="ar"?c.name_ar:c.name_en,r=c=>`${parseFloat(c||0).toFixed(2)} ${n("currencyLabel")}`,H=c=>new Date(c).toLocaleDateString(g==="ar"?"ar":"en",{year:"numeric",month:"long",day:"numeric"}),W=()=>{var _;const c=document.getElementById("print-section").innerHTML,a=window.open("","","height=800,width=1000");a.document.write(`
    <html>
      <head>
        <title>Invoice ${(_=o.value)==null?void 0:_.number}</title>
        <style>
          body { font-family: DejaVu Sans, sans-serif; direction: ${g==="ar"?"rtl":"ltr"}; }
          table { width: 100%; border-collapse: collapse; }
          th, td { border: 1px solid #ddd; padding: 8px; }
          th { background-color: #f4f4f4; }
          .text-right { text-align: right; }
        </style>
      </head>
      <body>${c}</body>
    </html>
  `),a.document.close(),a.focus(),setTimeout(()=>a.print(),500)};return O(()=>{Y()}),(c,a)=>{var _,h,w,k,$,j,F,I,q,L,N,C,D,S,T;return v(),p(E,null,[t("div",st,[t("div",nt,[i(s(X)),i(s(et),{class:"shadow-4"},{title:m(()=>{var d;return[t("div",ot,[t("div",null,[t("h2",at,e(s(n)("invoice.details"))+" #"+e((d=o.value)==null?void 0:d.number),1)]),t("div",null,[i(s(Z),{label:s(n)("print"),icon:"pi pi-print",class:"p-button-success mr-2",onClick:W},null,8,["label"])])])]}),content:m(()=>{var d;return[x.value?(v(),p("div",lt,[i(s(P))])):o.value?(v(),p("div",it,[t("div",ct,[t("div",rt,[t("h3",dt,e(s(n)("invoice.invoice")),1),t("p",null,[t("strong",null,e(s(n)("invoice.number"))+":",1),u(" "+e(o.value.number),1)]),t("p",null,[t("strong",null,e(s(n)("invoice.date"))+":",1),u(" "+e(o.value.created_at),1)])]),t("div",ut,[t("p",null,[t("strong",null,e(s(n)("name"))+":",1),u(" "+e(((d=o.value.user)==null?void 0:d.name)||"-"),1)])])]),i(s(y)),t("h4",_t,e(s(n)("invoice.items")),1),i(s(tt),{value:o.value.items,responsiveLayout:"scroll"},{default:m(()=>[i(s(b),{header:"#",headerStyle:"width: 3rem"},{body:m(l=>[u(e(l.index+1),1)]),_:1}),i(s(b),{header:s(n)("product")},{body:m(l=>[t("div",ht,[t("div",null,[t("div",vt,e(f(l.data.product)),1),t("small",pt,e(s(g)==="ar"?l.data.product.sub_name_ar:l.data.product.sub_name_en),1)])])]),_:1},8,["header"]),i(s(b),{field:"quantity",header:s(n)("quantity"),style:{width:"100px","text-align":"center"}},null,8,["header"]),i(s(b),{header:s(n)("price")},{body:m(l=>[u(e(r(l.data.price)),1)]),_:1},8,["header"]),i(s(b),{header:s(n)("total")},{body:m(l=>[t("strong",null,e(r(parseFloat(l.data.price)*l.data.quantity)),1)]),_:1},8,["header"])]),_:1},8,["value"]),i(s(y)),t("div",mt,[a[0]||(a[0]=t("div",{class:"col-12 md:col-6"},null,-1)),t("div",bt,[t("div",gt,[t("div",xt,[t("span",null,e(s(n)("invoice.subTotal")),1),t("strong",null,e(r(o.value.sub_total_price)),1)]),t("div",yt,[t("span",null,e(s(n)("invoice.tax")),1),t("strong",null,e(r(o.value.tax_fee)),1)]),t("div",ft,[t("span",null,e(s(n)("invoice.deliveryFee")),1),t("strong",null,e(r(o.value.delivery_fee)),1)]),t("div",wt,[t("span",null,e(s(n)("invoice.serviceFee")),1),t("strong",null,e(r(o.value.service_fee)),1)]),t("div",kt,[t("span",null,e(s(n)("invoice.coupon")),1),t("strong",null,"-"+e(r(o.value.coupon)),1)]),i(s(y),{class:"my-3"}),t("div",$t,[t("strong",null,e(s(n)("invoice.total")),1),t("strong",jt,e(r(o.value.total_price)),1)])])])]),t("div",Ft,[t("p",null,e(s(n)("invoice.thankYou")),1)])])):(v(),p("div",It,[a[1]||(a[1]=t("i",{class:"pi pi-exclamation-triangle text-5xl mb-3"},null,-1)),t("p",qt,e(s(n)("invoice.notFound")),1)]))]}),_:1})])]),t("div",Lt,[t("div",Nt,[t("h1",Ct,e(s(n)("invoice.invoice"))+" #"+e((_=o.value)==null?void 0:_.number),1),t("div",Dt,[t("div",St,[t("p",null,[t("strong",null,e(s(n)("invoice.number"))+":",1),u(" "+e((h=o.value)==null?void 0:h.number),1)]),t("p",null,[t("strong",null,e(s(n)("invoice.date"))+":",1),u(" "+e(H((w=o.value)==null?void 0:w.created_at)),1)])]),t("div",Tt,[t("p",null,[t("strong",null,e(s(n)("name"))+":",1),u(" "+e(($=(k=o.value)==null?void 0:k.user)==null?void 0:$.name),1)]),(F=(j=o.value)==null?void 0:j.user)!=null&&F.phone?(v(),p("p",Vt,[t("strong",null,e(s(n)("user.phone"))+":",1),u(" "+e((q=(I=o.value)==null?void 0:I.user)==null?void 0:q.phone),1)])):B("",!0),(N=(L=o.value)==null?void 0:L.user)!=null&&N.email?(v(),p("p",Bt,[t("strong",null,e(s(n)("user.email"))+":",1),u(" "+e((D=(C=o.value)==null?void 0:C.user)==null?void 0:D.email),1)])):B("",!0)])]),t("table",Et,[t("thead",null,[t("tr",Mt,[a[2]||(a[2]=t("th",{class:"border p-3 text-left"},"#",-1)),t("th",Rt,e(s(n)("product")),1),t("th",Yt,e(s(n)("quantity")),1),t("th",Ht,e(s(n)("price")),1),t("th",Wt,e(s(n)("total")),1)])]),t("tbody",null,[(v(!0),p(E,null,Q((S=o.value)==null?void 0:S.items,(d,l)=>(v(),p("tr",{key:l},[t("td",zt,e(l+1),1),t("td",At,e(f(d.product)),1),t("td",Gt,e(d.quantity),1),t("td",Jt,e(r(d.price)),1),t("td",Kt,e(r(parseFloat(d.price)*d.quantity)),1)]))),128))])]),t("div",Ot,[t("p",null,[t("strong",null,e(s(n)("invoice.total"))+":",1),u(" "+e(r((T=o.value)==null?void 0:T.total_price)),1)])]),t("div",Qt,[t("p",null,e(s(n)("invoice.thankYou")),1)])])])],64)}}},Pt=z(Ut,[["__scopeId","data-v-b58ec4cb"]]);export{Pt as default};
