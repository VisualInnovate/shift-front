import{_ as N,p as T,l as F,a as U,u as Y,r as y,o as q,d as i,a1 as R,e as c,h as p,B as j,g as t,t as d,v as _,i as r,f as E,n as h,j as S,w as A,G,F as L,b}from"./index-3843758b.js";import{h as w}from"./moment-fbc5633a.js";const H={class:"max-w-2xl mx-auto p-6 bg-white rounded-xl shadow-lg"},J={class:"text-3xl font-bold text-center mb-8 text-gray-800"},K={class:"grid grid-cols-1 gap-6"},O={class:"space-y-2"},P={for:"code",class:"block text-sm font-medium text-gray-700"},Q={class:"flex gap-2"},W={class:"space-y-2"},X={for:"discount_type",class:"block text-sm font-medium text-gray-700"},Z={class:"space-y-2"},z={for:"discount_value",class:"block text-sm font-medium text-gray-700"},ee={key:0,class:"text-gray-500 text-xs"},oe={class:"space-y-2"},te={for:"expires_at",class:"block text-sm font-medium text-gray-700"},se={class:"pt-4 flex justify-center gap-4"},ae={key:0},le={key:1,class:"pi pi-spinner pi-spin"},ne={__name:"update",setup(ue){const v=T(),g=F(),x=U(),{t:m}=Y(),u=y(!1),l=y(!1),s=y({code:"",discount_type:null,discount_value:null,expires_at:""}),$=async e=>{try{u.value=!0;const a=(await b.get(`/api/coupon/${e}`)).data.data;s.value={code:a.code,discount_type:a.discount_type,discount_value:a.discount_value,expires_at:w(a.expires_at).toDate()},l.value=!0}finally{u.value=!1}};q(()=>{v.params.id&&$(v.params.id)});const V=()=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let o="C-";for(let a=0;a<3;a++)o+=e.charAt(Math.floor(Math.random()*e.length));s.value.code=o},k=async()=>{u.value=!0;try{const e={...s.value,expires_at:w(s.value.expires_at).format("YYYY-MM-DD")};l.value?(await b.put(`/api/coupon/${v.params.id}`,e),x.add({severity:"success",summary:m("success"),detail:m("coupon.updated_successfully"),life:3e3})):(await b.post("/api/coupon",e),x.add({severity:"success",summary:m("success"),detail:m("coupon.created_successfully"),life:3e3})),g.push({name:"coupon"})}finally{u.value=!1}};return(e,o)=>{const a=i("InputText"),f=i("Button"),D=i("Dropdown"),C=i("InputNumber"),B=i("Calendar"),I=i("Toast"),M=R("can");return c(),p(L,null,[j((c(),p("div",H,[t("h1",J,d(l.value?e.$t("coupon.edit_coupon"):e.$t("coupon.create_new_coupon")),1),t("form",{onSubmit:G(k,["prevent"]),class:"space-y-6"},[t("div",K,[t("div",O,[t("label",P,[_(d(e.$t("coupon.code"))+" ",1),o[5]||(o[5]=t("span",{class:"text-red-500"},"*",-1))]),t("div",Q,[r(a,{id:"code",modelValue:s.value.code,"onUpdate:modelValue":o[0]||(o[0]=n=>s.value.code=n),placeholder:e.$t("coupon.enter_code"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:"",disabled:l.value},null,8,["modelValue","placeholder","disabled"]),l.value?h("",!0):(c(),E(f,{key:0,type:"button",onClick:V,icon:"pi pi-refresh",class:"px-4 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition",title:e.$t("coupon.generate_random_code")},null,8,["title"]))])]),t("div",W,[t("label",X,[_(d(e.$t("coupon.discount_type"))+" ",1),o[6]||(o[6]=t("span",{class:"text-red-500"},"*",-1))]),r(D,{filter:"",id:"discount_type",modelValue:s.value.discount_type,"onUpdate:modelValue":o[1]||(o[1]=n=>s.value.discount_type=n),options:[{label:e.$t("coupon.fixed_amount"),value:1},{label:e.$t("coupon.percentage"),value:2}],optionLabel:"label",optionValue:"value",placeholder:e.$t("coupon.select_discount_type"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,8,["modelValue","options","placeholder"])]),t("div",Z,[t("label",z,[_(d(e.$t("coupon.discount_value"))+" ",1),o[7]||(o[7]=t("span",{class:"text-red-500"},"*",-1))]),r(C,{id:"discount_value",modelValue:s.value.discount_value,"onUpdate:modelValue":o[2]||(o[2]=n=>s.value.discount_value=n),min:0,max:s.value.discount_type===2?100:null,placeholder:e.$t("coupon.enter_discount_value"),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition",required:""},null,8,["modelValue","max","placeholder"]),s.value.discount_type===2?(c(),p("small",ee,d(e.$t("coupon.percentage_note")),1)):h("",!0)]),t("div",oe,[t("label",te,[_(d(e.$t("coupon.expiration_date"))+" ",1),o[8]||(o[8]=t("span",{class:"text-red-500"},"*",-1))]),r(B,{id:"expires_at",modelValue:s.value.expires_at,"onUpdate:modelValue":o[3]||(o[3]=n=>s.value.expires_at=n),minDate:new Date,dateFormat:"yy-mm-dd",placeholder:e.$t("coupon.select_expiration_date"),class:"w-full border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,8,["modelValue","minDate","placeholder"])])]),t("div",se,[r(f,{type:"button",onClick:o[4]||(o[4]=n=>S(g).push({name:"coupons"})),label:e.$t("cancel"),icon:"pi pi-times",class:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg shadow-md transition-all duration-300"},null,8,["label"]),r(f,{type:"submit",label:l.value?e.$t("coupon.update_coupon"):e.$t("coupon.create_coupon"),icon:l.value?"pi pi-check":"pi pi-plus",loading:u.value,class:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center space-x-2",disabled:u.value},{default:A(()=>[u.value?(c(),p("i",le)):(c(),p("span",ae,d(l.value?e.$t("coupon.update_coupon"):e.$t("coupon.create_coupon")),1))]),_:1},8,["label","icon","loading","disabled"])])],32)])),[[M,"edit coupons"]]),r(I)],64)}}},ie=N(ne,[["__scopeId","data-v-fb684695"]]);export{ie as default};
